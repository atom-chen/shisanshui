require=function e(t,n,i){function o(r,a){if(!n[r]){if(!t[r]){var s="function"==typeof require&&require;if(!a&&s)return s(r,!0);if(c)return c(r,!0);var u=new Error("Cannot find module '"+r+"'");throw u.code="MODULE_NOT_FOUND",u}var h=n[r]={exports:{}};t[r][0].call(h.exports,function(e){var n=t[r][1][e];return o(n?n:e)},h,h.exports,e,t,n,i)}return n[r].exports}for(var c="function"==typeof require&&require,r=0;r<i.length;r++)o(i[r]);return o}({ArrayExtension:[function(e,t,n){"use strict";cc._RFpush(t,"4fd85NSsFJLd4qHrH0UjHzl","ArrayExtension"),t.exports={},Array.prototype.find||(Array.prototype.find=function(e){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,n=Object(this),i=n.length>>>0,o=arguments[1],c=0;c<i;c++)if(t=n[c],e.call(o,t,c,n))return t}),Array.prototype.findIndex||(Array.prototype.findIndex=function(e){if(null===this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,n=Object(this),i=n.length>>>0,o=arguments[1],c=0;c<i;c++)if(t=n[c],e.call(o,t,c,n))return c;return-1}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{enumerable:!1,value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),i=n.length>>>0;if(0===i)return!1;for(var o=0|t,c=Math.max(o>=0?o:i-Math.abs(o),0);c<i;){if(n[c]===e)return!0;c++}return!1}}),Array.prototype.unique||(Object.defineProperty(Array.prototype,"unique",{enumerable:!1,value:function(e){var t=arguments.length<=1||void 0===arguments[1]||arguments[1];return t?this._unqiue_new(e):this._unqiue(e)}}),Object.defineProperty(Array.prototype,"_unqiue_new",{enumerable:!1,value:function(e){var t=Array.from(this);return t._unqiue(e)}}),Object.defineProperty(Array.prototype,"_unqiue",{enumerable:!1,value:function(e){for(var t=this.length,n=-1;n++<t;)for(var i=n+1;i<this.length;++i){var o=!1;o=e?e(this[n],this[i]):this[n]===this[i],o&&this.splice(i--,1)}return this}})),Array.from||(Array.from=function(){var e=Object.prototype.toString,t=function(t){return"function"==typeof t||"[object Function]"===e.call(t)},n=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t},i=Math.pow(2,53)-1,o=function(e){var t=n(e);return Math.min(Math.max(t,0),i)};return function(e){var n=this,i=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var c,r=arguments.length>1?arguments[1]:void 0;if("undefined"!=typeof r){if(!t(r))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(c=arguments[2])}for(var a,s=o(i.length),u=t(n)?Object(new n(s)):new Array(s),h=0;h<s;)a=i[h],r?u[h]="undefined"==typeof c?r(a,h):r.call(c,a,h):u[h]=a,h+=1;return u.length=s,u}}()),Array.equal||(Array.equal=function(e,t){var n=arguments.length<=2||void 0===arguments[2]||arguments[2];if(void 0===e||void 0===t)return!1;var i=e.length;if(i!==t.length)return!1;for(var o=0;o<i;o++)if(n){if(e[o]!==t[o])return!1}else{var c=e[o],r=t[o],a=!0;a=Array.isArray(c)&&Array.isArray(r)?Array.equal(c,r,n):c==r}return!0}),Array.prototype.isEqual||Object.defineProperty(Array.prototype,"isEqual",{enumerable:!1,value:function(e){var t=arguments.length<=1||void 0===arguments[1]||arguments[1];return Array.equal(this,e,t)}}),Array.sortByNumber||(Array.sortByNumber=function(e,t){var n=arguments.length<=2||void 0===arguments[2]||arguments[2];return(e-t)*(n?1:-1)}),Array.prototype.findSubArrayIndexs||Object.defineProperty(Array.prototype,"findSubArrayIndexs",{enumerable:!1,value:function(e,t){var n=this,i=[],o=function(){var o=e[c],r=t||function(e){return o===e},a=n.findIndex(r);return a>=0?void i.push(a):(i=[],"break")};for(var c in e){var r=o();if("break"===r)break}return i.length>0?i:null}}),Array.prototype.translationWithStartIndex||Object.defineProperty(Array.prototype,"translationWithStartIndex",{enumerable:!1,value:function(e){if(0==e)return this;if(e>=this.length)return this;var t=this.slice(e),n=this.slice(0,e),i=t.concat(n);return i}}),Array.prototype.kq_insert||Object.defineProperty(Array.prototype,"kq_insert",{enumerable:!1,value:function(e,t){return null==t?this:e>=this.length?void this.push(t):(this.splice(e,0,t),this)}}),Array.prototype.kq_excludes||Object.defineProperty(Array.prototype,"kq_excludes",{enumerable:!1,value:function(e){if(null==e)return this;var t=[];return this.forEach(function(n){e.includes(n)||t.push(n)}),t}}),cc._RFpop()},{}],AudioManager:[function(e,t,n){"use strict";cc._RFpush(t,"dd5deKFuSZAC4Ky0zI4+z6O","AudioManager");var i=e("manager"),o=cc.Class({"extends":cc.Component,properties:{hall_bgm:{"default":null,url:cc.AudioClip},daQiang:{"default":null,url:cc.AudioClip},fapai:{"default":null,url:cc.AudioClip},window:{"default":null,url:cc.AudioClip},click_weixin_login:{"default":null,url:cc.AudioClip},fangPai:{"default":null,url:cc.AudioClip}},statics:{instance:null},onLoad:function(){o.instance=this,this._registerAppActiveChange(),this.soundOn=!0,cc.game.addPersistRootNode(this.node),cc.game.isPersistRootNode(this.node),this.mValue=i.getMusicValue(),this.mEValue=i.getMusicEffectValue(),this.bgAudioId=-1},stopHallMusic:function(){cc.audioEngine.stop(this.bgAudioId)},playMusic:function(){this.bgAudioId=cc.audioEngine.playMusic(this.hall_bgm,!0),this.bgAudioId!=-1&&cc.audioEngine.setVolume(this.bgAudioId,this.mValue)},playCompareCardsMusic:function(){this.bgAudioId=cc.audioEngine.playMusic(this.hall_bgm,!0),this.bgAudioId!=-1&&cc.audioEngine.setVolume(this.bgAudioId,this.mValue)},playDaQiang:function(){for(var e=0;e<=1.6;e+=.5)this.scheduleOnce(function(){this._playSFX(this.daQiang)}.bind(this),e)},playHumanDaQiang:function(){var e=(arguments.length<=0||void 0===arguments[0]?1:arguments[0],"resources/sounds/man");e+="/daqiang1.mp3";var t=cc.url.raw(e);this._playSFX(t)},playHumanZQiang:function(){var e=(arguments.length<=0||void 0===arguments[0]?1:arguments[0],"resources/sounds/man");e+="/daqiang3.mp3";var t=cc.url.raw(e);this._playSFX(t)},playPokerClick:function(){var e=cc.url.raw("resources/sounds/public/click_wx_login.mp3");this._playSFX(e)},playHomeRun:function(){var e=arguments.length<=0||void 0===arguments[0]?1:arguments[0],t=this._soundsHumanPath(e)+"special1.mp3",n=cc.url.raw(t);this._playSFX(n)},playFaPai:function(){var e=this._soundsHumanPath(1)+"room_start_compare.mp3",t=cc.url.raw(e);this._playSFX(t),this._playSFX(this.fapai);for(var n=0;n<6;n++)this.scheduleOnce(function(){this._playSFX(this.fapai)}.bind(this),.1*n)},playCardType:function(){var e=arguments.length<=0||void 0===arguments[0]?1:arguments[0],t=arguments.length<=1||void 0===arguments[1]?-1:arguments[1];if(t>=10||t<0){var n=this._soundsHumanPath(e)+t+".mp3",i=cc.url.raw(n);return void this._playSFX(i)}var o=this._soundsHumanPath(e)+"common"+(t+1)+".mp3",c=cc.url.raw(o);this._playSFX(c)},playStartCompare:function(){var e=arguments.length<=0||void 0===arguments[0]?1:arguments[0],t=this._soundsHumanPath(e)+"start_compare.mp3",n=cc.url.raw(t);this._playSFX(n)},playWin:function(){var e=cc.url.raw("resources/sounds/openface/win.mp3");this._playSFX(e)},playLose:function(){var e=cc.url.raw("resources/sounds/openface/lose.mp3");this._playSFX(e)},coinIncome:function(){var e=cc.url.raw("resources/sounds/openface/coin_income.mp3");this._playSFX(e)},_soundsHumanPath:function(e){var t="resources/sounds/man/";return t},setBgMusicVolumn:function(e){this.mValue=e,this.bgAudioId!=-1&&cc.audioEngine.setVolume(this.bgAudioId,e)},setEffectMusicVolum:function(e){this.mEValue=e},playChatAudio:function(e,t){var n=this.chatTexts().indexOf(t);if(n!==-1){var i="CHAT"+(n+1),o="resources/sounds/chat/"+i+".mp3",c=cc.url.raw(o);this._playSFX(c)}},chatTexts:function(){return["还不出牌，我都快去吃锅边糊了","嗨呀，我家里老人都比你打的快","嗨呀，打牌打的我都困了","哎，你快慢慢找，我先去西湖逛一下","快一点呀，我等你想好我厕所都上一趟了","你这在干嘛，这么慢","嗨呀，最近在忙什么，很久没见了","来来来，三缺一","来来来，赶紧坐下来打一圈","跟你们这些高手打我会紧张，让我一点","蛮晚到天亮，输了可以让你们先欠着"]},pauseMusic:function(){this.soundOn=!1,cc.audioEngine.pauseMusic()},resumeMusic:function(){this.soundOn=!0,cc.audioEngine.resumeMusic()},_playSFX:function(e){if(this.soundOn){var t=cc.audioEngine.playEffect(e,!1);return cc.audioEngine.setVolume(t,this.mEValue),t}return null},_registerAppActiveChange:function(){cc.game.on(cc.game.EVENT_HIDE,this._appEnterBackground,this),cc.game.on(cc.game.EVENT_SHOW,this._appBecomActive,this)},_appEnterBackground:function(){var e=cc.sys.now();e-this._lastAppEnterBackgroundTime<100||(this._lastAppEnterBackgroundTime=e,this.pauseMusic())},_appBecomActive:function(){var e=cc.sys.now();e-this._lastAppBecomActiveTime<100||(this._lastAppBecomActiveTime=e,this.resumeMusic())},playBtnClickSFX:function(){this._playSFX(this.click_weixin_login)},palyBtnPublicSFX:function(){this._playSFX(this.click_weixin_login)},palyBtnCancelClickSFX:function(){this._playSFX(this.click_weixin_login)},palyBtnCreateRoomSFX:function(){this._playSFX(this.click_weixin_login)},palyWindowSFX:function(){this._playSFX(this.window)},palyWeiXinLoginSFX:function(){this._playSFX(this.click_weixin_login)},palyFangPaiSFX:function(){this._playSFX(this.fangPai)}});t.exports=o,cc._RFpop()},{manager:"manager"}],CardPrefab:[function(e,t,n){"use strict";cc._RFpush(t,"94cdbrbPc9KRqx+1sHumWI3","CardPrefab");var i=e("KQCard");cc.Class({"extends":cc.Component,properties:{graySprite:cc.Sprite,_cardName:null,_kqCardMode:null},onLoad:function(){this.graySprite.node.active=!1},setCard:function(e){this._setCardName(e),this._loadCardFrame(e,function(e){this.node.getComponent("cc.Sprite").spriteFrame=e}.bind(this))},cardName:function(){return this._cardName},cardMode:function(){return this._kqCardMode},_setCardName:function(e){this._cardName=e,this._kqCardMode=new i(e)},setSelected:function(){var e=!(arguments.length<=0||void 0===arguments[0])&&arguments[0];this.graySprite.node.active=e},isSelected:function(){return this.graySprite.node.active},_cardFullName:function(e){var t=e;return t.startsWith("public-pic-card-poker")||(t="public-pic-card-poker-"+t),t},_loadCardFrame:function(e,t){cc.assert(t),cc.loader.loadRes("play/CardTypeCombine/pockList",cc.SpriteAtlas,function(n,i){if(n)return void cc.error(n);e=this._cardFullName(e);var o=i.getSpriteFrame(e);t(o)}.bind(this))}}),cc._RFpop()},{KQCard:"KQCard"}],CardTypeCombine:[function(e,t,n){"use strict";cc._RFpush(t,"45c41vwAhFNYYSXDvaKpEP0","CardTypeCombine");var i=function(){function e(e,t){var n=[],i=!0,o=!1,c=void 0;try{for(var r,a=e[Symbol.iterator]();!(i=(r=a.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(s){o=!0,c=s}finally{try{!i&&a["return"]&&a["return"]()}finally{if(o)throw c}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=e("KQCard"),c=(e("KQCardFindTypeExtension"),e("AudioManager")),r=e("play");e("KQCardScoretsHelper");cc.Class({"extends":cc.Component,statics:{instances:null},properties:{cardsLayout:cc.Layout,btnDeleteTouDao:cc.Button,btnDeleteZhongDao:cc.Button,btnDeleteWeiDao:cc.Button,btnCancelAll:cc.Button,btnDone:cc.Button,timeNode:cc.Node,labelTime:cc.Label,layoutTouDao:cc.Layout,layoutZhongDao:cc.Layout,layoutWeiDao:cc.Layout,cardAllNode:cc.Node,cardPrefab:cc.Prefab,cardTypePrefab:cc.Prefab,touDaoNode:cc.Node,zhongDaoNode:cc.Node,weiDaoNode:cc.Node,autoCardScrollView:cc.ScrollView,autoCard:cc.Prefab,autoCardLayout:cc.Layout,autoCardAnimation:cc.Node,LayoutWithEvent:[],BtnClickGongXiNiComfirm:!1,cardsLayoutSortColor:!1,_cardOffsetY:null,_kqCardModes:[],_allCardModes:[],_findCardTypeObject:null,_findCardIndex:null,_finishSelectCardsCallback:null},onLoad:function(){this.BtnClickGongXiNiComfirm=!1,this.cardsLayoutSortColor=!1,this._cardOffsetY=0,this._registerTouchEvents(),this._registerDaosLayoutClickEvent(),this.reset(),this._findCardIndex={},this.cardTime=.3,this.cardSpriteAtlas=this.node.parent.getComponent("play").cardSpriteAtlas,this.daoSpriteAtlas=this.node.parent.getComponent("play").daoSpriteAtlas},onClickCardTypeCombineNode:function(){this._resetCardsPositionY()},_hideDeleteButtons:function(){},reset:function(){this._hideDeleteButtons(),this.clearCards(),this.timeStop(),this._allCardModes=[]},cardsLayoutSort:function(e){var t=e.target.children;return 1==t[0].active?(this.cardsLayoutSortColor=!0,t[0].active=!1,t[1].active=!0,void this._resetCardsPositionX()):void(1==t[1].active&&(this.cardsLayoutSortColor=!1,t[0].active=!0,t[1].active=!1,this._resetCardsPositionX()))},addCards:function(e){cc.assert(e),this._resetCardsPositionY(),e.forEach(function(e,t){this.addCard(e,!1,t)}.bind(this)),this._resetCardsPositionX(),this._reloadKQCardModesInner(),this._resetTypeButtonEnablesWithModels(this._kqCardModes)},addCard:function(e){var t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],n=arguments.length<=2||void 0===arguments[2]?null:arguments[2];cc.assert(e.length>0);var i=cc.instantiate(this.cardPrefab);i.name=e,i.getComponent("CardPrefab").setCard(e,n),this.cardsLayout.node.addChild(i),i.setPositionY(this._cardOffsetY),t&&this._resetCardsPositionX()},addCardModes:function(e){cc.assert(e.length>0),this._allCardModes=[],e.forEach(function(e,t){var n=new o(e,null,t);this._allCardModes.push(n)}.bind(this))},reloadCards:function(e){cc.log(e),this.clearCards(),this._kqCardModes=[],this.addCards(e)},clearCards:function(){this.cardsLayout.node.removeAllChildren(),this.layoutTouDao.node.removeAllChildren(),this.layoutZhongDao.node.removeAllChildren(),this.layoutWeiDao.node.removeAllChildren()},removeCard:function(e){e.length&&this.cardsLayout.node.getChildByName(e).removeFromParent()},setFinishSelectCardsCallback:function(e){this._finishSelectCardsCallback=e,this.node.active=!1},_reloadKQCardModesInner:function(){},_typeButtons:function(){},_resetTypeButtonEnablesWithModels:function(e){},_stickOutFindCardType:function(e,t){},clickDuiZi:function(){this._stickOutFindCardType("duiZi",function(){return o.findDuiZi(this._kqCardModes)}.bind(this))},clickLiangDui:function(){this._stickOutFindCardType("liangDui",function(){return o.findLiaDui(this._kqCardModes)}.bind(this))},clickSanTiao:function(){this._stickOutFindCardType("sanTiao",function(){return o.findSanTiao(this._kqCardModes)}.bind(this))},clickShunZi:function(){this._stickOutFindCardType("shunZi",function(){return o.findShunZi(this._kqCardModes)}.bind(this))},clickTongHua:function(){this._stickOutFindCardType("tongHua",function(){return o.findTongHua(this._kqCardModes)}.bind(this))},clickHuLu:function(){this._stickOutFindCardType("huLu",function(){return o.findHuLu(this._kqCardModes)}.bind(this))},clickTieZhi:function(){this._stickOutFindCardType("tieZhi",function(){return o.findTieZhi(this._kqCardModes)}.bind(this))},clickWuTong:function(){this._stickOutFindCardType("wuTong",function(){return o.findWuTong(this._kqCardModes)}.bind(this))},clickTongHuaShun:function(){this._stickOutFindCardType("tongHuaShun",function(){return o.findTongHuaShun(this._kqCardModes)}.bind(this))},clickCancelAll:function(){this.clickDeleteTouDao(),this.clickDeleteZhongDao(),this.clickDeleteWeiDao()},clickDone:function(){cc.sys.localStorage.removeItem("timestamp"),this.cardAlls=this.cardAllNode.children.sort(function(e,t){return t.y-e.y}).map(function(e){return e.children[0]});var e=this._taoDaoCardModes(),t=this._zhongDaoCardModes(),n=this._weiDaoCardModes();this._didSelectedCards(e,t,n)},onBtnGongXiNiComfirmClick:function(){this.BtnClickGongXiNiComfirm=!0;var e=[];cc.teShuPaiCards.forEach(function(t){e=e.concat(t)});var t=this._convertCardsToServerModel2(e),n=[t];this._finishSelectCardsCallback&&this._finishSelectCardsCallback(n)},_didSelectedCards:function(e,t,n){e=e||[],t=t||[],n=n||[];var i=this._convertCardsToServerModel(e),o=this._convertCardsToServerModel(t),c=this._convertCardsToServerModel(n);if(!(i.value<o.value&&o.value<=c.value))return this.autoCardAnimation.y=-50,this.autoCardAnimation.opacity=255,this.autoCardAnimation.runAction(cc.moveTo(1,cc.p(0,0))),void this.scheduleOnce(function(){var e=cc.spawn(cc.moveTo(this.cardTime,cc.p(0,10)),cc.fadeOut(this.cardTime));this.autoCardAnimation.runAction(e)}.bind(this),1.5);var r=[i,o,c];this._finishSelectCardsCallback&&this._finishSelectCardsCallback(r)},clickDeleteTouDao:function(){this._deleteDaoCardsOfLayout(this.layoutTouDao.node)},clickDeleteZhongDao:function(){this._deleteDaoCardsOfLayout(this.layoutZhongDao.node)},clickDeleteWeiDao:function(){this._deleteDaoCardsOfLayout(this.layoutWeiDao.node)},timeStart:function(e){cc.assert(e>0),this.timeStop(),this.timeNode.active=!0;var t=cc.sys.localStorage.getItem("timestamp");if(t){var n=Date.parse(new Date),i=1e3*e;n-t>i?n-t<2*i?e=5:cc.sys.localStorage.removeItem("timestamp"):e=Math.floor(e-(n-t)/1e3)}else{var t=Date.parse(new Date);cc.sys.localStorage.setItem("timestamp",t)}this._timeRemainDuration=e,this.labelTime.string=String(e),this.timeNode.getComponent("time").setTime(.5*e),this.schedule(this._timeMethod,1,e)},timeStop:function(){this.unschedule(this._timeMethod),this.timeNode.active=!1},_timeMethod:function(){this._timeRemainDuration=this._timeRemainDuration-1;var e=Math.max(this._timeRemainDuration,0);if(this.labelTime.string=e<10&&e>0?"0"+e:e,this._timeRemainDuration<=0)return this.timeStop(),1==cc.chaoShiChuPai&&this._timeOutAutoSelectCards(),void cc.sys.localStorage.removeItem("timestamp")},_timeOutAutoSelectCards:function(){if(r.gongXiNiShow(!1),"undefined"!=typeof cc.teShuPaiCards&&null!=cc.teShuPaiCards)return void this.onBtnGongXiNiComfirmClick();var e=i(this._findCardIndex.arr[0],3),t=e[0],n=e[1],o=e[2];null!=t&&null!=n&&null!=o||(t=this._allCardModes.slice(-3),n=this._allCardModes.slice(5,10),o=this._allCardModes.slice(0,5)),this._didSelectedCards(t,n,o)},_cacleAutoSelectedCards:function(){for(var e=this._allCardModes.filter(function(e){return e}),t=[],n=1;n<3;n++){var i=o.autoSelectCards(e,5);e=e.kq_excludes(i),t.push(i)}return t.push(e),3==t[2].length&&5==t[1].length&&5==t[0].length?[t[2],t[1],t[0]]:[]},_convertCardsToServerModel:function(e){var t={};return t.type=o.cardsType(e),t.value=o.scoreOfCards(e),e=o._typeCardsSortByNumberOfPoints1(e),t.cards=o.convertToServerCards(e),t},_convertCardsToServerModel2:function(e){var t=[];cc.teShuPaiCards.forEach(function(e){var n=[];e=o._typeCardsSortByNumberOfPoints(o.cardsFromArray(e)),e.forEach(function(e){var t=14==e.point?1:e.point;n.push({number:t,suit:e.color})}),t.push(n)});var n={};return n.type=o.cardsType(e),n.value=0,n.cards=t,n.type>=o.TYPE.SanTaoHua&&1!=cc.moshi&&(n.isContainExtra=!0),n},_isContainExtraCardsType:function(e,t){return e==o.TYPE.SanTaoHua?o.containTongHuaShun(t):e==o.TYPE.SanShunZi?o.containTongHuaShun(t):e==o.TYPE.LiuDuiBan&&o.containTieZhi(t)},_registerTouchEvents:function(){},cacleAutoSelectedCardsIndex:function(e){for(var t=o.testFind(e)||[],n=[],i=0;i<t.length;i++){var c=t[i];if(c.length>=1)for(var r=0;r<c.length;r++)n.push(c[r])}return n},cacleAutoSelectedCardsArray:function(e){var t=this.cacleAutoSelectedCardsIndex(e);if(t.length<1)return!1;for(var n=[],i=0;i<t.length;i++){var o=t[i],c=o.map(function(t){return e[t]});n.push(c)}return n},cacleAutoSelectedCards2:function(){for(var e=this._allCardModes.slice(),t=this.cacleAutoSelectedCardsArray(e),n=[],i=0;i<t.length;i++){for(var c=t[i]||[],r=[],a=1;a<t.length;a++){var s=t[a]||[],u=c.kq_excludes(s);u.length==c.length&&c.length>0&&(r=[c,s])}r.length>1&&n.push(r)}for(var i=0;i<n.length;i++){var h=n[i],l=this._allCardModes.slice();l=l.kq_excludes(h[0]),l=l.kq_excludes(h[1]),l.length>=5?h[2]=o.autoSelectCards(l,5):h[2]=o.autoSelectCards(l,3),n[i].sort(function(e,t){return o.scoreOfCards(e)-o.scoreOfCards(t)})}for(var i=0;i<n.length;i++){var d=n[i],f=this._allCardModes.filter(function(e){return e}),p=d[0].concat(d[1]).concat(d[2]),v=f.kq_excludes(p);if(d[0]=d[0].kq_excludes(d[1]),d[0]=d[0].kq_excludes(d[2]),d[1]=d[1].kq_excludes(d[0]),d[1]=d[1].kq_excludes(d[2]),d[2]=d[2].kq_excludes(d[1]),d[2]=d[2].kq_excludes(d[0]),d[2].length>5){var g=d[2].splice(5,d[2].length-5);for(var m in g)v.push(g[m])}if(d[1].length>5){var g=d[1].splice(5,d[1].length-5);for(var m in g)v.push(g[m])}if(d[0].length>3){var g=d[0].splice(3,d[0].length-3);for(var m in g)v.push(g[m])}for(v.sort(o.sortByPoint),v.forEach(function(e){14==e.point&&(e.point=1)});d[2].length<5;)d[2].push(v.pop()||[]);for(;d[1].length<5;)d[1].push(v.pop()||[]);for(;d[0].length<3;)d[0].push(v.pop()||[]);null!=d[2][4]&&null!=d[1][4]&&null!=d[0][2]&&""!=d[2][4]&&""!=d[1][4]&&""!=d[0][2]||n.splice(i,1)}for(var C=[],_=this._allCardModes.filter(function(e){return e}),y=2,i=0;i<3;i++){var S=0==y?3:5,l=o.autoSelectCards(_,S)||[];_=_.kq_excludes(l),C[y]=l,y--}for(var i=0;i<C.length;i++){var b=0==i?3:5;if(C[i].length<b)for(_=_.kq_excludes(C[i]);C[i].length<b;)C[i].push(_.pop())}n.push(C);for(var N=[],I=[],i=0;i<n.length;i++){var k=n[i],T=o.cardsTypeName(k[0]);if(T+=o.cardsTypeName(k[1]),T+=o.cardsTypeName(k[2]),N.indexOf(T)==-1){var A=o.scoreOfCards(k[0]),w=o.scoreOfCards(k[1]),E=o.scoreOfCards(k[2]);w>A&&w<E&&(N.push(T),I.push(k))}}if(I.sort(function(e,t){var n=parseInt(o.cardsType(t[0]))+"",i=parseInt(o.cardsType(t[1]))+"",c=parseInt(o.cardsType(t[2]))+"",r=parseInt(o.cardsType(e[0]))+"",a=parseInt(o.cardsType(e[1]))+"",s=parseInt(o.cardsType(e[2]))+"",u=parseInt(s+a+r),h=parseInt(c+i+n);return h-u}),I.length>7&&(I=I.slice(0,7)),I.length<=0){this._allCardModes.forEach(function(e){1==e.scores&&(e.scores=14)});var R=o.contain20(this._allCardModes);this._allCardModes=this._allCardModes.kq_excludes(R),this._allCardModes=o._typeCardsSortByNumberOfPoints(this._allCardModes),this._allCardModes=R.concat(this._allCardModes);var x=this._allCardModes.slice(0,5),L=this._allCardModes.slice(5,10),M=this._allCardModes.slice(10,13);I.push([M,L,x])}this.autoCardLayout.node.removeAllChildren(),this.autoCardScrollView.scrollToLeft();for(var i=0;i<I.length;i++){var P=I[i],D=cc.instantiate(this.autoCard);D.y=0,P[0].forEach(function(e){14==e.point&&(e.point=1)}),P[1].forEach(function(e){14==e.point&&(e.point=1)}),P[2].forEach(function(e){14==e.point&&(e.point=1)});var F=[D.children[1],D.children[3],D.children[2]];this._setCardDaoSprite(F,P),D.cardArray=P;var B=new cc.Component.EventHandler;B.target=this.node,B.component="CardTypeCombine",B.handler="clickAutoSelectedCards",B.customEventData=i,D.getComponent(cc.Button).clickEvents.push(B),this.autoCardLayout.node.addChild(D)}this._findCardIndex.arr=I,this.autoSelectedCardsOne()},autoSelectedCardsOne:function(){this.cardsLayout.node.removeAllChildren();for(var e=0,t=0;t<this.autoCardLayout.node.children.length;t++){var n=this.autoCardLayout.node.children[t];n.children[0].active=!1}this.autoCardLayout.node.children[e].children[0].active=!0;var i=this._findCardIndex.arr[e];this._findCardIndex.indexs=e;for(var t=0;t<i.length;t++){var c=i[t];c.sort(o.sort);var r=0;1==t?r=3:2==t&&(r=8),c.forEach(function(e,t){var n=e.cardName(),i=r+t,c=new cc.Node;c.anchorY=1,c.addComponent(cc.Sprite),this.cardAllNode.children[i].addChild(c),this.cardAllNode.children[i].children[0].cardName=n,this.cardAllNode.children[i].children[0]._cardModel=new o(n,null,t);var a=this.cardAllNode.children[i].children[0].getComponent(cc.Sprite);if(this.cardAllNode.children[i].getComponent(cc.Sprite).spriteFrame="",a.node.removeAllChildren(),cc.maPai==n){var s=new cc.Node;s.addComponent(cc.Sprite),cc.loader.loadRes("play/desk/img_red5_1",cc.SpriteFrame,function(e,t){if(e)return void cc.error(e.message||e);var n=s.getComponent(cc.Sprite);n.spriteFrame=t,n.node.width=107,n.node.height=155,n.node.y=-65.5}.bind(this)),a.node.addChild(s)}var u="public-pic-card-poker-"+n;this._loadCardFrame(this.cardSpriteAtlas,u,a,95,130)}.bind(this))}this.clickAutoSelectedCards(null)},clickAutoSelectedCards:function(e){for(var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1],n=0;n<this.autoCardLayout.node.children.length;n++){var i=this.autoCardLayout.node.children[n];i.children[0].active=!1}if(this.autoCardLayout.node.children[t].children[0].active=!0,c.instance.playPokerClick(),e)var r=e.target.cardArray;else var r=this._findCardIndex.arr[t];o.scoreOfCards(r[0]),o.scoreOfCards(r[1]),o.scoreOfCards(r[2]);r=r.map(function(e){return e=o._typeCardsSortByNumberOfPoints(e),e.map(function(e){return e.cardName()}.bind(this))}.bind(this)),this.LayoutWithEvent.forEach(function(e){e.color=new cc.Color(255,255,255),e.children.forEach(function(e){e.color=new cc.Color(255,255,255)})}),this.LayoutWithEvent=[],r=r[0].concat(r[1]).concat(r[2]);for(var a=this.cardAllNode.children.map(function(e){return e}),n=0;n<r.length;n++)for(var s=r[n],u=0;u<a.length;u++){var h=a[u];if(h.getComponent(cc.Button).interactable=!1,h.children[0].cardName==s){h.stopAllActions();var l=this.changeNodeSpaceAR[n],d=cc.callFunc(function(){this.cardAllNode.children.forEach(function(e){e.getComponent(cc.Button).interactable=!0}),this._setCardDaoSprite()}.bind(this),this);h.runAction(cc.sequence(cc.moveTo(this.cardTime,l),d)),a.splice(u,1);break}}},_loadCardFrame:function(e,t,n,i,o){var c=e.getSpriteFrame(t);n.spriteFrame=c,i&&(n.node.width=i),o&&(n.node.height=o)},stickOutFindCardType1:function(e){arguments.length<=1||void 0===arguments[1]?0:arguments[1]},_touchCardLayout:function(e){},_touchCardLayoutEnd:function(e){},_cardPrefabInCardLayoutWithLocation:function(e){},_changeSelectedCardPrefabsY:function(){},_changeCardPrefabsY:function(e){},_selectedCardPrefabs:function(){!(arguments.length<=0||void 0===arguments[0])&&arguments[0]},_diseclectCardPrefabs:function(){},_resetCardsPositionX:function(){},resetCardsPositionX1:function(){},_resetCardsPositionY:function(){},_registerDaosLayoutClickEvent:function(){this.changeNodeSpaceAR=[],this.cardAllNode.children.forEach(function(e){var t=e.convertToWorldSpaceAR(cc.v2(0,0)),n=e.parent.convertToNodeSpaceAR(t);this.changeNodeSpaceAR.push(n)}.bind(this))},clickAllCard:function(e){if(c.instance.playPokerClick(),this.LayoutWithEvent.length<=1&&(this.LayoutWithEvent.push(e.target),e.target.color=new cc.Color(182,182,182),e.target.children.forEach(function(e){e.color=new cc.Color(182,182,182)})),2==this.LayoutWithEvent.length){var t=[];this.LayoutWithEvent.forEach(function(e){var n=e.convertToWorldSpaceAR(cc.v2(0,0)),i=e.parent.convertToNodeSpaceAR(n);t.unshift(i)}.bind(this)),this.LayoutWithEvent.forEach(function(e,n){e.color=new cc.Color(255,255,255),e.children.forEach(function(e){e.color=new cc.Color(255,255,255)}),e.getComponent(cc.Button).interactable=!1,this.scheduleOnce(function(){e.getComponent(cc.Button).interactable=!0,this._setCardDaoSprite()}.bind(this),this.cardTime),e.stopAllActions();var i=t[n];e.runAction(cc.moveTo(this.cardTime,i))}.bind(this)),this.LayoutWithEvent=[]}},_setCardDaoSprite:function(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0],t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];e||(this.cardAlls=this.cardAllNode.children.sort(function(e,t){return t.y-e.y}).map(function(e){return e.children[0]}),t=[this._taoDaoCardModes(),this._zhongDaoCardModes(),this._weiDaoCardModes()],t.forEach(function(e){e.forEach(function(e){14==e.scores&&(e.scores=1)})}),e=[this.touDaoNode,this.zhongDaoNode,this.weiDaoNode]);var n=o.cardsType(t[0])+1;n=n>=10?n:"0"+n,n="04"==n?"11":n;var i="game_poker_type"+n;this._loadCardFrame(this.daoSpriteAtlas,i,e[0].getComponent(cc.Sprite));var c=o.cardsType(t[1])+1;c=c>=10?c:"0"+c,c="07"==c?"22":c,i="game_poker_type"+c,this._loadCardFrame(this.daoSpriteAtlas,i,e[1].getComponent(cc.Sprite));var r=o.cardsType(t[2])+1;r=r>=10?r:"0"+r,i="game_poker_type"+r,this._loadCardFrame(this.daoSpriteAtlas,i,e[2].getComponent(cc.Sprite)),this.cardAllNode.children.forEach(function(e){e.getComponent(cc.Sprite).spriteFrame=""}),t&&(n&&o._setGuiCard(0,0,3,n,t,this.cardAllNode.children,this.cardSpriteAtlas),c&&o._setGuiCard(1,3,8,c,t,this.cardAllNode.children,this.cardSpriteAtlas),r&&o._setGuiCard(2,8,13,r,t,this.cardAllNode.children,this.cardSpriteAtlas))},_clickTouDaoLayout:function(e){this._daoCardNodeInLayoutWithEvent(this.layoutTouDao.node,e)},_clickZhongDaoLayout:function(e){this._daoCardNodeInLayoutWithEvent(this.layoutZhongDao.node,e)},_clickWeiDaoLayout:function(e){this._daoCardNodeInLayoutWithEvent(this.layoutWeiDao.node,e)},_daoCardNodeInLayoutWithEvent:function(e,t){var n=e.children||[],i=t.getLocation();i=e.convertToNodeSpaceAR(i);for(var o in n){var r=n[o],a=r.getBoundingBox();if(cc.rectContainsPoint(a,i)){c.instance.playPokerClick();var s=[e,r];if(1==this.LayoutWithEvent.length?this.LayoutWithEvent[0][0].name!=e.name?(r.opacity=200,this.LayoutWithEvent.push(s)):(this.LayoutWithEvent[0][1].opacity=255,this.LayoutWithEvent=[]):0==this.LayoutWithEvent.length&&(this.LayoutWithEvent.push(s),r.opacity=200),2==this.LayoutWithEvent.length){var u=this.LayoutWithEvent[0][1],h=this.LayoutWithEvent[1][1],l=u.convertToWorldSpaceAR(cc.v2(0,0)),d=u.parent.convertToNodeSpaceAR(l);h.runAction(cc.moveTo(1,d))}return}}},_addDaoCardToLayout:function(e){arguments.length<=1||void 0===arguments[1]?5:arguments[1]},_deleteDaoCard:function(e){!(arguments.length<=1||void 0===arguments[1])&&arguments[1]},_deleteDaoCardsOfLayout:function(e){},_isValidCardModes:function(e,t,n){if(e=e||[],t=t||[],n=n||[],e.length<3||t.length<5||n.length<5)return!0;var i=o.scoreOfCards(e),c=o.scoreOfCards(t),r=o.scoreOfCards(n);return i<c&&c<=r},_taoDaoCardModes:function(){return this._cardModesOfCardPrefabs(this.cardAlls.slice(0,3))},_zhongDaoCardModes:function(){return this._cardModesOfCardPrefabs(this.cardAlls.slice(3,8))},_weiDaoCardModes:function(){return this._cardModesOfCardPrefabs(this.cardAlls.slice(8,13))},_cardModesOfCardPrefabs:function(e){if(!e)return[];var t=e.map(function(e){return e._cardModel});return t||[]},_autoActiveDeleteDaoButtons:function(){},_autoActiveDeleteDaoButton:function(e,t){},_autoActiveTypeButtons:function(){}}),cc._RFpop()},{AudioManager:"AudioManager",KQCard:"KQCard",KQCardFindTypeExtension:"KQCardFindTypeExtension",KQCardScoretsHelper:"KQCardScoretsHelper",play:"play"}],CardTypeSprite:[function(e,t,n){"use strict";cc._RFpush(t,"e614c0FMndAtrOMcy8/PcZw","CardTypeSprite");var i=e("KQCard");cc.Class({"extends":cc.Component,properties:{_cardName:null,_cardModel:null},onLoad:function(){},setCard:function(e,t){var n=arguments.length<=2||void 0===arguments[2]||arguments[2];this._cardName=e,n&&(this._cardModel=new i(e,null,t)),this._loadCardFrame(e,function(e){this.node.getComponent("cc.Sprite").spriteFrame=e}.bind(this))},cardName:function(){return this._cardName},cardMode:function(){return this._cardModel},_cardFullName:function(e){var t=e;return t.startsWith("public-pic-card-poker")||(t="public-pic-card-poker-"+t),t},_loadCardFrame:function(e,t){cc.assert(t),cc.loader.loadRes("play/CardTypeCombine/pockList",cc.SpriteAtlas,function(n,i){if(n)return void cc.error(n);e=this._cardFullName(e);var o=i.getSpriteFrame(e);t(o)}.bind(this))}}),cc._RFpop()},{KQCard:"KQCard"}],ChatMessage:[function(e,t,n){"use strict";cc._RFpush(t,"dc8980X2ZVNKrH9BsIsSE4D","ChatMessage");var i=cc.Class({"extends":cc.Component,properties:{richText:cc.RichText,spriteBackground:cc.Sprite,emoji:cc.Node},onLoad:function(){i.instances=this},setString:function(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0],t=arguments.length<=1||void 0===arguments[1]||arguments[1];if(0!=e.length){this.node.active=!0,this.richText.node.active=!0,this.spriteBackground.node.active=!0,this.emoji.active=!1;var n=300,o=i.parseString(e);this.richText.maxWidth=0,this.richText.string=o;var c=this.richText.node.getContentSize().width;c>n&&(this.richText.maxWidth=n,this.richText.string=o,c=n),this.node.width=c+28,this.node.height=this.richText.node.getContentSize().height+20,this.spriteBackground.node.width=this.node.width,this.spriteBackground.node.height=this.node.height,t&&this._hideNode()}},showEmoji:function(e){this._hideNode(),this.node.active=!0,this.emoji.active=!0,
this.richText.node.active=!1,this.spriteBackground.node.active=!1;var t=this.emoji.getComponent(cc.Sprite);t.spriteFrame=e},_hideNode:function(){this.unscheduleAllCallbacks(),this.scheduleOnce(function(){this.node.active=!1}.bind(this),3)}});i.setEmoji=function(e){this.instances._hideNode(),this.instances.node.active=!0,this.instances.emoji.active=!0,this.instances.richText.node.active=!1,this.instances.spriteBackground.node.active=!1;var t=this.instances.emoji.getComponent(cc.Sprite);t.spriteFrame=e},i.parseString=function(e){var t=e.replace(/<bq\d{1,2}>/g,function(e){var t=e.replace("<"," <img src='").replace(">","'/> ");return t});return t},t.exports=i,cc._RFpop()},{}],ChatTextRecord:[function(e,t,n){"use strict";cc._RFpush(t,"88d10U9tIpHNK1entoUH0Ju","ChatTextRecord"),cc.Class({"extends":cc.Component,properties:{},onLoad:function(){},setString:function(e){this._richText().string=e},_richText:function(){return this.node.getComponent("cc.RichText")},setEmoji:function(e){this._spriteFrame().Spraite=e},_spriteFrame:function(){return this.node.getComponent("cc.Sprite")}}),cc._RFpop()},{}],CompareCards:[function(e,t,n){"use strict";cc._RFpush(t,"9aa4aH/Ha1JfaEeY5nFj5P1","CompareCards");var i=(e("KQCardResHelper"),e("AudioManager")),o=e("KQCard");cc.Class({"extends":cc.Component,properties:{touLayout:cc.Layout,zhongLayout:cc.Layout,weiLayout:cc.Layout,touLayoutBack:cc.Layout,zhongLayoutBack:cc.Layout,weiLayoutBack:cc.Layout,baoDao:cc.Node,playTotalScore:cc.Layout,daoScoreLayouts:[cc.Layout],daoTitleNodes:[cc.Node],TScoreLayout:cc.Layout,TtitleNode:cc.Node,pNum:0,teShuTime:0,teShuNum:0,_lCScore:null,_daoLayouts:null,_daoLayoutBacks:null,_scores:null,_user:null,_cardsInfo:null,_compareIndex:0},onLoad:function(){this._daoLayouts=[this.touLayout,this.zhongLayout,this.weiLayout],this._daoLayoutBacks=[this.touLayoutBack,this.zhongLayoutBack,this.weiLayoutBack],this.reset(),this._scores&&this.setScores(this._scores)},reset:function(){this._compareIndex=0,this.node.children.forEach(function(e){e.active=!1}),this.baoDao.getComponent(cc.Sprite).spriteFrame=null;var e=this.touLayoutBack.node.children.concat(this.zhongLayoutBack.node.children).concat(this.weiLayoutBack.node.children);this.cardSpriteAtlas=this.node.parent.parent.getComponent("play").cardSpriteAtlas,e.forEach(function(e){e.removeAllChildren();var t=e.getComponent(cc.Sprite);o._loadCardFrame(this.cardSpriteAtlas,"public-pic-card-poker-back",t)}.bind(this)),this.daoScoreLayouts.forEach(function(e){e.node.active=!1}.bind(this)),this.daoTitleNodes.forEach(function(e){e.active=!1}.bind(this)),this.TScoreLayout&&(this.TScoreLayout.node.active=!1),this.TtitleNode&&(this.TtitleNode.active=!1),this.unscheduleAllCallbacks(),this.TScoreLayout&&this.TScoreLayout.node.stopAllActions(),this.playTotalScore&&this.playTotalScore.node.stopAllActions()},setCompareData:function(e){this._user=e,this._cardsInfo=e.cardInfo;var t=e.cardInfo;this._lCScore=e.lCScore;var n=t.map(function(e){return o.cardsFromArray(e.cards)}).reduce(function(e,t){return e.concat(t)},[]),i=[e.score1||0,e.score2||0,e.score3||0,e.lScore1||0,e.lScore2||0,e.lScore3||0];this.setCards(n),this.setScores(i)},showScoreResult:function(){if(this._user){var e=this._user.cScore;this.setScores([e],[this.playTotalScore],!0),this.playTotalScore.node.active=!0,this.playTotalScore.node.opacity=255;var t=this.playTotalScore.node.x,n=this.playTotalScore.node.y;this.playTotalScore.node.runAction(cc.moveTo(.8,cc.p(t,n+30))),this.scheduleOnce(function(){this.playTotalScore.node.runAction(cc.fadeOut(.2))}.bind(this),.6),this.scheduleOnce(function(){this.playTotalScore.node.y=n}.bind(this),1)}},showNextCompareScore:function(e){if(e&&this.TScoreLayout){var t=this._lCScore.splice(0,1);if(t.length<=0)return;this.setScores(t,[this.TScoreLayout],!0),this.TtitleNode.active=!0,this.TScoreLayout.node.active=!0;var n=cc.scaleTo(.3,1.8),i=cc.scaleTo(.1,1.1),o=cc.scaleTo(.1,1.3),c=cc.sequence(n,i,o);this.TScoreLayout.node.runAction(c)}if(!(this.daoScoreLayouts.length<=0)){if(!this._user.isContainExtra){var r=0==this._compareIndex?1:this._compareIndex;this.daoScoreLayouts[r-1].node.active=!0,this.daoScoreLayouts[r+2].node.active=!0,this.daoTitleNodes[r-1].active=!0}var a=this._lCScore.splice(0,1);if(!(a.length<=0)||this.TScoreLayout){this.setScores(a,[this.TScoreLayout],!0),this.TtitleNode.active=!0,this.TScoreLayout.node.active=!0;var s=cc.scaleTo(.3,1.8),u=cc.scaleTo(.1,1.1),h=cc.scaleTo(.1,1.3),l=cc.sequence(s,u,h);this.TScoreLayout.node.runAction(l)}}},nextCompareScore:function(){if(!this._user)return 0;var e;if(this._user.isContainExtra){if(e=this._cardsInfo[0])return 9e15*e.type}else e=this._cardsInfo[this._compareIndex];return e?e.value:0},setMaPai:function(e,t){if(cc.maPai==t){var n=new cc.Node;n.addComponent(cc.Sprite),cc.loader.loadRes("play/desk/img_red5_1",cc.SpriteFrame,function(t,i){if(t)return void cc.error(t.message||t);var o=n.getComponent(cc.Sprite);o.sizeMode=0,o.spriteFrame=i,o.node.width=e.width+10,o.node.height=e.height+10}.bind(this)),e.addChild(n)}},setCards:function(e){var t=this._allCardSprites();this.cardSpriteAtlas=this.node.parent.parent.getComponent("play").cardSpriteAtlas,e.forEach(function(e,n){if(!(n>=t.length)){t[n].node.removeAllChildren(),t[n].node.getComponent(cc.Sprite).spriteFrame="";var i=new cc.Node;i.cardName=e.cardName(),i.width=t[n].node.width,i.height=t[n].node.height,i.addComponent(cc.Sprite);var c=i.getComponent("cc.Sprite");c.sizeMode=0;var r="public-pic-card-poker-"+e.cardName();o._loadCardFrame(this.cardSpriteAtlas,r,c),this.setMaPai(c.node,e.cardName()),t[n].node.addChild(i)}}.bind(this));var n=e.slice(0,3),i=e.slice(3,8),c=e.slice(8,13),r=[n,i,c],a=o.cardsType(n)+1;a=a>=10?a:"0"+a,a="04"==a?"11":a;var s=o.cardsType(i)+1;s=s>=10?s:"0"+s,s="07"==s?"22":s;var u=o.cardsType(c)+1;u=u>=10?u:"0"+u,t=t.map(function(e){return e.node}),a&&o._setGuiCard(0,0,3,a,r,t,this.cardSpriteAtlas),s&&o._setGuiCard(1,3,8,s,r,t,this.cardSpriteAtlas),u&&o._setGuiCard(2,8,13,u,r,t,this.cardSpriteAtlas)},setScores:function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1],n=!(arguments.length<=2||void 0===arguments[2])&&arguments[2];!t&&(t=this.daoScoreLayouts,t.length<=0)||e.forEach(function(e,i){var o=t[i];o.node.removeAllChildren();var c="play/CardTypeCombine/"+(Number(e)>=0?"addNum":"delNum");this._creatorNodes(o.node,10,c,"",n);for(var r=e>0?e+"":e*-1+"",a=r.split(""),s=0;s<a.length;s++){var u=a[s];this._creatorNodes(o.node,Number(u),c,"",n)}o.type=1}.bind(this))},_creatorNodes:function(e,t,n,i){var o=!(arguments.length<=4||void 0===arguments[4])&&arguments[4],c=new cc.Node;c.addComponent(cc.Sprite);var r=c.getComponent(cc.Sprite);r.sizeMode=0,r.node.width=18,r.node.height=23,this._loadCardFrame(t,function(e){r.spriteFrame=e,o&&(r.node.width=30,r.node.height=40)}.bind(this),n,i),e.addChild(c)},_setCardSpriteFrame:function(e,t){var n=this._cardsInfo,i=n.map(function(e){return o.cardsFromArray(e.cards)})[e]||[];this.cardSpriteAtlas=this.node.parent.parent.getComponent("play").cardSpriteAtlas,i.forEach(function(e,n){t.children[n].removeAllChildren(),t.children[n].getComponent(cc.Sprite).spriteFrame="";var i=new cc.Node;i.cardName=e.cardName(),i.width=t.children[n].width,"playSelf"==t.parent.parent.name?(t.children[n].height=130,i.height=130):(t.children[n].height=115,i.height=115),i.addComponent(cc.Sprite);var c=i.getComponent("cc.Sprite");c.sizeMode=0;var r="public-pic-card-poker-"+e.cardName();c.node.removeAllChildren(),o._loadCardFrame(this.cardSpriteAtlas,r,c),this.setMaPai(c.node,e.cardName()),t.children[n].addChild(i)}.bind(this));var c=o.cardsType(i)+1;c=c>=10?c+"":"0"+c,0==e?c="04"==c?"11":c:1==e&&(c="07"==c?"22":c);var r=t.children.map(function(e){return e});o._setGuiCards(c,i,r,this.cardSpriteAtlas)},showTouCards:function(){if(1!=this._user.isContainExtra){this.touLayoutBack.node.active=!1,this._setCardSpriteFrame(0,this.touLayoutBack.node),this.scheduleOnce(function(){this.touLayout.node.active=!1,this.touLayoutBack.node.active=!0}.bind(this),.7),this.touLayout.node.active=!0,this.touLayout.node.scaleY=.7,this.scheduleOnce(function(){this.touLayout.node.scaleY=1}.bind(this),.02);var e=3==this._cardsInfo[this._compareIndex].type?333:this._cardsInfo[this._compareIndex].type;i.instance.playCardType(this._user.sex,e),this._compareIndex+=1}},showZhongCards:function(){if(1!=this._user.isContainExtra){this.zhongLayoutBack.node.active=!1,this._setCardSpriteFrame(1,this.zhongLayoutBack.node),this.scheduleOnce(function(){this.zhongLayout.node.active=!1,this.zhongLayoutBack.node.active=!0}.bind(this),.7),this.zhongLayout.node.active=!0,this.zhongLayout.node.scaleY=.7,this.scheduleOnce(function(){this.zhongLayout.node.scaleY=1}.bind(this),.02);var e=6==this._cardsInfo[this._compareIndex].type?555:this._cardsInfo[this._compareIndex].type;i.instance.playCardType(this._user.sex,e),this._compareIndex+=1}},showWeiCards:function(){1!=this._user.isContainExtra&&(this.weiLayoutBack.node.active=!1,this._setCardSpriteFrame(2,this.weiLayoutBack.node),this.scheduleOnce(function(){this.weiLayout.node.active=!1,this.weiLayoutBack.node.active=!0}.bind(this),.7),this.weiLayout.node.active=!0,this.weiLayout.node.scaleY=.7,this.scheduleOnce(function(){this.weiLayout.node.scaleY=1}.bind(this),.02),i.instance.playCardType(this._user.sex,this._cardsInfo[this._compareIndex].type),this._compareIndex+=1)},showTeShuCards:function(e){this._daoLayoutBacks=[this.touLayoutBack,this.zhongLayoutBack,this.weiLayoutBack];var t=this._cardSpritesWithLayout(this._daoLayoutBacks[0]),n=this._cardSpritesWithLayout(this._daoLayoutBacks[1]),c=this._cardSpritesWithLayout(this._daoLayoutBacks[2]),r=t.concat(n).concat(c);this.cardSpriteAtlas=this.node.parent.parent.getComponent("play").cardSpriteAtlas,this.scheduleOnce(function(){e.forEach(function(e,t){if(!(t>=r.length)){var n=r[t],i="public-pic-card-poker-"+e.cardName();n.node.removeAllChildren(),o._loadCardFrame(this.cardSpriteAtlas,i,n),this.setMaPai(n.node,e.cardName())}}.bind(this)),this._daoLayoutBacks.forEach(function(e){e.node.active=!0}.bind(this)),i.instance.playCardType(this._user.sex,this._cardsInfo[0].type)}.bind(this),.1)},showNextCards:function(){var e=this.node.parent.parent.getChildByName("CardTypeCombine").getComponent("CardTypeCombine");if(e.reset(),e.node.active=!1,this.touLayoutBack.node.parent.active=!0,this._user.isContainExtra){var t=this._cardsInfo[0].cards.map(function(e){return o.cardsFromArray(e)}).reduce(function(e,t){return e.concat(t)},[]);return this.showTeShuCards(t),this.showBaoDao(0,0),void(this.baoDao.active=!0)}this._daoLayouts=[this.touLayout,this.zhongLayout,this.weiLayout],this._daoLayouts.forEach(function(e){e.node.active=!1}),0==this._compareIndex?(this.showBaoDao(0,140),this.showTouCards()):1==this._compareIndex?(this.showBaoDao(1,85),this.showZhongCards()):2==this._compareIndex&&(this.showBaoDao(2,34),this.showWeiCards()),this.baoDao.active=!0,this.scheduleOnce(function(){this.baoDao.active=!1}.bind(this),.7)},showAllCards:function(){if(this._user){if(this._user.isContainExtra){var e=this._cardsInfo[0].cards.map(function(e){return o.cardsFromArray(e)}).reduce(function(e,t){return e.concat(t)},[]);this.showTeShuCards(e)}this._daoLayoutBacks&&(this.touLayoutBack.node.parent.active=!0,this._daoLayoutBacks.forEach(function(e,t){e.node.active=!0,e.node.children.forEach(function(e){e.active=!0}),this._setCardSpriteFrame(t,e.node),this.TScoreLayout&&(this.daoTitleNodes[t].active=!0)}.bind(this)),this.TScoreLayout&&(this.daoScoreLayouts.forEach(function(e){e.node.active=!0}.bind(this)),this.setScores([this._user.cScore],[this.TScoreLayout],!0),this.TtitleNode.active=!0,this.TScoreLayout.node.active=!0))}},showBaoDao:function(e,t){var n=this._cardsInfo,i=n.map(function(e){return e.type}),o=i[e]+1;o=o>=10?o:"0"+o,0==e&&(o="04"==o?"11":o),1==e&&(o="07"==o?"22":o),10==i[e]&&(o="15"),11==i[e]&&(o="14"),12==i[e]&&(o="16"),18==i[e]&&(o="25"),19==i[e]&&(o="26");var c=this._user.isContainExtra?"game-right_specia":"game-poker_type";this._loadCardFrame(o,function(e){var t=this.baoDao.getComponent(cc.Sprite);t.spriteFrame=e}.bind(this),"play/CardTypeCombine/game_txt",c),this.baoDao.y=t},_loadCardFrame:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?"play/CardTypeCombine/pockList":arguments[2],i=arguments.length<=3||void 0===arguments[3]?"public-pic-card-poker-":arguments[3];cc.loader.loadRes(n,cc.SpriteAtlas,function(n,o){if(n)return void cc.error(n);e+="",e=this._cardFullName(e,i);var c=o.getSpriteFrame(e);t(c)}.bind(this))},_cardFullName:function(e,t){if(!t)return e;var n=e;return n.startsWith(t)||(n=t+n),n},_clearCards:function(){this._clearLayoutCards(this.touLayout),this._clearLayoutCards(this.zhongLayout),this._clearLayoutCards(this.weiLayout)},_clearLayoutCards:function(e){this._cardSpritesWithLayout(e).forEach(function(e){e.spriteFrame=null})},_cardSpritesWithLayout:function(e){var t=e.node;return t.children.map(function(e){return e.getComponent("cc.Sprite")})},_allCardSprites:function(){var e=this._cardSpritesWithLayout(this.touLayout),t=this._cardSpritesWithLayout(this.zhongLayout),n=this._cardSpritesWithLayout(this.weiLayout),i=e.concat(t).concat(n);return i}}),cc._RFpop()},{AudioManager:"AudioManager",KQCard:"KQCard",KQCardResHelper:"KQCardResHelper"}],Countdown:[function(e,t,n){"use strict";cc._RFpush(t,"6406dyBk8tKVrlJ1+mg7cLt","Countdown"),cc.Class({"extends":cc.Component,properties:{labelTime:cc.Label,_callback:null},onLoad:function(){this.labelTime.string="0"},startCountdown:function(e,t){this.stop(),this._callback=t,this.node.active=!0,this.labelTime.string=""+e,this.schedule(this._countDown,1,e),this.getComponent("time").setTime(.5*e)},stop:function(){if(this.unschedule(this._countDown),this.node.active=!1,this._callback){var e=Number(this.labelTime.string)<=0,t=this._callback;this._callback=null,t(e)}this._callback=null},_countDown:function(){var e=Number(this.labelTime.string||"0");e-=1,e<=0&&this.stop(),this.labelTime.string=String(e)}}),cc._RFpop()},{}],GameResult:[function(e,t,n){"use strict";cc._RFpush(t,"6a3cdd+2shGlZ+jeI3trSsB","GameResult");var i=e("KQCard"),o=e("AudioManager"),c={WIN:2,DRAW:1,LOSE:0},r=cc.Class({"extends":cc.Component,properties:{winNode:cc.Node,loseNode:cc.Node,drawNode:cc.Node,contentNode:cc.Node,resultItems:[cc.Node],_deskInfo:null,_userId:null,_closeCallback:null},onLoad:function(){this._hideResultItems()},showResults:function(e,t){this._deskInfo=e,this._userId=t;var n=this._resultStatus();this.contentNode.active=!0,this.winNode.active=n==c.WIN,this.drawNode.active=n==c.DRAW,this.loseNode.active=n==c.LOSE,this.winNode.active?o.instance.playWin():this.loseNode.active&&o.instance.playLose(),this.node.getComponent("alert").alert(),this.node.getComponent("alert").setDismissCallback(function(){this._closeCallback}.bind(this));var i=e.players.sort(function(e,t){return t.cScore-e.cScore}),r=this.resultItems.map(function(e){return e.getComponent("ResultItem")});r.forEach(function(t,n){if(t.node.active=n<i.length,t.node.active){var o=i[n];t.updateWithPlayerInfo(o,e.isRandomDesk);var c=this._cardsFromUser(o);t.setCards(c)}}.bind(this))},setCloseCallback:function(e){this._closeCallback=e},_cardsFromUser:function(e){var t=e.cardInfo.map(function(e){return i.cardsFromArray(e.cards)}).reduce(function(e,t){return e.concat(t)},[]);return t},_hideResultItems:function(){this.resultItems.forEach(function(e){e.acitve=!1})},_resultStatus:function(){var e=this._deskInfo.players,t=e.find(function(e){return e.id==this._userId}.bind(this)),n=t.cScore;return this._deskInfo.isRandomDesk&&(n=t.diamond),n>0?c.WIN:n<0?c.LOSE:c.DRAW}});t.exports=r,cc._RFpop()},{AudioManager:"AudioManager",KQCard:"KQCard"}],GetCardPointsSameCount:[function(e,t,n){"use strict";cc._RFpush(t,"64665arSbVGtqTVZeISv/TD","GetCardPointsSameCount");var i=function(e){this.cardNumbers={};for(var t in e){var n;n="undefined"==typeof e[t].number?e[t].point:e[t].number,this.cardNumbers[n]?this.cardNumbers[n]++:this.cardNumbers[n]=1}return this.cardNumbers};t.exports=i,cc._RFpop()},{}],1:[function(e,t,n){"use strict";function i(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function o(e){return 3*e.length/4-i(e)}function c(e){var t,n,o,c,r,a,s=e.length;r=i(e),a=new l(3*s/4-r),o=r>0?s-4:s;var u=0;for(t=0,n=0;t<o;t+=4,n+=3)c=h[e.charCodeAt(t)]<<18|h[e.charCodeAt(t+1)]<<12|h[e.charCodeAt(t+2)]<<6|h[e.charCodeAt(t+3)],a[u++]=c>>16&255,a[u++]=c>>8&255,a[u++]=255&c;return 2===r?(c=h[e.charCodeAt(t)]<<2|h[e.charCodeAt(t+1)]>>4,a[u++]=255&c):1===r&&(c=h[e.charCodeAt(t)]<<10|h[e.charCodeAt(t+1)]<<4|h[e.charCodeAt(t+2)]>>2,a[u++]=c>>8&255,a[u++]=255&c),a}function r(e){return u[e>>18&63]+u[e>>12&63]+u[e>>6&63]+u[63&e]}function a(e,t,n){for(var i,o=[],c=t;c<n;c+=3)i=(e[c]<<16)+(e[c+1]<<8)+e[c+2],o.push(r(i));return o.join("")}function s(e){for(var t,n=e.length,i=n%3,o="",c=[],r=16383,s=0,h=n-i;s<h;s+=r)c.push(a(e,s,s+r>h?h:s+r));return 1===i?(t=e[n-1],o+=u[t>>2],o+=u[t<<4&63],o+="=="):2===i&&(t=(e[n-2]<<8)+e[n-1],o+=u[t>>10],o+=u[t>>4&63],o+=u[t<<2&63],o+="="),c.push(o),c.join("")}n.byteLength=o,n.toByteArray=c,n.fromByteArray=s;for(var u=[],h=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,p=d.length;f<p;++f)u[f]=d[f],h[d.charCodeAt(f)]=f;h["-".charCodeAt(0)]=62,h["_".charCodeAt(0)]=63},{}],2:[function(e,t,n){(function(t){"use strict";function i(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}function o(){return r.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function c(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return r.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=r.prototype):(null===e&&(e=new r(t)),e.length=t),e}function r(e,t,n){if(!(r.TYPED_ARRAY_SUPPORT||this instanceof r))return new r(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return h(this,e)}return a(this,e,t,n)}function a(e,t,n,i){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?f(e,t,n,i):"string"==typeof t?l(e,t,n):p(e,t)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t,n,i){return s(t),t<=0?c(e,t):void 0!==n?"string"==typeof i?c(e,t).fill(n,i):c(e,t).fill(n):c(e,t)}function h(e,t){if(s(t),e=c(e,t<0?0:0|v(t)),!r.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function l(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!r.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|m(t,n);e=c(e,i);var o=e.write(t,n);return o!==i&&(e=e.slice(0,o)),e}function d(e,t){var n=t.length<0?0:0|v(t.length);e=c(e,n);for(var i=0;i<n;i+=1)e[i]=255&t[i];return e}function f(e,t,n,i){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,n):new Uint8Array(t,n,i),r.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=r.prototype):e=d(e,t),e}function p(e,t){if(r.isBuffer(t)){var n=0|v(t.length);return e=c(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||X(t.length)?c(e,0):d(e,t);if("Buffer"===t.type&&$(t.data))return d(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function v(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function g(e){return+e!=e&&(e=0),r.alloc(+e)}function m(e,t){if(r.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return K(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return V(e).length;default:if(i)return K(e).length;t=(""+t).toLowerCase(),i=!0}}function C(e,t,n){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return M(this,t,n);case"utf8":case"utf-8":return E(this,t,n);case"ascii":return x(this,t,n);case"latin1":case"binary":return L(this,t,n);case"base64":return w(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function _(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function y(e,t,n,i,o){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=r.from(t,i)),r.isBuffer(t))return 0===t.length?-1:S(e,t,n,i,o);if("number"==typeof t)return t=255&t,r.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):S(e,[t],n,i,o);throw new TypeError("val must be string, number or Buffer")}function S(e,t,n,i,o){function c(e,t){return 1===r?e[t]:e.readUInt16BE(t*r)}var r=1,a=e.length,s=t.length;if(void 0!==i&&(i=String(i).toLowerCase(),"ucs2"===i||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;r=2,a/=2,s/=2,n/=2}var u;if(o){var h=-1;for(u=n;u<a;u++)if(c(e,u)===c(t,h===-1?0:u-h)){if(h===-1&&(h=u),u-h+1===s)return h*r}else h!==-1&&(u-=u-h),h=-1}else for(n+s>a&&(n=a-s),u=n;u>=0;u--){for(var l=!0,d=0;d<s;d++)if(c(e,u+d)!==c(t,d)){l=!1;break}if(l)return u}return-1}function b(e,t,n,i){n=Number(n)||0;var o=e.length-n;i?(i=Number(i),i>o&&(i=o)):i=o;var c=t.length;if(c%2!==0)throw new TypeError("Invalid hex string");i>c/2&&(i=c/2);for(var r=0;r<i;++r){var a=parseInt(t.substr(2*r,2),16);if(isNaN(a))return r;e[n+r]=a}return r}function N(e,t,n,i){return Z(K(t,e.length-n),e,n,i)}function I(e,t,n,i){return Z(W(t),e,n,i)}function k(e,t,n,i){return I(e,t,n,i)}function T(e,t,n,i){return Z(V(t),e,n,i)}function A(e,t,n,i){return Z(Y(t,e.length-n),e,n,i)}function w(e,t,n){return 0===t&&n===e.length?z.fromByteArray(e):z.fromByteArray(e.slice(t,n))}function E(e,t,n){n=Math.min(e.length,n);for(var i=[],o=t;o<n;){var c=e[o],r=null,a=c>239?4:c>223?3:c>191?2:1;if(o+a<=n){var s,u,h,l;switch(a){case 1:c<128&&(r=c);break;case 2:s=e[o+1],128===(192&s)&&(l=(31&c)<<6|63&s,l>127&&(r=l));break;case 3:s=e[o+1],u=e[o+2],128===(192&s)&&128===(192&u)&&(l=(15&c)<<12|(63&s)<<6|63&u,l>2047&&(l<55296||l>57343)&&(r=l));break;case 4:s=e[o+1],u=e[o+2],h=e[o+3],128===(192&s)&&128===(192&u)&&128===(192&h)&&(l=(15&c)<<18|(63&s)<<12|(63&u)<<6|63&h,l>65535&&l<1114112&&(r=l))}}null===r?(r=65533,a=1):r>65535&&(r-=65536,i.push(r>>>10&1023|55296),r=56320|1023&r),i.push(r),o+=a}return R(i)}function R(e){var t=e.length;if(t<=ee)return String.fromCharCode.apply(String,e);for(var n="",i=0;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=ee));return n}function x(e,t,n){var i="";n=Math.min(e.length,n);for(var o=t;o<n;++o)i+=String.fromCharCode(127&e[o]);return i}function L(e,t,n){var i="";n=Math.min(e.length,n);for(var o=t;o<n;++o)i+=String.fromCharCode(e[o]);return i}function M(e,t,n){var i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var o="",c=t;c<n;++c)o+=G(e[c]);return o}function P(e,t,n){for(var i=e.slice(t,n),o="",c=0;c<i.length;c+=2)o+=String.fromCharCode(i[c]+256*i[c+1]);return o}function D(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function F(e,t,n,i,o,c){if(!r.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<c)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function B(e,t,n,i){t<0&&(t=65535+t+1);for(var o=0,c=Math.min(e.length-n,2);o<c;++o)e[n+o]=(t&255<<8*(i?o:1-o))>>>8*(i?o:1-o)}function O(e,t,n,i){t<0&&(t=4294967295+t+1);for(var o=0,c=Math.min(e.length-n,4);o<c;++o)e[n+o]=t>>>8*(i?o:3-o)&255}function H(e,t,n,i,o,c){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function q(e,t,n,i,o){return o||H(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),J.write(e,t,n,i,23,4),n+4}function U(e,t,n,i,o){return o||H(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),J.write(e,t,n,i,52,8),n+8}function j(e){if(e=Q(e).replace(te,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function Q(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function G(e){return e<16?"0"+e.toString(16):e.toString(16)}function K(e,t){t=t||1/0;for(var n,i=e.length,o=null,c=[],r=0;r<i;++r){if(n=e.charCodeAt(r),n>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&c.push(239,191,189);continue}if(r+1===i){(t-=3)>-1&&c.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&c.push(239,191,189),o=n;continue}n=(o-55296<<10|n-56320)+65536}else o&&(t-=3)>-1&&c.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;c.push(n)}else if(n<2048){if((t-=2)<0)break;c.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;c.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;c.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return c}function W(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function Y(e,t){for(var n,i,o,c=[],r=0;r<e.length&&!((t-=2)<0);++r)n=e.charCodeAt(r),i=n>>8,o=n%256,c.push(o),c.push(i);return c}function V(e){return z.toByteArray(j(e))}function Z(e,t,n,i){for(var o=0;o<i&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function X(e){return e!==e}var z=e("base64-js"),J=e("ieee754"),$=e("isarray");n.Buffer=r,n.SlowBuffer=g,n.INSPECT_MAX_BYTES=50,r.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:i(),n.kMaxLength=o(),r.poolSize=8192,r._augment=function(e){return e.__proto__=r.prototype,e},r.from=function(e,t,n){return a(null,e,t,n)},r.TYPED_ARRAY_SUPPORT&&(r.prototype.__proto__=Uint8Array.prototype,r.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&r[Symbol.species]===r&&Object.defineProperty(r,Symbol.species,{value:null,configurable:!0})),r.alloc=function(e,t,n){return u(null,e,t,n)},r.allocUnsafe=function(e){return h(null,e)},r.allocUnsafeSlow=function(e){return h(null,e)},r.isBuffer=function(e){return!(null==e||!e._isBuffer)},r.compare=function(e,t){if(!r.isBuffer(e)||!r.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,i=t.length,o=0,c=Math.min(n,i);o<c;++o)if(e[o]!==t[o]){n=e[o],i=t[o];break}return n<i?-1:i<n?1:0},r.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(e,t){if(!$(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return r.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var i=r.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var c=e[n];if(!r.isBuffer(c))throw new TypeError('"list" argument must be an Array of Buffers');c.copy(i,o),o+=c.length}return i},r.byteLength=m,r.prototype._isBuffer=!0,r.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)_(this,t,t+1);return this},r.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)_(this,t,t+3),_(this,t+1,t+2);return this},r.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)_(this,t,t+7),_(this,t+1,t+6),_(this,t+2,t+5),_(this,t+3,t+4);return this},r.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?E(this,0,e):C.apply(this,arguments)},r.prototype.equals=function(e){if(!r.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===r.compare(this,e)},r.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},r.prototype.compare=function(e,t,n,i,o){if(!r.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),t<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&t>=n)return 0;if(i>=o)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,o>>>=0,this===e)return 0;for(var c=o-i,a=n-t,s=Math.min(c,a),u=this.slice(i,o),h=e.slice(t,n),l=0;l<s;++l)if(u[l]!==h[l]){c=u[l],a=h[l];break}return c<a?-1:a<c?1:0},r.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1},r.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},r.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},r.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t=0|t,isFinite(n)?(n=0|n,void 0===i&&(i="utf8")):(i=n,n=void 0)}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var c=!1;;)switch(i){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return N(this,e,t,n);case"ascii":return I(this,e,t,n);case"latin1":case"binary":return k(this,e,t,n);case"base64":return T(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,t,n);default:if(c)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),c=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ee=4096;r.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);var i;if(r.TYPED_ARRAY_SUPPORT)i=this.subarray(e,t),i.__proto__=r.prototype;else{var o=t-e;i=new r(o,(void 0));for(var c=0;c<o;++c)i[c]=this[c+e]}return i},r.prototype.readUIntLE=function(e,t,n){e=0|e,t=0|t,n||D(e,t,this.length);for(var i=this[e],o=1,c=0;++c<t&&(o*=256);)i+=this[e+c]*o;return i},r.prototype.readUIntBE=function(e,t,n){e=0|e,t=0|t,n||D(e,t,this.length);for(var i=this[e+--t],o=1;t>0&&(o*=256);)i+=this[e+--t]*o;return i},r.prototype.readUInt8=function(e,t){return t||D(e,1,this.length),this[e]},r.prototype.readUInt16LE=function(e,t){return t||D(e,2,this.length),this[e]|this[e+1]<<8},r.prototype.readUInt16BE=function(e,t){return t||D(e,2,this.length),this[e]<<8|this[e+1]},r.prototype.readUInt32LE=function(e,t){return t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},r.prototype.readUInt32BE=function(e,t){return t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},r.prototype.readIntLE=function(e,t,n){e=0|e,t=0|t,n||D(e,t,this.length);for(var i=this[e],o=1,c=0;++c<t&&(o*=256);)i+=this[e+c]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i},r.prototype.readIntBE=function(e,t,n){
e=0|e,t=0|t,n||D(e,t,this.length);for(var i=t,o=1,c=this[e+--i];i>0&&(o*=256);)c+=this[e+--i]*o;return o*=128,c>=o&&(c-=Math.pow(2,8*t)),c},r.prototype.readInt8=function(e,t){return t||D(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},r.prototype.readInt16LE=function(e,t){t||D(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},r.prototype.readInt16BE=function(e,t){t||D(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},r.prototype.readInt32LE=function(e,t){return t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},r.prototype.readInt32BE=function(e,t){return t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},r.prototype.readFloatLE=function(e,t){return t||D(e,4,this.length),J.read(this,e,!0,23,4)},r.prototype.readFloatBE=function(e,t){return t||D(e,4,this.length),J.read(this,e,!1,23,4)},r.prototype.readDoubleLE=function(e,t){return t||D(e,8,this.length),J.read(this,e,!0,52,8)},r.prototype.readDoubleBE=function(e,t){return t||D(e,8,this.length),J.read(this,e,!1,52,8)},r.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t=0|t,n=0|n,!i){var o=Math.pow(2,8*n)-1;F(this,e,t,n,o,0)}var c=1,r=0;for(this[t]=255&e;++r<n&&(c*=256);)this[t+r]=e/c&255;return t+n},r.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t=0|t,n=0|n,!i){var o=Math.pow(2,8*n)-1;F(this,e,t,n,o,0)}var c=n-1,r=1;for(this[t+c]=255&e;--c>=0&&(r*=256);)this[t+c]=e/r&255;return t+n},r.prototype.writeUInt8=function(e,t,n){return e=+e,t=0|t,n||F(this,e,t,1,255,0),r.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},r.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=0|t,n||F(this,e,t,2,65535,0),r.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):B(this,e,t,!0),t+2},r.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=0|t,n||F(this,e,t,2,65535,0),r.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):B(this,e,t,!1),t+2},r.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=0|t,n||F(this,e,t,4,4294967295,0),r.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):O(this,e,t,!0),t+4},r.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=0|t,n||F(this,e,t,4,4294967295,0),r.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):O(this,e,t,!1),t+4},r.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t=0|t,!i){var o=Math.pow(2,8*n-1);F(this,e,t,n,o-1,-o)}var c=0,r=1,a=0;for(this[t]=255&e;++c<n&&(r*=256);)e<0&&0===a&&0!==this[t+c-1]&&(a=1),this[t+c]=(e/r>>0)-a&255;return t+n},r.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t=0|t,!i){var o=Math.pow(2,8*n-1);F(this,e,t,n,o-1,-o)}var c=n-1,r=1,a=0;for(this[t+c]=255&e;--c>=0&&(r*=256);)e<0&&0===a&&0!==this[t+c+1]&&(a=1),this[t+c]=(e/r>>0)-a&255;return t+n},r.prototype.writeInt8=function(e,t,n){return e=+e,t=0|t,n||F(this,e,t,1,127,-128),r.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},r.prototype.writeInt16LE=function(e,t,n){return e=+e,t=0|t,n||F(this,e,t,2,32767,-32768),r.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):B(this,e,t,!0),t+2},r.prototype.writeInt16BE=function(e,t,n){return e=+e,t=0|t,n||F(this,e,t,2,32767,-32768),r.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):B(this,e,t,!1),t+2},r.prototype.writeInt32LE=function(e,t,n){return e=+e,t=0|t,n||F(this,e,t,4,2147483647,-2147483648),r.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):O(this,e,t,!0),t+4},r.prototype.writeInt32BE=function(e,t,n){return e=+e,t=0|t,n||F(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),r.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):O(this,e,t,!1),t+4},r.prototype.writeFloatLE=function(e,t,n){return q(this,e,t,!0,n)},r.prototype.writeFloatBE=function(e,t,n){return q(this,e,t,!1,n)},r.prototype.writeDoubleLE=function(e,t,n){return U(this,e,t,!0,n)},r.prototype.writeDoubleBE=function(e,t,n){return U(this,e,t,!1,n)},r.prototype.copy=function(e,t,n,i){if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var o,c=i-n;if(this===e&&n<t&&t<i)for(o=c-1;o>=0;--o)e[o+t]=this[o+n];else if(c<1e3||!r.TYPED_ARRAY_SUPPORT)for(o=0;o<c;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+c),t);return c},r.prototype.fill=function(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!r.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e=255&e);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var c;if("number"==typeof e)for(c=t;c<n;++c)this[c]=e;else{var a=r.isBuffer(e)?e:K(new r(e,i).toString()),s=a.length;for(c=0;c<n-t;++c)this[c+t]=a[c%s]}return this};var te=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":1,ieee754:3,isarray:4}],3:[function(e,t,n){n.read=function(e,t,n,i,o){var c,r,a=8*o-i-1,s=(1<<a)-1,u=s>>1,h=-7,l=n?o-1:0,d=n?-1:1,f=e[t+l];for(l+=d,c=f&(1<<-h)-1,f>>=-h,h+=a;h>0;c=256*c+e[t+l],l+=d,h-=8);for(r=c&(1<<-h)-1,c>>=-h,h+=i;h>0;r=256*r+e[t+l],l+=d,h-=8);if(0===c)c=1-u;else{if(c===s)return r?NaN:(f?-1:1)*(1/0);r+=Math.pow(2,i),c-=u}return(f?-1:1)*r*Math.pow(2,c-i)},n.write=function(e,t,n,i,o,c){var r,a,s,u=8*c-o-1,h=(1<<u)-1,l=h>>1,d=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:c-1,p=i?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,r=h):(r=Math.floor(Math.log(t)/Math.LN2),t*(s=Math.pow(2,-r))<1&&(r--,s*=2),t+=r+l>=1?d/s:d*Math.pow(2,1-l),t*s>=2&&(r++,s/=2),r+l>=h?(a=0,r=h):r+l>=1?(a=(t*s-1)*Math.pow(2,o),r+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,o),r=0));o>=8;e[n+f]=255&a,f+=p,a/=256,o-=8);for(r=r<<o|a,u+=o;u>0;e[n+f]=255&r,f+=p,r/=256,u-=8);e[n+f-p]|=128*v}},{}],4:[function(e,t,n){var i={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==i.call(e)}},{}],Invit:[function(e,t,n){"use strict";cc._RFpush(t,"37d962bf0NPxaQIYUcZDwR3","Invit");var i=e("socket");cc.Class({"extends":cc.Component,properties:{labelNumbers:[cc.Label],callbackJoinRoom:null},onLoad:function(){this.clickClear()},clickNumber:function(e,t){var n=this._lastEmptyLabel();if(n){n.string=t;var i=(null==this._lastEmptyLabel(),this._roomNumber());6==i.length&&(this.callbackJoinRoom=i)}},sendCode:function(){var e=i.instance.userInfo.id,t=this.callbackJoinRoom;console.log(t,"------------------------"),6==t.length&&(i.sendInviteCode(t,e),this.callbackJoinRoom="")},clickClear:function(){this.callbackJoinRoom="",this.labelNumbers.forEach(function(e){e.string=""})},clickDeleteOne:function(){var e=this._lastNumberLabel();e&&(e.string="")},_lastEmptyLabel:function(){for(var e in this.labelNumbers){var t=this.labelNumbers[e];if(null==t.string||t.string.length<=0)return t}return null},_lastNumberLabel:function(){for(var e=this.labelNumbers.length-1;e>=0;--e){var t=this.labelNumbers[e];if(t.string&&t.string.length>0)return t}return null},_roomNumber:function(){return this.labelNumbers.reduce(function(e,t){return e+(t.string||"")},"")}}),cc._RFpop()},{socket:"socket"}],KQCardColorsHelper:[function(e,t,n){"use strict";cc._RFpush(t,"cf1deKQQ4NMMYVV+7xEr9Jf","KQCardColorsHelper");var i=function(e){this.colorNumber={},e.forEach(function(e){var t=e.color,n=this.colorNumber[t]||0;this.colorNumber[t]=n+1}.bind(this))};i.prototype.maxNumber=function(){var e=0;for(var t in this.colorNumber){var n=this.colorNumber[t];e=Math.max(n,e)}return e},t.exports=i,cc._RFpop()},{}],KQCardFindTypeExtension:[function(e,t,n){"use strict";cc._RFpush(t,"54a95JOLVRACIP91XEFodqF","KQCardFindTypeExtension");var i=e("KQCard");e("ArrayExtension"),e("KQCardPointsHelper");t.exports={},i.findDuiZi=function(e){var t=i.findSanTiao(e)||[],n=i._findPointLength(e,2)||[];if(n.length<2){t.length>0&&t.forEach(function(e){var t=[e[0],e[1]];n.push(t)});for(var o=i.findGuiPai(e,2),c=0;c<o.length;c++)n.push(o[c])}return n=i.repeat(n),n.length>0?n:[]},i._findPointLength=function(e,t){if(e.length<t)return[];var n=e.reduce(function(e,t,n){var i=e[t.point]||[];return e[t.point]=i,i.push(n),e},{}),i=[];for(var o in n)for(var c=n[o];c.length>=t&&0!=t;){var r=c.splice(0,t);r.length>=t&&(r.sort(function(e,t){return e-t}),i.push(r))}return i.sort(function(e,t){var n=e[0],i=t[0];return i-n}),i.length>0?i:[]},i.findLiaDui=function(e){var t=i.findDuiZi(e)||[],n=i.findGuiPai(e,2)||[];if(t.length<1&&n.length>0&&n.forEach(function(e){t.unshift(e)}),t.length<2)return[];for(var o=[],c=0;c<t.length;++c)for(var r=c+1;r<t.length&&o.length<10;++r){for(var a=t[c],s=t[r],u=a.concat(s),h=[],l=0;l<u.length&&h.indexOf(u[l])==-1;l++)h.push(u[l]);4==h.length&&(h.sort(function(e,t){return e-t}),o.unshift(h))}return o=i.repeat(o),o.length>6&&(o=o.slice(0,6)),o},i.findSanTiao=function(e){if(e.length<3)return[];var t=i._findPointLength(e,3)||[];if(t.length<2){var n=i.findTieZhi(e);n.length>0&&n.forEach(function(e){var n=[e[0],e[1],e[2]];t.push(n)});for(var o=i.findGuiPai(e,3),c=0;c<o.length;c++)t.push(o[c])}return t=i.repeat(t),t.length>0?t:[]},i.findTongHuaShun=function(e){var t=arguments.length<=1||void 0===arguments[1]?5:arguments[1];if(e.length<t)return[];e=Array.from(e);for(var n=[],o=[],c=[],r=[],a=[],s=[],u=[],h=[],l=0;l<e.length;l++)"4"==e[l].color?a.indexOf(e[l].point)==-1&&(a.push(e[l].point),n.push(e[l])):"3"==e[l].color?s.indexOf(e[l].point)==-1&&(s.push(e[l].point),o.push(e[l])):"2"==e[l].color?u.indexOf(e[l].point)==-1&&(u.push(e[l].point),c.push(e[l])):"1"==e[l].color&&h.indexOf(e[l].point)==-1&&(h.push(e[l].point),r.push(e[l]));for(var d=[n,o,c,r],f=[],l=0;l<d.length;l++)d[l].length>=5&&(d[l].sort(function(e,t){return e.point-t.point}),f.push(d[l]));for(var p=[],l=0;l<f.length;l++)for(var v=f[l],g=0;g+5<=v.length;++g){var m=v.slice(g,g+5);i.isTongHuaShun(m)&&!function(){var t=[];m.forEach(function(n){for(var i=0;i<e.length;i++){var o=e[i];if(o===n){t.push(i);break}}}),t.sort(Array.sortByPoint),p.unshift(t)}()}if(p.length>0)return p;var C=i._convertOneToA1(e);return e===C?(e.forEach(function(e){14==e.point&&(e.point=1,e.scores=1)}),i.findTongHuaShun20(e)):i.findTongHuaShun(C)},i.findTongHuaShun20=function(e){var t=arguments.length<=1||void 0===arguments[1]?5:arguments[1];if(e.length<t)return!1;var n=i.contain20(e)||[];if(n.length<=0)return!1;var o=e.kq_excludes(n);o=Array.from(o);for(var c=[],r=[],a=[],s=[],u=[],h=[],l=[],d=[],f=0;f<o.length;f++)"4"==o[f].color?u.indexOf(o[f].point)==-1&&(u.push(o[f].point),c.push(o[f])):"3"==o[f].color?h.indexOf(o[f].point)==-1&&(h.push(o[f].point),r.push(o[f])):"2"==o[f].color?l.indexOf(o[f].point)==-1&&(l.push(o[f].point),a.push(o[f])):"1"==o[f].color&&d.indexOf(o[f].point)==-1&&(d.push(o[f].point),s.push(o[f]));for(var p=[c,r,a,s],v=[],f=0;f<p.length;f++)p[f].length>=parseInt(5-n.length)&&(p[f].sort(function(e,t){return e.point-t.point}),v.push(p[f]));for(var g=[],f=0;f<v.length;f++)for(var m=v[f],C=1;C<=n.length;++C)for(var _=5-C,y=0;y+_<=m.length;++y){var S=m.slice(y,y+_),b=parseInt(S[_-1].scores)-parseInt(S[0].scores)<5;if(b){var N;!function(){var t=[];N=n.slice(0,C),S=S.concat(N),S.forEach(function(n){for(var i=0;i<e.length;i++){var o=e[i];if(o===n){t.push(i);break}}}),t.sort(Array.sortByNumber),g.unshift(t)}()}}if(g.length>0)return g;var I=i._convertOneToA1(e);return e===I?[]:i.findTongHuaShun20(I)},i.findTieZhi=function(e){var t=i._findPointLength(e,4);if(t.length>0)return t;t=[];var n=i.findWuTong(e);return n&&n.forEach(function(e){var n=[e[0],e[1],e[2],e[3]],i=[e[0],e[1],e[2],e[4]],o=[e[0],e[1],e[3],e[4]],c=[e[0],e[2],e[3],e[4]],r=[e[1],e[2],e[3],e[4]];t.push(n),t.push(i),t.push(o),t.push(c),t.push(r)}),t.length>10&&(t=t.slice(0,10)),t=i.repeat(t),t.length>0?t:i.findGuiPai(e,4)},i.findWuTong=function(e){if(e.length<5)return[];var t=this._findPointLength(e,5)||[];return t.length>0?t:i.findGuiPai(e,5)},i.findShunZi=function(e){var t=arguments.length<=1||void 0===arguments[1]?5:arguments[1];if(e.length<t)return[];"undefined"==typeof e[0].point&&(e=i.cardsFromArray(e));var n=e.unique(function(e,t){return e.point==t.point});n.sort(i.sortByPoint);var o=e.find(function(e){return 1==e.point});if(o){var c=new i(o);c.point=14,n.push(c)}for(var r=[],a=0;a+t<=n.length;++a){var s=n.slice(a,a+t);i.isShunZi(s,t)&&!function(){var t=[];s.forEach(function(n){var i=e.findIndex(function(e){return 14==n.point?1==e.point:n===e});t.push(i)}),t.sort(Array.sortByNumber),r.unshift(t)}()}var u=i._findRepeatPointIndexsArray(r,e);return u.forEach(function(e){r.unshift(e)}),r.sort(function(e,t){return e[0]-t[0]}),r.length>0?r:i.findShunZi20(e)},i.findShunZi20=function(e){var t=arguments.length<=1||void 0===arguments[1]?5:arguments[1];if(e.length<t)return[];var n=i.contain20(e);if(n.length<=0)return[];for(var o=e.kq_excludes(n),c=[],r=[],a=0;a<o.length;a++)r.indexOf(o[a].point)==-1&&(c.push(o[a]),r.push(o[a].point));c.sort(function(e,t){return e.point-t.point});for(var s=[],u=1;u<=n.length;++u)for(var h=t-u,l=0;l+h<=c.length;++l){var d=c.slice(l,l+h),f=parseInt(d[h-1].point)-parseInt(d[0].point)<t;if(f){var p;!function(){var t=[];p=n.slice(0,u),d=d.concat(p),d.forEach(function(n){for(var i=0;i<e.length;i++){var o=e[i];if(o===n){t.push(i);break}}}),t.sort(Array.sortByNumber),s.unshift(t)}()}}if(s.length>0)return s;var v=i._convertOneToA1(e);return e!==v&&i.findShunZi20(v)},i._findRepeatPointIndexsArray=function(e,t){var n=[];return e.forEach(function(e){var i=e.map(function(e){return t[e]});i.forEach(function(i,o){var c=t.findIndex(function(e){if("undefined"!=typeof i)return e!==i&&e.point==i.point});if(!(c<0)){var r=e.slice();r[o]=c,n.push(r)}})}),n},i.findTongHua=function(e){var t=arguments.length<=1||void 0===arguments[1]?5:arguments[1];if(e.length<t)return[];var n=Array.from(e);n.sort(i.sortByColor);for(var o=[],c=0;c+t<=n.length;++c){var r=n.slice(c,c+t);i.isTongHua(r,t)&&!function(){var t=[];r.forEach(function(n){var i=e.findIndex(function(e){return n===e});t.push(i)}),t.sort(Array.sortByNumber),o.unshift(t)}()}return o.length>0?o:i.findTongHua20(e)},i.findTongHua20=function(e){if(e.length<5)return[];var t=i.contain20(e);if(t.length<=0)return[];var n=e.kq_excludes(t);n.sort(i.sortByColor);for(var o=[],c=1;c<=t.length;++c)for(var r=5-c,a=0;a+r<=n.length;++a){var s=n.slice(a,a+r);if(i.isTongHua(s,r)){var u;!function(){var n=[];u=t.slice(0,c),s=s.concat(u),s.forEach(function(t){for(var i=0;i<e.length;i++){var o=e[i];if(o===t){n.push(i);break}}}),n.sort(Array.sortByNumber),o.unshift(n)}()}}return o.length>0?o:[]},i.findHuLu=function(e){var t=5;if(e.length<t)return[];var n=i.findSanTiao(e),o=i.findTieZhi(e),c=i.findDuiZi(e)||[];if(c.length<=0&&(n&&n.forEach(function(e){var t=[e[0],e[1]],n=[e[1],e[2]];c.push(t),c.push(n)}),o&&o.forEach(function(e){var t=[e[0],e[1]],n=[e[2],e[3]];c.push(t),c.push(n)})),null==c||null==n)return[];var r=[];return c.forEach(function(e){var t=e;n.forEach(function(n){t=e.concat(n);for(var i=0;i<t.length-1;i++){for(var o=t[i],c=i+1;c<t.length;c++)if(o==t[c]){t=null;break}if(null==t)break}null!==t&&r.unshift(t)})}),r.length>10&&(r=r.slice(0,10)),r.length>0?r:i.findHuLu20(e)},i.findHuLu20=function(e){var t=5;if(e.length<t)return[];var n=i.contain20(e)||[];if(n.length<=0)return[];var o=i.findGuiPai(e,3),c=i.findGuiPai(e,4),r=i.findGuiPai(e,2);if(null==r&&(r=[]),o&&o.forEach(function(e){var t=[e[0],e[1]],n=[e[1],e[2]];r.unshift(t),r.unshift(n)}),c&&c.forEach(function(e){var t=[e[0],e[1]],n=[e[2],e[3]];r.unshift(t),r.unshift(n)}),null==r||null==o)return[];var a=[];return r.forEach(function(e){var t=e;o.forEach(function(n){t=e.concat(n);for(var i=0;i<t.length-1;i++){for(var o=t[i],c=i+1;c<t.length;c++)if(o==t[c]){t=null;break}if(null==t)break}null!==t&&a.unshift(t)})}),a.length>10&&(a=a.slice(0,10)),a.length>0?a:[]},i.findGuiPai=function(e){var t=arguments.length<=1||void 0===arguments[1]?1:arguments[1],n=i.contain20(e).map(function(t){for(var n=0;n<e.length;n++){var i=e[n];if(i===t)return n}});if(n.length<=0)return[];for(var o=[],c=1;c<=n.length;++c)for(var r=t-c,a=i._findPointLength(e,r)||[],s=0;s<a.length;s++)if(2==t)for(var u=0;u<n.length;++u){var h=a[s].concat(n[u]);h.length==t&&o.push(h)}else{var h=a[s].concat(n.slice(0,c));h.length==t&&o.push(h)}return o.length>10&&(o=o.slice(0,10)),o=i.repeat(o),o.length>0?o:[]},i.repeat=function(e){for(var t=0;t<e.length;t++){for(var n=e[t],i=[],o=0;o<n.length;o++){if(i.indexOf(n[o])!=-1){e.splice(t,1);break}i.push(n[o])}for(var c=t+1;c<e.length-1;c++){for(var r=e[c],a="",s="",u=0;u<r.length;u++)a+=r[u],s+=n[u];if(a==s){e.splice(t,1);break}}}return e},i.testFind=function(e){var t=i.findWuTong(e)||[],n=i.findTongHuaShun(e)||[],o=i.findTieZhi(e)||[],c=i.findHuLu(e)||[],r=i.findTongHua(e)||[],a=i.findShunZi(e)||[],s=i.findSanTiao(e)||[],u=i.findLiaDui(e)||[],h=i.findDuiZi(e)||[],l=[t,n,o,c,r,a,s,u,h];return l},cc._RFpop()},{ArrayExtension:"ArrayExtension",KQCard:"KQCard",KQCardPointsHelper:"KQCardPointsHelper"}],KQCardPointsHelper:[function(e,t,n){"use strict";cc._RFpush(t,"42d3e866XhHdbkspy3Qytap","KQCardPointsHelper");var i=function(e){this.pointNumbers={},e.forEach(function(e){var t=e.point,n=this.pointNumbers[t]||0;this.pointNumbers[t]=n+1}.bind(this))};i.prototype.maxNumber=function(){var e=0;for(var t in this.pointNumbers){var n=this.pointNumbers[t];e=Math.max(n,e)}return e},t.exports=i,cc._RFpop()},{}],KQCardResHelper:[function(e,t,n){"use strict";cc._RFpush(t,"be420vtWaJOHoxQcZwP2xN2","KQCardResHelper");var i={loadCardSpriteFrame:function(e,t){this._loadCardFrame(e,t)},setCardSpriteFrame:function(e,t){this.loadCardSpriteFrame(t,function(t){e.spriteFrame=t})},_cardFullName:function(e){var t=e;return t.startsWith("public-pic-card-poker")||(t="public-pic-card-poker-"+t),t},_loadCardFrame:function(e,t){cc.assert(t),cc.loader.loadRes("play/CardTypeCombine/pockList",cc.SpriteAtlas,function(n,i){if(n)return void t(null,n);e=this._cardFullName(e);var o=i.getSpriteFrame(e);t(o)}.bind(this))}};t.exports=i,cc._RFpop()},{}],KQCardScoreExtension:[function(e,t,n){"use strict";cc._RFpush(t,"3f5d8wDA+tMPbPd/k4hBAAR","KQCardScoreExtension");var i=e("KQCard"),o=(e("KQCardFindTypeExtension"),e("KQCardColorsHelper"),e("KQCardScoretsHelper")),c=(e("GetCardPointsSameCount"),e("KQCardPointsHelper"));i.scoreOfCards=function(e){null!=e&&null!=e.length||(e=[]);var t=3==e.length,n=i._typeScoreOfCards(e),c=i._convertOneToA(e.slice());c.forEach(function(e){1==e.scores&&(e.scores=14)});var r=i.contain20(c),a=new o(c.kq_excludes(r)),s=a.maxNumber(),u=0;for(var h in a.pointNumbers)parseInt(h)>u&&a.pointNumbers[h]==s&&(u=parseInt(h));if(c.forEach(function(e){e.scores>=20&&(e.scores=u)}),r.forEach(function(e){e.scores=u}),c.sort(i.sort),9e15==n){c.sort(function(e,t){return t.scores-e.scores});var l="";for(var h in c){var d=c[h].scores;l=(parseInt(d)>=10?d:"0"+d)+l}return n+parseInt(l)}if(8e15==n){r.length>0&&(c=i._changeCardScors(c));var l="",f="";for(var h in c){var d=c[h].scores;l=(parseInt(d)>=10?d:"0"+d)+l;var p=c[h].color;f=p+f}return 0==cc.huaSe?n+parseInt(l):n+parseInt(l+f)}if(7e15==n){var v="",g="",f="",m="";for(var C in c)if(u==c[C].scores){var d=c[C].scores;v=(parseInt(d)>=10?d:"0"+d)+v;var p=c[C].color;f=p+f}else{var d=c[C].scores;g=(parseInt(d)>=10?d:"0"+d)+g;var p=c[C].color;m=p+m}if(0==cc.huaSe)return n+parseInt(v+g);var _="";return _=m.substr(0,m.length-1),m=m.substr(m.length-1),v=v+g+m+f+_,n+parseInt(v)}if(6e15==n){var v="",g="",f="",m="";for(var C in c)if(u==c[C].scores){var d=c[C].scores;v=(parseInt(d)>=10?d:"0"+d)+v;var p=c[C].color;f=p+f}else{var d=c[C].scores;g=(parseInt(d)>=10?d:"0"+d)+g;var p=c[C].color;m=p+m}return t&&(g+="0000",m+="00"),0==cc.huaSe?n+parseInt(v+g):(v=v+g+f+m,n+parseInt(v))}if(5e15==n){var y="",S="";for(var h in c){var b=parseInt(c[h].point),N=parseInt(c[h].point)<20?c[h].color:5;S=N+S,y=(b>=10?b:"0"+b)+y}return 0==cc.huaSe?n+parseInt(y):n+parseInt(y+S)}if(4e15==n){r.length>0&&(c=i._changeCardScors(c));var l="",f="";for(var h in c){var d=c[h].scores;l=(parseInt(d)>=10?d:"0"+d)+l;var p=c[h].color;f=p+f}return 0==cc.huaSe?n+parseInt(l):n+parseInt(l+f)}if(3e15==n){var v="",g="",f="",m="",I="";for(var C in c)if(u==c[C].scores){var d=c[C].scores;v=(parseInt(d)>=10?d:"0"+d)+v;var p=c[C].color;f=p+f}else{var d=c[C].scores;g=(parseInt(d)>=10?d:"0"+d)+g;var p=c[C].color;parseInt(d)<20?m=p+m:I=p+I}return t&&(g+="0000",f+="00"),0==cc.huaSe?n+parseInt(v+g):(v=v+g+m+f+I,n+parseInt(v))}if(2e15==n){var v="",g="",f="",m="";for(var h in a.pointNumbers)if(2==a.pointNumbers[h]){for(var C in c)if(h==c[C].scores){var d=c[C].scores;v=(parseInt(d)>=10?d:"0"+d)+v;var p=c[C].color;f=p+f}}else for(var k in c)if(h==c[k].scores){var d=c[k].scores;g=(parseInt(d)>=10?d:"0"+d)+g;var p=c[k].color;m+=p}return 0==cc.huaSe?n+parseInt(v+g):(v=v+g+m+f,n+parseInt(v))}if(1e15==n){var v="",g="",m="",f="";if(r.length>0)return c.sort(function(e,t){return t.point-e.point}),c=c.kq_excludes(r),c.forEach(function(e,t){var n=e.scores,i=e.color;if(v+=parseInt(n)>=10?n:"0"+n,0==t){var o=r[0].scores;v+=parseInt(o)>=10?o:"0"+o,f+=i,f+=r[0].color}else m+=i}),t&&(v+="0000",f+="00"),0==cc.huaSe?n+parseInt(v):(v=v+m+f,n+parseInt(v));for(var h in a.pointNumbers)if(a.pointNumbers[h]==s){for(var C in c)if(h==c[C].scores){var d=c[C].scores;f=c[C].color+f,v=(parseInt(d)>=10?d:"0"+d)+v}}else for(var k in c)if(h==c[k].scores){var d=c[k].scores;m=c[k].color+m,g=(parseInt(d)>=10?d:"0"+d)+g}return t&&(g+="0000",f+="00"),0==cc.huaSe?n+parseInt(v+g):(v=v+g+m+f,n+parseInt(v))}if(0==n){var T="",f="";for(var k in c){var d=c[k].scores,p=c[k].color;T=(parseInt(d)>=10?d:"0"+d)+T,f=p+f}return t&&(T+="0000",f+="00"),0==cc.huaSe?n+parseInt(T):(T+=f,n+parseInt(T))}var A=0;c.forEach(function(e){A+=e.point});var w=n+A;return w},i._changeCardScors=function(e){e.forEach(function(e){e.scores=e.point,1==e.scores&&(e.scores=14)});var t=!0,n=!0;if(e.forEach(function(e){e.scores<10&&(t=!1)}),e.forEach(function(e){e.scores=e.point,14==e.scores&&(e.scores=1)}),e.forEach(function(e){e.scores>5&&20!=e.scores&&(n=!1)}),t){e.forEach(function(e){1==e.scores&&(e.scores=14)}),e.sort(function(e,t){return t.scores-e.scores});for(var i=14,o=[],c=0;c<5;c++)o.push(i),i-=1;for(var r=0;r<o.length;r++)for(var c=0;c<e.length;c++){var a=e[c].scores;a==o[r]&&a<15&&o.splice(r,1)}e.forEach(function(e){e.point>=20&&(e.scores=o.splice(0,1)[0])}.bind(this))}else if(n){e.sort(function(e,t){return t.scores-e.scores});for(var i=5,o=[],c=0;c<5;c++)o.push(i),i-=1;for(var r=0;r<o.length;r++)for(var c=0;c<e.length;c++){var a=e[c].scores;a==o[r]&&a<15&&o.splice(r,1)}e.forEach(function(e){e.point>=20&&(e.scores=o.splice(0,1)[0])}.bind(this))}else{e.sort(function(e,t){return e.scores-t.scores});for(var o=[],c=0;c<5;c++){var s=parseInt(e[0].scores)+c;o.push(s)}for(var r=0;r<o.length;r++)for(var c=0;c<e.length;c++){var a=e[c].scores;a==o[r]&&a<15&&o.splice(r,1)}e.forEach(function(e){e.point>=20&&(e.scores=o.splice(0,1)[0])}.bind(this))}return e.forEach(function(e){1==e.scores&&(e.scores=14)}),e.sort(function(e,t){return e.scores-t.scores}),e},i._typeScoreOfCards=function(e){var t=0;return i.containWuTong(e)?t=9e15:i.containTongHuaShun(e)?t=8e15:i.containTieZhi(e)?t=7e15:i.containHuLu(e)?t=6e15:i.containTongHua(e)?t=5e15:i.containShunZi(e)?t=4e15:i.containSanTiao(e)?t=3e15:i.containLiaDui(e)?t=2e15:i.containDuiZi(e)&&(t=1e15),t},i._typeCardsSortByNumberOfPoints=function(e){e=i._changeGuiCard(e),e.forEach(function(e){1==e.scores&&(e.scores=14)});var t=new o(e),n=e.slice().sort(function(e,n){var i=t.pointNumbers[e.scores],o=t.pointNumbers[n.scores];if(o!=i)return o-i;var c=1==e.scores?14:e.scores,r=1==n.scores?14:n.scores;return r-c});return n.forEach(function(e){14==e.scores&&(e.scores=1)}),n},i._typeCardsSortByNumberOfPoints1=function(e){e=i._changeGuiCard(e),e.forEach(function(e){1==e.scores&&(e.scores=14)});var t=new o(e),n=e.slice().sort(function(e,n){var i=t.pointNumbers[e.scores],o=t.pointNumbers[n.scores];if(o!=i)return i-o;var c=1==e.scores?14:e.scores,r=1==n.scores?14:n.scores;return c-r});return n.forEach(function(e){14==e.scores&&(e.scores=1)}),n},i._changeGuiCard=function(e){var t=i.contain20(e),n=e.kq_excludes(t),o=new c(n),r=0,a=1,s=i.cardsType(e)+1;if(s=s>=10?s:"0"+s,"05"==s||"09"==s)return i._changeCardScors(e);if("06"==s){for(var u in o.pointNumbers){var h=o.pointNumbers[u];1==u&&(u=14),h>=o.maxNumber()&&r<parseInt(u)&&20!=parseInt(u)&&(r=parseInt(u))}a=n[0].color,r=14==r?1:r,t.forEach(function(e){e.scores=r,e.colorScores=a})}if("07"==s||"22"==s||"08"==s||"10"==s||"04"==s||"11"==s||"02"==s){for(var u in o.pointNumbers){var h=o.pointNumbers[u];1==u&&(u=14),h>=o.maxNumber()&&r<parseInt(u)&&20!=parseInt(u)&&(r=parseInt(u))}r=14==r?1:r,n.forEach(function(e){r==e.point&&a<e.color&&(a=e.color)}),t.forEach(function(e){e.scores=r,e.colorScores=a}.bind(this))}return t.concat(n)},i._setGuiCard=function(e,t,n,o,r,a,s){var u=i.contain20(r[e]),h=r[e].kq_excludes(u),l=new c(h),d=0,f=1,p=a.slice(t,n).filter(function(e){if(e.childrenCount>0&&e.children[0].cardName&&20==parseInt(e.children[0].cardName.split("_")[1]))return!0});if("05"!=o&&"09"!=o||(r[e]=i._changeCardScors(r[e]),d=r[e].filter(function(e){if(20==e.point)return!0}).map(function(e){return 14==e.scores?1:e.scores}),p.forEach(function(e){var t=e.getComponent(cc.Sprite),n=h[0].color+"_"+d.splice(0,1)[0],o="public-pic-card-poker-"+n;i._loadCardFrame(s,o,t)}.bind(this))),"06"==o){for(var v in l.pointNumbers){var g=l.pointNumbers[v];1==v&&(v=14),g>=l.maxNumber()&&d<parseInt(v)&&20!=parseInt(v)&&(d=parseInt(v))}f=h[0].color,d=14==d?1:d,p.forEach(function(e){var t=e.getComponent(cc.Sprite),n=f+"_"+d,o="public-pic-card-poker-"+n;i._loadCardFrame(s,o,t)}.bind(this))}if("07"==o||"22"==o||"08"==o||"10"==o||"04"==o||"11"==o||"02"==o){for(var v in l.pointNumbers){var g=l.pointNumbers[v];1==v&&(v=14),g>=l.maxNumber()&&d<parseInt(v)&&20!=parseInt(v)&&(d=parseInt(v))}d=14==d?1:d,h.forEach(function(e){d==e.point&&f<e.color&&(f=e.color)}),p.forEach(function(e){var t=e.getComponent(cc.Sprite),n=f+"_"+d,o="public-pic-card-poker-"+n;i._loadCardFrame(s,o,t)}.bind(this))}},i._setGuiCards=function(e,t,n,o){var r=i.contain20(t),a=t.kq_excludes(r),s=new c(a),u=0,h=1,l=n.slice().filter(function(e){if(e.childrenCount>0&&e.children[0].cardName&&20==parseInt(e.children[0].cardName.split("_")[1]))return!0});if("05"!=e&&"09"!=e||(t=i._changeCardScors(t),u=t.filter(function(e){if(20==e.point)return!0}).map(function(e){return 14==e.scores?1:e.scores}),l.forEach(function(e){var t=e.getComponent(cc.Sprite),n=a[0].color+"_"+u.splice(0,1)[0],c="public-pic-card-poker-"+n;i._loadCardFrame(o,c,t)}.bind(this))),"06"==e){for(var d in s.pointNumbers){var f=s.pointNumbers[d];1==d&&(d=14),f>=s.maxNumber()&&u<parseInt(d)&&20!=parseInt(d)&&(u=parseInt(d))}h=a[0].color,u=14==u?1:u,l.forEach(function(e){var t=e.getComponent(cc.Sprite),n=h+"_"+u,c="public-pic-card-poker-"+n;i._loadCardFrame(o,c,t)}.bind(this))}if("07"==e||"22"==e||"08"==e||"10"==e||"04"==e||"11"==e||"02"==e){for(var d in s.pointNumbers){var f=s.pointNumbers[d];1==d&&(d=14),f>=s.maxNumber()&&u<parseInt(d)&&20!=parseInt(d)&&(u=parseInt(d))}u=14==u?1:u,a.forEach(function(e){u==e.point&&h<e.color&&(h=e.color)}),l.forEach(function(e){var t=e.getComponent(cc.Sprite),n=h+"_"+u,c="public-pic-card-poker-"+n;i._loadCardFrame(o,c,t)}.bind(this))}},i._loadCardFrame=function(e,t,n,i,o){var c=e.getSpriteFrame(t);n.spriteFrame=c,i&&(n.node.width=i),o&&(n.node.height=o)},i.testScore=function(){},cc._RFpop()},{GetCardPointsSameCount:"GetCardPointsSameCount",KQCard:"KQCard",KQCardColorsHelper:"KQCardColorsHelper",KQCardFindTypeExtension:"KQCardFindTypeExtension",KQCardPointsHelper:"KQCardPointsHelper",KQCardScoretsHelper:"KQCardScoretsHelper"}],KQCardScoretsHelper:[function(e,t,n){"use strict";cc._RFpush(t,"3d3b5YPHXhN44h/B0miZFRE","KQCardScoretsHelper");var i=function(e){this.pointNumbers={},e.forEach(function(e){var t=e.scores,n=this.pointNumbers[t]||0;this.pointNumbers[t]=n+1}.bind(this))};i.prototype.maxNumber=function(){var e=0;for(var t in this.pointNumbers){var n=this.pointNumbers[t];e=Math.max(n,e)}return e},t.exports=i,cc._RFpop()},{}],KQCardSelectExtension:[function(e,t,n){"use strict";cc._RFpush(t,"66642YNpFVIzb+JM2CkwEgS","KQCardSelectExtension");var i=e("KQCard");e("KQCardFindTypeExtension");i.autoSelectCards=function(e,t){if(e.length<=t)return e;e.forEach(function(e){1==e.scores&&(e.scores=14)});for(var n=e.slice().sort(function(e,t){return e.scores-t.scores}),o=[i.findWuTong,i.findTongHuaShun,i.findTieZhi,i.findHuLu,i.findTongHua,i.findShunZi,i.findSanTiao,i.findLiaDui,i.findDuiZi],c=null,r=0;r<o.length;++r){var a=o[r];if(c=a.bind(i)(n),c&&c.length>0)break}var s=[];if(c&&c.length>0){var u=0;c.forEach(function(e){var t=e.map(function(e){return n[e]}),o=i.scoreOfCards(t);o>u&&(u=o,s=e)})}var h=s.map(function(e){return n[e]});return h.length>t&&(h=h.slice(0,t)),h||[]},i.testAutoSelect=function(e){},cc._RFpop()},{KQCard:"KQCard",KQCardFindTypeExtension:"KQCardFindTypeExtension"}],KQCard:[function(e,t,n){"use strict";cc._RFpush(t,"c548c0gMf5BGIH4309MULw+","KQCard");var i=e("KQCardColorsHelper"),o=e("KQCardPointsHelper"),c=(e("NumberExtension"),e("GetCardPointsSameCount"));cc=cc||{},cc.assert=cc.assert||console.assert||function(){},cc.log=cc.log||console.log||function(){},cc.error=cc.error||console.error||function(){};var r=function a(e,t,n){if(this.color=null,this.point=null,this.sindex=n,this._initWithColorAndPoint=function(e,t){"s"==e&&(e=4),"h"==e&&(e=3),"c"==e&&(e=2),"d"==e&&(e=1),this.point=Number(t),this.scores=Number(t),this.color=Number(e),this.colorScores=Number(e),cc.assert(this.point>0),cc.assert(this.color>0)},this._initWithNumber=function(e){this.point=Math.floor(e/10),this.color=e%10,cc.assert(this.point>0),cc.assert(this.color>0)},this._initWithObject=function(e){e.point?this._initWithColorAndPoint(e.color,e.point):e.suit&&this._initWithColorAndPoint(e.suit,e.number)},this.description=function(){return this.cardName()},this.cardName=function(){return this.color+"_"+this.point},this.sort=function(e){var t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],n=arguments.length<=2||void 0===arguments[2]||arguments[2];return a.sort(this,e,t,n)},this.isEqual=function(e){return!!e&&(this.point==e.point&&this.color==e.color&&this.sindex==e.sindex)},e&&t)return void this._initWithColorAndPoint(t,e);var i=Number(e);if(!Number.isNaN(i))return void this._initWithNumber(i);if("string"!=typeof e)return"object"==typeof e?void this._initWithObject(e):void cc.error("初始化错误："+e+" "+t);var o=e.match(/(\.)*\d_\d+/);if(o instanceof Array&&o.length>0){var c=o[0],r=c.split("_"),s=Number(r[0]),u=Number(r[1]);this._initWithColorAndPoint(s,u)}};r.prototype.toServerCard=function(){return{suit:this.color,number:this.point}},r.COLOR_SPADE=4,r.COLOR_HEART=3,r.COLOR_CLUB=2,r.COLOR_DIAMOND=1,t.exports=r,r.cardsFromArray=function(e){return e.map(function(e,t){return new r(e,null,t)})},r.convertToServerCards=function(e){return e.map(function(e){return e.toServerCard()})},r.TYPE={WuLong:0,DuiZi:1,LiangDui:2,SanTiao:3,ShunZi:4,TongHua:5,HuLu:6,TieZhi:7,TongHuaShun:8,WuTong:9,SanTaoHua:10,SanShunZi:11,LiuDuiBan:12,WuDuiSanTiao:13,SiTaoSanTiao:14,CouYiSe:15,SanFenTianXia:16,SanTongHuaShun:17,YiTiaoLong:18,QingLong:19},r.cardsTypeName=function(e){var t=["乌龙","对子","两对","三条","顺子","同花","葫芦","铁支","同花顺","五同","三同花","三顺子","六对半","五对三条","四套三条","凑一色","三分天下","三同花顺","一条龙","清龙"],n=r.cardsType(e);return t[n]},r.cardsType=function(e){return r.isQingLong(e)?r.TYPE.QingLong:r.isYiTiaoLong(e)?r.TYPE.YiTiaoLong:r.isLiuDuiBan(e)?r.TYPE.LiuDuiBan:r.isSanTongHua(e)?r.TYPE.SanTaoHua:r.isSanShunZi(e)?r.TYPE.SanShunZi:r.containWuTong(e,5)?r.TYPE.WuTong:r.containTongHuaShun(e,5)?r.TYPE.TongHuaShun:r.containTieZhi(e)?r.TYPE.TieZhi:r.containHuLu(e)?r.TYPE.HuLu:r.containTongHua(e)?r.TYPE.TongHua:r.containShunZi(e)?r.TYPE.ShunZi:r.containSanTiao(e)?r.TYPE.SanTiao:r.containLiaDui(e)?r.TYPE.LiangDui:r.containDuiZi(e)?r.TYPE.DuiZi:r.TYPE.WuLong;
},r.isTongHua=function(e){var t=arguments.length<=1||void 0===arguments[1]?3:arguments[1];if(e.length<t)return!1;var n=e.map(function(e){return e.color}),i=n[0];for(var o in n){var c=n[o];if(c!=i)return!1}return!0},r.containTongHua=function(e){var t=arguments.length<=1||void 0===arguments[1]?5:arguments[1];if(e.length<t)return!1;e=Array.from(e),e.sort(r.sortByColor);var n=r.contain20(e);e=e.kq_excludes(n),t-=n.length;for(var i=0;i+t<=e.length;++i){var o=e.slice(i,i+t);if(r.isTongHua(o,t))return!0}},r.containTongHua20=function(e){if(e.length<5)return!1;var t=r.contain20(e),n=e.kq_excludes(t);n.sort(r.sortByColor);for(var i=1;i<=t.length;++i)for(var o=5-i,c=0;c+o<=n.length;++c){var a=n.slice(c,c+o);if(r.isTongHua(a,o))return!0}return!1},r.isShunZi=function(e){var t=arguments.length<=1||void 0===arguments[1]?3:arguments[1];if(e.length<t)return!1;if(r._isShunZiAKQ(e))return!0;var n=e.map(function(e){return e.point}).sort(function(e,t){return e-t}),i=n[0];for(var o in n){var c=n[o];if(c!=i)return!1;i+=1}return!0},r._isShunZiAKQ=function(e){var t=e.length;if(t.length<3)return!1;var n=[1],i=[14],o=13;return Number(t-1).kq_times(function(e){n.push(o-e),i.push(o-e)}),r._isCardsContainPoints(e,n)||r._isCardsContainPoints(e,i)},r._isCardsContainPoints=function(e,t){for(var n=function(n){var i=t[n],o=e.findIndex(function(e){return e.point==i});if(o<0)return{v:!1}},i=0;i<t.length;++i){var o=n(i);if("object"==typeof o)return o.v}return!0},r.contain20=function(e){if(e.length<=0)return[];"undefined"==typeof e[0].point&&(e=r.cardsFromArray(e));var t=e.filter(function(e){if(e.point>=20)return e});return t||[]},r.containShunZi=function(e){var t=arguments.length<=1||void 0===arguments[1]?5:arguments[1];return!(e.length<t)&&r.findShunZi(e).length>0},r.isTongHuaShun=function(e){return r.isTongHua(e)&&r.isShunZi(e)},r.containTongHuaShun=function(e){var t=arguments.length<=1||void 0===arguments[1]?5:arguments[1];return!(e.length<t)&&r.findTongHuaShun(e).length>0},r.isQingLong=function(e){var t=13;if(e.length!=t)return!1;var n=r.contain20(e);if(n.length>0)return!1;for(var i=[],o=[],c=[],a=[],s=0;s<e.length;s++)"s"==e[s].suit?i.push(e[s]):"h"==e[s].suit?o.push(e[s]):"c"==e[s].suit?c.push(e[s]):"d"==e[s].suit&&a.push(e[s]);for(var u=i.length,h=o.length,l=c.length,d=a.length,f=[u,h,l,d],p=[],s=0;s<f.length;s++)0!=f[s]&&p.push(f[s]);if(1==p.length&&13==p[0]&&r.isYiTiaoLong(e)){var v=e.filter(function(e){return e});v=r.cardsFromArray(v),v.forEach(function(e){1==e.scores&&(e.scores=14)}),v.sort(function(e,t){return t.scores-e.scores}),v=r.convertToServerCards(v);var g=v.splice(0,5),m=v.splice(0,5);return cc.teShuPaiCards=[v,m,g],!0}return!1},r.isLong=function(e){var t=13;return e.length==t&&r.isShunZi(e)},r.isYiTiaoLong=function(e){var t=13;if(e.length!=t)return!1;var n=r.contain20(e);if(n.length>0)return!1;"undefined"==typeof e[0].number&&(e=r.convertToServerCards(e));for(var i=e.map(function(e){return e.number}).sort(function(e,t){return e-t}),o=0;o<e.length-1;o++)if(i[o]!=i[o+1]-1)return!1;var c=e.filter(function(e){return e});c=r.cardsFromArray(c),c.forEach(function(e){1==e.scores&&(e.scores=14)}),c.sort(function(e,t){return t.scores-e.scores}),c=r.convertToServerCards(c);var a=c.splice(0,5),s=c.splice(0,5);return cc.teShuPaiCards=[c,s,a],!0},r.isSanTongHua=function(e){var t=13;if(e.length!=t)return!1;var n=r.contain20(e);if(n.length>0)return!1;"undefined"==typeof e[0].suit&&(e=r._convertCardsToCardNames(e));for(var i=[],o=[],c=[],a=[],s=0;s<e.length;s++)"s"==e[s].suit?i.push(e[s]):"h"==e[s].suit?o.push(e[s]):"c"==e[s].suit?c.push(e[s]):"d"==e[s].suit&&a.push(e[s]);for(var u=i.length,h=o.length,l=c.length,d=a.length,f=[i,o,c,a],p=[],v=[u,h,l,d],g=[],s=0;s<v.length;s++)0!=v[s]&&(g.push(v[s]),p.push(f[s]));if(3==g.length){for(var s=0;s<g.length;s++)if(5!=g[s]&&3!=g[s])return!1;return p.sort(function(e,t){return e.length-t.length}),cc.teShuPaiCards=p,!0}return!1},r.isCouYiSe=function(e){var t=13;if(e.length!=t)return!1;var n=r.contain20(e);if(n.length>0)return!1;"undefined"==typeof e[0].suit&&(e=r._convertCardsToCardNames(e));for(var i=[],o=[],c=0;c<e.length;c++)"s"==e[c].suit||"c"==e[c].suit?i.push(e[c]):"h"!=e[c].suit&&"d"!=e[c].suit||o.push(e[c]);return 13==i.length||13==o.length},r.isLiuDuiBan=function(e){var t=12;if(e.length<t)return!1;var n=2,i=new c(e),o=0,a=0;for(var s in i){var u=i[s];u==n||3==u?o+=1:4==u?o+=2:1==u&&(a+=1)}if(6==o){var h=e.filter(function(e){return e});h=r.cardsFromArray(h),h.forEach(function(e){1==e.scores&&(e.scores=14)}),h.sort(function(e,t){return t.scores-e.scores}),h=r.convertToServerCards(h);var l=h.splice(0,5),d=h.splice(0,5);return cc.teShuPaiCards=[h,d,l],!0}return!1},r.isWuDuiSanTiao=function(e){var t=13;if(e.length<t)return!1;var n=2,i=3,o=new c(e),r=0,a=0;for(var s in o){var u=o[s];u==n?r+=1:u==i?a+=1:u>=4&&(r+=2)}return 5==r&&1==a},r.isShunZi1=function(e){for(var t=0;t<e.length-1;t++)if(e[t+1]-e[t]!=1)return!1;return!0},r.isSanShunZi=function(e){var t=13;if(e.length!=t)return!1;"undefined"==typeof e[0].suit&&(e=r._convertCardsToCardNames(e));var n=e.map(function(e){return e.number});if(n.sort(function(e,t){return e-t}),0==r.fenZhu(n,5,5)){var n=e.map(function(e){return e.number});if(n.sort(function(e,t){return e-t}),0==r.fenZhu(n,5,3)){var n=e.map(function(e){return e.number});if(n.sort(function(e,t){return e-t}),0==r.fenZhu(n,3,5)){var i=!1;for(var o in e)if(1==e[o].number){i=!0;break}if(!i)return!1;for(var o in e)if(1==e[o].number){e[o].number=14;break}return r.isSanShunZi(e)}}}if(cc.teShuPaiCards&&cc.teShuPaiCards.length>0&&cc.teShuPaiCards[0][0]&&"string"==typeof cc.teShuPaiCards[0][0]){var c=e.filter(function(e){return e}),a=cc.teShuPaiCards.map(function(e){var t=e.map(function(e){for(var t=0;t<c.length;t++)if(c[t].number==e)return c.splice(t,1)[0]});return t});cc.teShuPaiCards=a}return!0},r.fenZhu=function(e,t,n){for(var i=[],o=[],c=[],a=0;a<e.length-1;a++)if(0==a&&i.push(e[0]),e[a+1]-e[a]!=0&&(i.push(e[a+1]),i.length==t)){if(r.isShunZi1(i)){for(var a=0;a<i.length;a++)for(var s=0;s<e.length;s++)if(e[s]==i[a]){if(e[s]==e[s+1])continue;e.splice(s,1)}for(var a=0;a<e.length-1;a++)if(0==a&&o.push(e[0]),e[a+1]-e[a]!=0&&(o.push(e[a+1]),o.length==n)){if(r.isShunZi1(o)){for(var a=0;a<o.length;a++)for(var s=0;s<e.length;s++)if(e[s]==o[a]){if(e[s]==e[s+1])continue;e.splice(s,1)}if(c=e,r.isShunZi1(c)){var u=[i,o,c];return u.sort(function(e,t){return e.length-t.length}),cc.teShuPaiCards||(cc.teShuPaiCards=u),!0}return!1}return!1}}return!1}return!(i.length<t)&&(!(o.length<n)&&void 0)},r.isSanShunZi1=function(e){var t=13;if(e.length!=t)return!1;"undefined"==typeof e[0].point&&(e=r.cardsFromArray(e));var n=r.contain20(e);if(n.length>0)return!1;e=Array.from(e),e.sort(r.sortByPoint);var i=[],o=[],c=[],a=r.sanShunZi1(e)[0];if(!a)return!1;var s=e.filter(function(e){return e}),u=[],h=[],l=[];for(var d in e)h.indexOf(e[d].point)<0?(u.push(e[d]),h.push(e[d].point)):l.push(e[d]);for(var f=0;f<a.length;++f){var p=a[f];if("undefined"!=typeof p){for(var v=0;v<e.length;++v){var g=u.filter(function(e){return e});if(g=g.kq_excludes(p),5!=i.length){var m=g.slice(v,v+5);(5==m.length||r.isShunZi(m))&&(i=m,g=g.kq_excludes(m))}if(5==i.length){var C=l.filter(function(e){return e});C=C.kq_excludes(p),g=g.concat(C)}if(5!=o.length&&5==g.length&&r.isShunZi(g)&&(o=g),5==i.length&&5==o.length)break;o=[],i=[],c=[]}if(5==i.length&&5==o.length){c=p;break}o=[],i=[],c=[]}}if(e=s,r._isSanShunZi(c,o,i))return c=r.convertToServerCards(c),o=r.convertToServerCards(o),i=r.convertToServerCards(i),cc.teShuPaiCards||(cc.teShuPaiCards=[c,o,i]),!0;var _=r._convertOneToA1(e);return e===_?(e.forEach(function(e){14==e.point&&(e.point=1)}),r.isSanShunZi1(e)):r.isSanShunZi(_)},r.sanShunZi1=function(e){var t=arguments.length<=1||void 0===arguments[1]?3:arguments[1],n=r.findShunZi(e,t),i=[],o=[];if(null==n)return!1;for(var c=0;c<n.length;c++){for(var a=n[c],s=[],u=0;u<a.length;u++){var h=a[u];"undefined"!=typeof e[h]&&s.push(e[h])}o.push(a),i.push(s)}return[i,o]},r._isSanShunZi=function(e,t,n){return r.isShunZi(e)&&r.isShunZi(t)&&r.isShunZi(n)},r.isSanTongHuaShun=function(e){var t=13;if(e.length!=t)return!1;var n=r.contain20(e);if(n.length>0)return!1;var i=r._colorClassCards(e),o=[];for(var c in i){var a=i[c];o.push(a)}if(3!=o.length)return!1;o=o.sort(function(e,t){return e.length>t.length});var s=o[0],u=o[1],h=o[2];return 3==s.length&&5==u.length&&5==h.length&&r._isSanTongHuaShun(s,u,h)},r._colorClassCards=function(e){var t={};return e.forEach(function(e){var n=e.color,i=t[n];i||(i=[],t[n]=i),i.push(e)}),t},r._isSanTongHuaShun=function(e,t,n){return r.isTongHuaShun(e)&&r.isTongHuaShun(t)&&r.isTongHuaShun(n)},r.isSanFenTianXia=function(e){var t=13;if(e.length<t)return!1;var n=4,i=new o(e),c=0;for(var r in i.pointNumbers){var a=i.pointNumbers[r];a==n&&(c+=1)}return 3===c},r.isSiTaoSanTiao=function(e){var t=13;if(e.length<t)return!1;var n=3,i=new o(e),c=0;for(var r in i.pointNumbers){var a=i.pointNumbers[r];a==n&&(c+=1)}return 4==c},r.isSanTaoHua=function(e){var t=13;if(e.length<t)return!1;var n=r.contain20(e);if(n.length>0)return!1;var o=new i(e),c=[];for(var a in o.colorNumber)c.push(o.colorNumber[a]);return c.sort(function(e,t){return e-t}),3==c.length&&(3==c[0]&&5==c[1]&&5==c[2])},r.containTieZhi=function(e){var t=4;if(e.length<t)return!1;var n=r.contain20(e);e=e.kq_excludes(n),t-=n.length;var i=new o(e);for(var c in i.pointNumbers){var a=i.pointNumbers[c];if(a>=t)return n.forEach(function(e){e.scores=parseInt(c)}),!0}return!1},r.isTieZhi=function(e){var t=4;if(e.length!=t)return!1;var n=e.reduce(function(e,t){return e==t.point?e:-1},e[0].point);return n!=-1},r.containWuTong=function(e){var t=5;if(e.length<t)return!1;var n=r.contain20(e);e=e.kq_excludes(n),t-=n.length;var i=new o(e);for(var c in i.pointNumbers){var a=i.pointNumbers[c];if(a>=t)return n.forEach(function(e){e.scores=parseInt(c)}),i.maxNumber()>=t}return!1},r.isWuTong=function(e){var t=5;if(e.length!=t)return!1;var n=e.reduce(function(e,t){return e==t.point?e:-1},e[0].point);return n!=-1},r.containHuLu=function(e){var t=5;return!(e.length<t)&&r.findHuLu(e).length>0},r.isHuLu=function(e){if(5!=e.length)return!1;var t=e.map(function(e){return e.point}).sort(function(e,t){return e-t}),n=t[0],i=n,o=0,c=0;t.forEach(function(e){e!=n&&e!=i&&(i=e,c=0),o+=e==n?1:0,c+=e==i?1:0});var r=Math.max(o),a=Math.min(c);return 2==a&&3==r},r.containSanTiao=function(e){var t=3;if(e.length<t)return!1;var n=r.contain20(e);e=e.kq_excludes(n),t-=n.length;var i=new o(e);for(var c in i.pointNumbers){var a=i.pointNumbers[c];if(a>=t)return n.forEach(function(e){e.scores=parseInt(c)}),!0}return!1},r.isSanTiao=function(e){if(3!=e.length)return!1;var t=e.reduce(function(e,t){return t.point==e?e:-1},e[0].point);return t!=-1},r.containLiaDui=function(e){return!(e.length<4)&&r.findLiaDui(e).length>0},r.isLiaDui=function(e){if(4!=e.length)return!1;var t=new o(e);for(var n in t.pointNumbers)if(2!=t.pointNumbers[n])return!1;return!0},r.isDuiZi=function(e){if(2!=e.length)return!1;var t=e[0],n=e[1];return t.point==n.point},r.containDuiZi=function(e){var t=2;if(e.length<t)return!1;var n=r.contain20(e);e=e.kq_excludes(n),t-=n.length;var i=new o(e);for(var c in i.pointNumbers){var a=i.pointNumbers[c];if(a>=t)return n.forEach(function(e){e.scores=parseInt(c)}),!0}return!1},r.containGuiPai=function(e,t){if(e.length<t)return!1;var n=r.contain20(e);e=e.kq_excludes(n);var i=new o(e),c=i.maxNumber()+n.length;return c>=t},r.isTeShuPai=function(e){return!(e.length<13)&&(r.isQingLong(e)||r.isYiTiaoLong(e)||r.isLiuDuiBan(e)||r.isSanShunZi(e)||r.isSanTongHua(e))},r._convertOneToA=function(e){if(void 0==e.find(function(e){return 1==e.point}))return e;var t=e.map(function(e){if(1==e.point){var t=new r(14,e.color);return t}return e});return t},r._convertOneToA1=function(e){if(void 0==e.find(function(e){return 1==e.point}))return e;var t=0,n=e.map(function(e){if(1==e.point&&0==t){t++;var n=new r(14,e.color);return n}return e});return n},r.sortByPoint=function(e,t){var n=Number(e.point)-Number(t.point);return n},r.sortByColor=function(e,t){var n=arguments.length<=2||void 0===arguments[2]||arguments[2];return t.color==e.color?(e.point-t.point)*(n?1:-1):t.color-e.color},r.sort=function(e,t){var n=arguments.length<=2||void 0===arguments[2]||arguments[2],i=arguments.length<=3||void 0===arguments[3]||arguments[3],o=1;if(e.point==t.point)o=e.color-t.color;else{var c=e.point,r=t.point;i&&1==c&&(c=14),i&&1==r&&(r=14),o=c-r}return o*(n?1:-1)},r._convertCardsToCardNames=function(e){var t=["","d","c","h","s"];return e.map(function(e){var n=e.point,i=t[e.color],o=Math.max(Math.min(n,13),1);return{number:o,suit:i}})},cc._RFpop()},{GetCardPointsSameCount:"GetCardPointsSameCount",KQCardColorsHelper:"KQCardColorsHelper",KQCardPointsHelper:"KQCardPointsHelper",NumberExtension:"NumberExtension"}],KQGlabolSocketEventHander:[function(e,t,n){"use strict";cc._RFpush(t,"babea3CWj9G1pWM9AkXao0n","KQGlabolSocketEventHander");var i=e("socket"),o=e("KQGlobalEvent"),c=e("KQNativeInvoke"),r={start:function(){this._didStart||(this._didStart=!0,o.on(i.Event.ReceiveForceExit,this._forceExitApp,this))},_forceExitApp:function(e){c.forceExitApp()}};t.exports=r,cc._RFpop()},{KQGlobalEvent:"KQGlobalEvent",KQNativeInvoke:"KQNativeInvoke",socket:"socket"}],KQGlobalEvent:[function(e,t,n){"use strict";cc._RFpush(t,"d90d6OrggVEXa29ffA+vZY0","KQGlobalEvent");var i={_handles:{},emit:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];"string"==typeof t&&(t={data:t});var n=[];t.eventName=e;for(var i in this._handles)if(i==e)for(var o=0;o<this._handles[i].length;o++){var c=this._handles[i][o](t);n.push(c)}return n},on:function(e,t,n){this._handles[e]=this._handles[e]||[],this._handles[e].push(t.bind(n)),t._caller=n},off:function(e){for(var t=0;t<this._handles[e].length;t++)this._handles[e][t]=null},offTarget:function(e){for(var t in this._handles){var n=this._handles[t],i=n.filter(function(t){return t._caller=e}).map(function(e,t){return t}),o=0;i.forEach(function(e){n.splice(e+o,1),o+=1})}}};t.exports=i,cc._RFpop()},{}],KQNativeInvoke:[function(e,t,n){"use strict";cc._RFpush(t,"7327dLBqWVNaJ14fJQ4jq6Y","KQNativeInvoke");var i={IOSClassName:"AppController",ANDRIODClassName:"com/gongpa/ssz/AppActivity",isNativeIOS:function(){var e=cc.sys.platform;return e==cc.sys.IPHONE||e==cc.sys.IPAD},isNativeAndroid:function(){var e=cc.sys.platform;return e==cc.sys.ANDROID},isNative:function(){return 1==cc.sys.isNative}};i.wxLogin=function(){i.isNative()&&(i.isNativeIOS()?jsb.reflection.callStaticMethod(i.IOSClassName,"wxLogin"):i.isNativeAndroid()&&jsb.reflection.callStaticMethod(i.ANDRIODClassName,"wxLogin","()V"))},i.shareHallToWeChatFriend=function(){i.isNative()&&(i.isNativeIOS()?jsb.reflection.callStaticMethod(i.IOSClassName,"wxShareHallFriend"):jsb.reflection.callStaticMethod(i.ANDRIODClassName,"wxShareHallFriend","()V"))},i.shareHallToWeChatTimeline=function(){i.isNative()&&(i.isNativeIOS()?jsb.reflection.callStaticMethod(i.IOSClassName,"wxShareHallTimeline"):jsb.reflection.callStaticMethod(i.ANDRIODClassName,"wxShareHallTimeline","()V"))},i.forceExitApp=function(){i.isNative()&&(i.isNativeIOS()?jsb.reflection.callStaticMethod(i.IOSClassName,"exitApp"):jsb.reflection.callStaticMethod(i.ANDRIODClassName,"exitApp","()V"))},i.downloadNewVersion=function(e,t){i.isNativeIOS()?jsb.reflection.callStaticMethod(i.IOSClassName,"downloadNewVersion:",e):jsb.reflection.callStaticMethod(i.ANDRIODClassName,"downloadNewVersion","(Ljava/lang/String;)V",t)},i.shareRoomToWeChatFriend=function(e,t){i.isNativeIOS()?jsb.reflection.callStaticMethod(i.IOSClassName,"wxShareFriend:description:",id,t,title):i.isNativeAndroid()&&jsb.reflection.callStaticMethod(i.ANDRIODClassName,"wxShareFriend","(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V",id,t,title)},i.shareRoomToWeChatTimeline=function(e,t){i.isNativeIOS()?jsb.reflection.callStaticMethod(i.IOSClassName,"wxShare:description:",id,t,title):i.isNativeAndroid()&&jsb.reflection.callStaticMethod(i.ANDRIODClassName,"wxShare","(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V",id,t,title)},i.shareScreenToWeChatFriend=function(){i.isNativeIOS()?jsb.reflection.callStaticMethod(i.IOSClassName,"wxScreenShareFriend"):jsb.reflection.callStaticMethod(i.ANDRIODClassName,"wxScreenShareFriend","()V")},i.shareScreenToWeChatTimeline=function(){i.isNativeIOS()?jsb.reflection.callStaticMethod(i.IOSClassName,"wxScreenShare"):jsb.reflection.callStaticMethod(i.ANDRIODClassName,"wxScreenShare","()V")},i.startRecord=function(){i.isNative()&&(i.isNativeIOS()?jsb.reflection.callStaticMethod(i.IOSClassName,"record"):i.isNativeAndroid()&&jsb.reflection.callStaticMethod(i.ANDRIODClassName,"record","()V"))},i.endRecord=function(){i.isNative()&&(i.isNativeIOS()?jsb.reflection.callStaticMethod(i.IOSClassName,"endRecord"):i.isNativeAndroid()&&jsb.reflection.callStaticMethod(i.ANDRIODClassName,"endRecord","()V"))},i.screenshotShare=function(){var e=arguments.length<=0||void 0===arguments[0]?"shareIMG":arguments[0];if(!this._isCapturing){this._isCapturing=!0;var t=cc.director.getWinSize(),n="result_share.jpg",i=jsb.fileUtils.getWritablePath()+n;jsb.fileUtils.isFileExist(i)&&jsb.fileUtils.removeFile(i);var o=new cc.RenderTexture(Math.floor(t.width),Math.floor(t.height),cc.IMAGE_FORMAT_PNG,gl.DEPTH24_STENCIL8_OES);o.setPosition(cc.p(t.width/2,t.height/2)),o.begin(),cc.director.getRunningScene().visit(),o.end(),o.saveToFile(n,cc.IMAGE_FORMAT_PNG);var c=this,r=0,a=function s(){if(jsb.fileUtils.isFileExist(i))cc.sys.os==cc.sys.OS_ANDROID&&jsb.reflection.callStaticMethod(c.ANDRIODClassName,e,"(Ljava/lang/String;)V",i),c._isCapturing=!1;else{if(r++,r>10)return void console.log("time out...");setTimeout(s,50)}};setTimeout(a,50)}},i.playAudioWithUrl=function(e){i.isNative()&&(i.isNativeIOS()?jsb.reflection.callStaticMethod(i.IOSClassName,"playUrl:",e):i.isNativeAndroid()&&jsb.reflection.callStaticMethod(i.ANDRIODClassName,"playUrl","(Ljava/lang/String;)V",e))},t.exports=i,cc._RFpop()},{}],MsgControl:[function(e,t,n){"use strict";cc._RFpush(t,"dd242dsY+hBG5LpL7ZF7Kn6","MsgControl");var i=e("socket"),o=e("ChatMessage"),c=e("AudioManager");cc.Class({"extends":cc.Component,properties:{textScrollView:cc.Node,imageContentNode:cc.Node,editBox:cc.EditBox,textRecordScrollView:cc.ScrollView,textRecordLayout:cc.Layout,textPrefab:cc.Prefab,chatTextRecordPrefab:cc.Prefab,emojiPrefab:cc.Prefab,biaoqing:[cc.Node],kuaijieyu:[cc.Node],content:[cc.Node],inputNode:cc.Node,emoji:[cc.Node],_userId:null,_playerInfos:null,_chatTextMessageRecords:null},onLoad:function(){this._userId=i.instance.userInfo.id,this._playerInfos=[],this.textContent=this.textScrollView.getComponent(cc.ScrollView).content;for(var e=this,t=c.instance.chatTexts(),n=0;n<t.length;n++){var o=cc.instantiate(this.textPrefab);o.getComponent("cellText").setText(t[n]),o.getComponent("cellText").onSelectAction=function(t){e.onTextClickAction(t)},this.textContent.h=1e3,this.textContent.addChild(o)}},clickKuaiJieYu:function(){this.kuaijieyu[0].active=!0,this.kuaijieyu[1].active=!1,this.biaoqing[0].active=!1,this.biaoqing[1].active=!0,this.content[0].active=!0,this.content[1].active=!1},clickBiaoQing:function(){this.biaoqing[0].active=!0,this.biaoqing[1].active=!1,this.kuaijieyu[0].active=!1,this.kuaijieyu[1].active=!0,this.content[0].active=!1,this.content[1].active=!0},onTextClickAction:function(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0];this.editBox.string="",this.sendText(e)},clickEmoji:function(e,t){var n=this.editBox.string;this.editBox.string=n+"<"+t+">",this.sendEmoji(t)},clickSend:function(){var e=this.editBox.string||"";0!=e.length&&(this.editBox.string="",this.sendText(e))},sendEmoji:function(e){0!=e.length&&(i.sendEmoji(this._userId,e),this.dismiss())},sendText:function(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0];0!=e.length&&(i.sendText(this._userId,e),this.dismiss())},dismiss:function(){this.node.active=!1},bqAction:function(){this.bqNode1.active=this.btnLanguageNode.active=this.btnChartNode1.active=!0,this.bqNode.active=this.btnLanguageNode1.active=this.btnChartNode.active=!1,this.textScrollView.active=!1,this.imageContentNode.active=!0,this.textRecordScrollView.node.active=!1},textAction:function(){this.bqNode1.active=this.btnLanguageNode.active=this.btnChartNode.active=!1,this.bqNode.active=this.btnLanguageNode1.active=this.btnChartNode1.active=!0,this.textScrollView.active=!0,this.imageContentNode.active=!1,this.textRecordScrollView.node.active=!1},chartAction:function(){this.bqNode1.active=this.btnLanguageNode1.active=this.btnChartNode1.active=!1,this.bqNode.active=this.btnLanguageNode.active=this.btnChartNode.active=!0,this.textScrollView.active=this.imageContentNode.active=!1,this.textRecordScrollView.node.active=!0},addPlayerInfos:function(e){this._playerInfos=this._playerInfos||[],e.forEach(function(e){var t=this._playerInfos.find(function(t){return t.id==e.id});null==t&&this._playerInfos.push(e)}.bind(this))},addChatTextMessage:function(e,t){this._playerInfos=this._playerInfos||[];var n="[ID:"+e+"说]：",i=this._playerInfos.find(function(t){return t.id==e});i&&(n="["+i.nickname+"说]：");var c=n+t;c=o.parseString(c),this._addChatTextToRecord(c)},addChatEmojiMessage:function(e,t){this._playerInfos=this._playerInfos||[];var n="[ID:"+e+"说]：",i=this._playerInfos.find(function(t){return t.id==e});i&&(n="["+i.nickname+"说]：");var c=n+t;c=o.parseString(c),this._addChatEmojiToRecord(t)},_addChatEmojiToRecord:function(e){this._loadEmojiFrame(e,function(e){o.setEmoji(e)})},_loadEmojiFrame:function(e,t){cc.loader.loadRes("/textures/chat/bq",cc.SpriteAtlas,function(n,i){if(!n){var o=i.getSpriteFrame(e);t(o)}}.bind(this))},_addChatTextToRecord:function(e){var t=cc.instantiate(this.chatTextRecordPrefab),n=t.getComponent("ChatTextRecord");n.setString(e),this.textRecordLayout.node.addChild(t),this.textRecordScrollView.scrollToBottom()}}),cc._RFpop()},{AudioManager:"AudioManager",ChatMessage:"ChatMessage",socket:"socket"}],NetworkError:[function(e,t,n){"use strict";cc._RFpush(t,"c99d35Sy6hDPbrte9nVczxP","NetworkError");var i=(e("manager"),e("KQNativeInvoke"));cc.Class({"extends":cc.Component,properties:{},onLoad:function(){},exitAction:function(){cc.director.end(),i.isNativeIOS()?jsb.reflection.callStaticMethod(i.IOSClassName,"exitApp"):jsb.reflection.callStaticMethod(i.ANDRIODClassName,"exitApp","()V")}}),cc._RFpop()},{KQNativeInvoke:"KQNativeInvoke",manager:"manager"}],NumberExtension:[function(e,t,n){"use strict";cc._RFpush(t,"80e21gZRpNM4pIiCpZ+7s8m","NumberExtension"),Number.prototype.kq_times||(Number.prototype.kq_times=function(e,t){if(e)for(var n=0;n<this;++n)t?e.apply(t,n):e(n)}),cc._RFpop()},{}],Playback:[function(e,t,n){"use strict";cc._RFpush(t,"0d3095dnBVFo5D1hEDDa5KQ","Playback");var i=e("socket"),o=cc.Class({"extends":cc.Component,properties:{_playbackDatas:null,_isPlaybacking:!1},statics:{instance:null},onLoad:function(){o.instance=this,cc.game.addPersistRootNode(this.node)},setPlaybackDatas:function(e){this._playbackDatas=e},removePlaybackDatas:function(){this.setPlaybackDatas(null),this.stopPlayback()},isContainPlaybackDatas:function(){return null!=this._playbackDatas},startPlayback:function(){return this._isPlaybacking=!0,this._playbackDatas?void this._executePlayback():(cc.error("想回放，却没有回放数据"),void this.stopPlayback())},stopPlayback:function(){this._isPlaybacking=!1,this.unscheduleAllCallbacks()},isPlaybacking:function(){return this._isPlaybacking},_executePlayback:function(){var e=1,t=3;cc.log(this._playbackDatas),this._playbackDatas=this._playbackDatas.filter(function(e,t){return t==this._playbackDatas.length-1||e.indexOf('"action":"gameOver')==-1}.bind(this)),this._playbackDatas.forEach(function(n,o){var c=e+o*t;o==this._playbackDatas.length-1&&(c=e+(o-1)*t+1),this.scheduleOnce(function(){cc.log("回放开始模拟 Socket 接收到服务器消息, ",o),i.instance._dispatchResponse(n)},c)}.bind(this))}});t.exports=o,cc._RFpop()},{socket:"socket"}],Player:[function(e,t,n){"use strict";cc._RFpush(t,"6ffa0O02PFOp78QADTW5zGf","Player");var i=e("socket"),o=(e("KQGlobalEvent"),e("ArrayExtension"),e("UserModelHelper")),c=(e("Playback"),e("KQCardResHelper"),e("KQCard")),r=e("AudioManager");cc.Class({"extends":cc.Component,properties:{foldCardNode:cc.Node,teShuPaiNode:cc.Node,cardsBackLayout:cc.Layout,compareCardsNode:cc.Node,userInfoNode:cc.Node,chatMessageNode:cc.Node,userAvatarNode:cc.Node,bulletHolePrefab:cc.Prefab,bulletHoleNode:cc.Node,shotNode:[cc.Node],userId:0,cardTypePrefab:cc.Prefab,_userInfo:null,_deskInfo:null,playedCompareCardsIndexs:{visible:!1,"default":void 0}},onLoad:function(){this.userAvatarNode.on(cc.Node.EventType.TOUCH_START,this._showUserInfo,this),this.reset(),this.foldCardNodeBack=!1,this.cardSpriteAtlas=this.node.parent.getComponent("play").cardSpriteAtlas},onDestroy:function(){this.userAvatarNode.off(cc.Node.EventType.TOUCH_START,this._showUserInfo,this)},click_leave:function(){var e=i.instance.userInfo.id,t=this._userInfo.id;i.sendQingli(t,e)},_showUserInfo:function(){},reset:function(){this.foldCardNode.active=!1,this.cardsBackLayout.active=!1,this.compareCardsNode.active=!1,this.teShuPaiNode.active=!1,this.bulletHoleNode.active=!1,this.bulletHoleNode.removeAllChildren(),this.bulletHoleNode.children.forEach(function(e){e.active=!1}),this.shotNode.length>0&&this.shotNode.forEach(function(e){e&&(e.active=!1)}),this.compareCardsNode.getComponent("CompareCards").reset(),this.compareCardsNode.getComponent("CompareCards").unscheduleAllCallbacks()},reset2:function(){this.foldCardNode.active=!1,this.cardsBackLayout.active=!1,this.teShuPaiNode.active=!1,this.bulletHoleNode.active=!1,this.bulletHoleNode.removeAllChildren(),this.bulletHoleNode.children.forEach(function(e){e.active=!1}),this.shotNode.length>0&&this.shotNode.forEach(function(e){e&&(e.active=!1)})},updateUserInfoWithUsers:function(e){var t=e.find(function(e){return this.userId==e.id}.bind(this));this.updateUserInfo(t)},showQingli:function(e,t){this.node.active&&(t>0?this.userInfoNode.getComponent("userInfo").setqingli(!1):e?this.userInfoNode.getComponent("userInfo").setqingli(!1):this.userInfoNode.getComponent("userInfo").setqingli(!0))},updateUserInfo:function(e){if(this._userInfo=e,this.node.active=null!=e,this.userInfoNode.active=this.node.active,e){var t=this.userInfoNode.getComponent("userInfo");t.updateAvatar(e.avatarUrl),t.updateUserId(e.id),t.updateNickname(e.nickname),t.setOfflineVisible(!e.onlineStatus);var n=this._deskInfo.cIndex;this._deskInfo&&n>0&&this.playedCompareCardsIndexs.indexOf(n)==-1&&o.isPlayedCards(e)&&(this.playCard(e.id,e.cardInfo),this.compareCardsNode.getComponent("CompareCards").setCompareData(e))}},updateBanker:function(){var e=this.userInfoNode.getComponent("userInfo");if(!this._userInfo)return void e.setIsBanker(!1);var t=!!this._userInfo&&this._userInfo.isBanker;e.setIsBanker(t)},showFangZhuStatus:function(e){var t=arguments.length<=1||void 0===arguments[1]||arguments[1];this.node.active&&this._userInfo.id==e&&this.userInfoNode.getComponent("userInfo").setFangZhuNodeVisible(t)},updateScore:function(e){!e&&this._userInfo&&(e=this._userInfo.totalScore);var t=this.userInfoNode.getComponent("userInfo");t.updateScore(e)},showReadyStatus:function(e){var t=arguments.length<=1||void 0===arguments[1]||arguments[1];this.node.active&&this._userInfo.id==e&&this.userInfoNode.getComponent("userInfo").setReadyNodeVisible(t)},showBeilv:function(e,t){this.node.active&&this._userInfo.id==e&&this.userInfoNode.getComponent("userInfo").setBeilvLabel(t)},updateDeskInfo:function(e){this._deskInfo=e,e&&!e.isCBegin&&this.reset()},hideReadyStatus:function(){this.userInfoNode.getComponent("userInfo").setReadyNodeVisible(!1)},playFaPaiAnimation:function(){if(this.node.active&&!o.isPlayedCards(this._userInfo)){var e=this.cardsBackLayout.getComponent("cardsBack");e.showPlayCardBacks()}},shouldShowFaPaiAnimation:function(){return o.isPlayedCards(this._userInfo)},setUserOnlineStatus:function(e){var t=arguments.length<=1||void 0===arguments[1]?1:arguments[1];if(e==this.userId){var n=this.userInfoNode.getComponent("userInfo");n.setOfflineVisible(1!=t)}},showChatText:function(e,t){if(e==this.userId){var n=this.chatMessageNode.getComponent("ChatMessage");n.setString(t)}},playCard:function(e,t){this.userId==e&&(this.cardsBackLayout.node.active=!1,this.compareCardsNode.active=!1,this.foldCardNode.targetOff(this.foldCardNode),this.foldCardNode.active=!0,this.foldCardNode.children.slice(0,3).forEach(function(e){e.active=!0,e.children.forEach(function(e){e.active=!0;var t=e.getComponent("cc.Sprite"),n="public-pic-card-poker-back";this._loadCardFrame(this.cardSpriteAtlas,n,t)}.bind(this))}.bind(this)),this.foldCardNode.on(cc.Node.EventType.TOUCH_END,function(e){this._clickFoldCardNode(e)}.bind(this),this.foldCardNode))},_clickFoldCardNode:function(e){if(this.userId==i.instance.userInfo.id){var t=1==this._userInfo.cardInfo.length?this._userInfo.cardInfo[0].cards:this._userInfo.cardInfo,n=t.map(function(e){return 1==this._userInfo.cardInfo.length?c.cardsFromArray(e):c.cardsFromArray(e.cards)}.bind(this)).reduce(function(e,t){return e.concat(t)},[]),o=this.foldCardNode.children.slice(0,3),r=o.map(function(e){return e.children}).reduce(function(e,t){return e.concat(t)},[]);n.forEach(function(e,t){if(!(t>=r.length)){r[t].removeAllChildren(),r[t].getComponent(cc.Sprite).spriteFrame="";var n=new cc.Node;n.width=r[0].width,n.height=r[0].height,n.addComponent(cc.Sprite);var i=n.getComponent("cc.Sprite");i.sizeMode=0;var o=0==this.foldCardNodeBack?e.cardName():"back";n.cardName=o;var c="public-pic-card-poker-"+o;if(this._loadCardFrame(this.cardSpriteAtlas,c,i),cc.maPai==o){var a=new cc.Node;a.addComponent(cc.Sprite),cc.loader.loadRes("play/desk/img_red5_1",cc.SpriteFrame,function(e,t){if(e)return void cc.error(e.message||e);var n=a.getComponent(cc.Sprite);n.spriteFrame=t,n.node.width=i.node.width+10,n.node.height=i.node.height+10}.bind(this)),i.node.addChild(a)}r[t].addChild(n)}}.bind(this));var a=n.slice(0,3),s=n.slice(3,8),u=n.slice(8,13);n=[a,s,u];var h=c.cardsType(a)+1;h=h>=10?h:"0"+h,h="04"==h?"11":h;var l=c.cardsType(s)+1;l=l>=10?l:"0"+l,l="07"==l?"22":l;var d=c.cardsType(u)+1;d=d>=10?d:"0"+d,h&&c._setGuiCard(0,0,3,h,n,r,this.cardSpriteAtlas),l&&c._setGuiCard(1,3,8,l,n,r,this.cardSpriteAtlas),d&&c._setGuiCard(2,8,13,d,n,r,this.cardSpriteAtlas),0==this.foldCardNodeBack?this.foldCardNodeBack=!0:1==this.foldCardNodeBack&&(this.foldCardNodeBack=!1)}},_loadCardFrame:function(e,t,n,i,o){var c=e.getSpriteFrame(t);n.spriteFrame=c,i&&(n.node.width=i),o&&(n.node.height=o)},readyToCompareCards:function(){this.foldCardNode.targetOff(this.foldCardNode),this.foldCardNodeBack=!0,this._clickFoldCardNode(),this.cardsBackLayout.node.active=!1,this.compareCardsNode.active=!0,this.foldCardNode.active=!0,this.compareCardsNode.getComponent("CompareCards")._user&&(this.compareCardsNode.getComponent("CompareCards")._user.isContainExtra?this.teShuPaiNode.active=!0:this.teShuPaiNode.active=!1)},playShootAnimation:function(e,t){if(e==this.userId){var n=this.shotNode[t];n.active=!0,n.children[0].active=!0,n.children[1].active=!0;var i=cc.rotateTo(.1,-15),o=cc.delayTime(.1),c=cc.rotateTo(.1,0),r=cc.callFunc(function(){n.children[0].active=!0}),a=cc.callFunc(function(){n.children[0].active=!1}),s=cc.repeat(cc.sequence(r,i,o,c,a),3),u=cc.fadeIn(0),h=cc.scaleTo(0,.8),l=cc.scaleTo(.08,1),d=cc.spawn(cc.fadeOut(.02),cc.scaleTo(.02,.5)),f=cc.delayTime(.2),p=cc.callFunc(function(){n.children[1].active=!0}),v=cc.callFunc(function(){n.children[1].active=!1}),g=cc.repeat(cc.sequence(p,u,h,l,d,f,v),3);n.children[0].runAction(s),n.children[1].runAction(g)}},playBulletHoleAnimation:function(e){if(e==this.userId){this.bulletHoleNode.active=!0;var t=cc.instantiate(this.bulletHolePrefab);t.children.forEach(function(e){e.active=!1}.bind(this)),t.children[0].y=0,this.bulletHoleNode.addChild(t);var n=.3,i=0;t.children.forEach(function(e){this.scheduleOnce(function(){r.instance.playHumanZQiang(),e.active=!0;var t=0==Math.round(Math.random())?-1:1;t=Math.floor(38*Math.random())*t;
var n=0==Math.round(Math.random())?-1:1;n=Math.floor(38*Math.random())*n,e.x=n,e.y=t},i),i+=n}.bind(this))}},playHomeRunAimation:function(e){if(e==this.userId){var t=this.userInfoNode.getComponent("userInfo");t.playHomeRunAimation()}},playSpeakAnimation:function(e){if(e==this.userId){var t=this.userInfoNode.getComponent("userInfo");t.playSpeakAnimation()}},nextCompareScore:function(){if(!this.node.active)return 0;var e=this.compareCardsNode.getComponent("CompareCards").nextCompareScore();return e},showNextCompareCards:function(){this.nextCompareScore()<=0||(this.teShuPaiNode.active=!1,this.compareCardsNode.getComponent("CompareCards").showNextCards())},showAllCompareCards:function(e){var t=e.find(function(e){return this.userId==e.id}.bind(this));this.compareCardsNode.getComponent("CompareCards").setCompareData(t),this.compareCardsNode.getComponent("CompareCards").showAllCards(),this.updateScore(this._userInfo.totalScore||0)},showNextCompareScore:function(e){this.compareCardsNode.getComponent("CompareCards").showNextCompareScore(e)},showScoreResult:function(){this.compareCardsNode.getComponent("CompareCards").showScoreResult()}}),cc._RFpop()},{ArrayExtension:"ArrayExtension",AudioManager:"AudioManager",KQCard:"KQCard",KQCardResHelper:"KQCardResHelper",KQGlobalEvent:"KQGlobalEvent",Playback:"Playback",UserModelHelper:"UserModelHelper",socket:"socket"}],ResultItem:[function(e,t,n){"use strict";cc._RFpush(t,"9b2behcoUlLYL1MIMs+04wI","ResultItem");var i=(e("KQCardResHelper"),e("SpriteHelper"));e("KQCard");cc.Class({"extends":cc.Component,properties:{avatarSprite:cc.Sprite,labelNickname:cc.Label,labelResultNumber:cc.Label,layoutTouDao:cc.Layout,layoutZhongDao:cc.Layout,layoutWeiDao:cc.Layout,layoutTeShu:cc.Layout,labelTeShuPaiTitle:cc.Label,scoreUnitNode:cc.Node,diamondUnitNode:cc.Node},onLoad:function(){},updateWithPlayerInfo:function(e){var t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];i.setImageUrl(this.avatarSprite,e.avatarUrl),this.labelNickname.string=e.nickname,this.labelResultNumber.string=e.cScore,this.scoreUnitNode.active=!t,this.diamondUnitNode.active=t;var n=e.cScore;t&&(n=5*e.cScore),this.labelResultNumber.string=n},setCards:function(e){cc.assert(13==e.length)}}),cc._RFpop()},{KQCard:"KQCard",KQCardResHelper:"KQCardResHelper",SpriteHelper:"SpriteHelper"}],Setting:[function(e,t,n){"use strict";cc._RFpush(t,"f3ad6mNk4BMBZzipGQDNlr4","Setting");var i=e("manager"),o=e("KQNativeInvoke");cc.Class({"extends":cc.Component,properties:{phone:cc.Label,musicSlider:cc.Node,effectSlider:cc.Node,btnSwitchAccount:cc.Button,shareBg:cc.Node,wx:cc.Node,pyq:cc.Node,music:cc.Node,sounds:cc.Node,_audioManager:null,_musicOn:1,_soundsOn:1,_phone:null},onLoad:function(){this._audioManager=cc.find("AudioManager")||{},this._audioManager=this._audioManager.getComponent("AudioManager"),this._initSliders(),this.phone.string=this._phone?this._phone:"无";var e=cc.sys.localStorage.getItem("bgMusic"),t=cc.sys.localStorage.getItem("bgSound");""!=e&&(1==parseInt(e)?(this._musicOn=1,this.music.getChildByName("music_on").active=!0,this.music.getChildByName("music_off").active=!1):(this._musicOn=0,this.music.getChildByName("music_on").active=!1,this.music.getChildByName("music_off").active=!0)),0==t&&(0==parseInt(t)?(this._soundsOn=0,this.sounds.getChildByName("sounds_on").active=!1,this.sounds.getChildByName("sounds_off").active=!0):(this._soundsOn=1,this.sounds.getChildByName("sounds_on").active=!0,this.sounds.getChildByName("sounds_off").active=!1),this._audioManager.setEffectMusicVolum(this._soundsOn))},clickWx:function(){if(cc.sys.isNative){var e=cc.sys.localStorage.getItem("shareTitle"),t=cc.sys.localStorage.getItem("desc"),n=cc.sys.localStorage.getItem("recordId"),i=cc.sys.localStorage.getItem("roomId"),c="";if(i&&(c="roomId="+i),n&&(c="recordId="+n),o.isNativeIOS())jsb.reflection.callStaticMethod(o.IOSClassName,"wxShareFriend:description:",c,t,e);else if(o.isNativeAndroid()){var r="(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V";jsb.reflection.callStaticMethod(o.ANDRIODClassName,"wxShareFriend",r,c,t,e)}}else this.shareBg.active=!0,this.wx.active=!0},clickPyq:function(){if(cc.sys.isNative){var e=cc.sys.localStorage.getItem("shareTitle"),t=cc.sys.localStorage.getItem("desc"),n=cc.sys.localStorage.getItem("recordId"),i=cc.sys.localStorage.getItem("roomId"),c="";if(i&&(c="roomId="+i),n&&(c="recordId="+n),o.isNativeIOS())jsb.reflection.callStaticMethod(o.IOSClassName,"wxShareHallTimeline:description:",c,t,e);else if(o.isNativeAndroid()){var r="(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V";jsb.reflection.callStaticMethod(o.ANDRIODClassName,"wxShareHallTimeline",r,c,t,e)}}else this.shareBg.active=!0,this.pyq.active=!0},clickshareBg:function(){this.shareBg.active=!1,this.wx.active=!1,this.pyq.active=!1},clickMusic:function(){this.music.children[1].active=this._musicOn=!this._musicOn,this.music.children[2].active=!this._musicOn;var e=0;this._musicOn?(this._audioManager.setBgMusicVolumn(1),this._audioManager.playMusic(),e=1):(this._audioManager.setBgMusicVolumn(0),e=0),cc.sys.localStorage.setItem("bgMusic",e)},clickSounds:function(){this.sounds.children[1].active=this._soundsOn=!this._soundsOn,this.sounds.children[2].active=!this._soundsOn;var e=0;this._soundsOn?(this._audioManager.setEffectMusicVolum(1),e=1):(this._audioManager.setEffectMusicVolum(0),e=0),cc.sys.localStorage.setItem("bgSound",e)},clickSetting:function(){},_initSliders:function(){this._initSliderEvents();var e=i.getMusicValue(),t=i.getMusicEffectValue();this._audioManager.setBgMusicVolumn(e),this._audioManager.setEffectMusicVolum(t),this.musicSlider.getComponent("slider").setValue(e),this.effectSlider.getComponent("slider").setValue(t)},_initSliderEvents:function(){var e=this;this.musicSlider.getComponent("slider").onValueChange=function(t){i.setMusicValue(t),e._audioManager.setBgMusicVolumn(t)},this.effectSlider.getComponent("slider").onValueChange=function(t){i.setMusicEffectValue(t),e._audioManager.setEffectMusicVolum(t)}},clickSwitch:function(){},hideSwitch:function(){this.btnSwitchAccount&&(this.btnSwitchAccount.node.active=!1)}}),cc._RFpop()},{KQNativeInvoke:"KQNativeInvoke",manager:"manager"}],SpriteHelper:[function(e,t,n){"use strict";cc._RFpush(t,"936f2uPA8NAuqUZv0R8ZxgP","SpriteHelper");var i={setImageUrl:function(e,t){t.endsWith("png")||t.endsWith("jpg")||t.endsWith("gif"),cc.loader.load({url:t,type:"jpg"},function(t,n){if(!t){var i=new cc.SpriteFrame(n);e.spriteFrame=i}})}};t.exports=i,cc._RFpop()},{}],StringExtension:[function(e,t,n){"use strict";cc._RFpush(t,"7b106eQ/I5F1J85hMxFBIlw","StringExtension"),String.prototype.startsWith||!function(){var e=function(){try{var e={},t=Object.defineProperty,n=t(e,e,e)&&t}catch(i){}return n}(),t={}.toString,n=function(e){if(null==this)throw TypeError();var n=String(this);if(e&&"[object RegExp]"==t.call(e))throw TypeError();var i=n.length,o=String(e),c=o.length,r=arguments.length>1?arguments[1]:void 0,a=r?Number(r):0;a!=a&&(a=0);var s=Math.min(Math.max(a,0),i);if(c+s>i)return!1;for(var u=-1;++u<c;)if(n.charCodeAt(s+u)!=o.charCodeAt(u))return!1;return!0};e?e(String.prototype,"startsWith",{value:n,configurable:!0,writable:!0}):String.prototype.startsWith=n}(),String.prototype.endsWith||!function(){var e=function(){try{var e={},t=Object.defineProperty,n=t(e,e,e)&&t}catch(i){}return n}(),t={}.toString,n=function(e){if(null==this)throw TypeError();var n=String(this);if(e&&"[object RegExp]"==t.call(e))throw TypeError();var i=n.length,o=String(e),c=o.length,r=i;if(arguments.length>1){var a=arguments[1];void 0!==a&&(r=a?Number(a):0,r!=r&&(r=0))}var s=Math.min(Math.max(r,0),i),u=s-c;if(u<0)return!1;for(var h=-1;++h<c;)if(n.charCodeAt(u+h)!=o.charCodeAt(h))return!1;return!0};e?e(String.prototype,"endsWith",{value:n,configurable:!0,writable:!0}):String.prototype.endsWith=n}(),cc._RFpop()},{}],TotalGameResultItem:[function(e,t,n){"use strict";cc._RFpush(t,"e1c6f93a1BOnoSiX6kJ0Efn","TotalGameResultItem");var i=e("SpriteHelper");cc.Class({"extends":cc.Component,properties:{avatarSprite:cc.Sprite,labelUserId:cc.Label,labelScore:cc.Label,labelNickname:cc.Label,_deskInfo:null},onLoad:function(){},setUserInfo:function(e,t){if(e){var n=e.totalScore;if(t&&(0==t.setting1||1==t.setting1)){var o=0==t.setting1?100:200;n-=o}i.setImageUrl(this.avatarSprite,e.avatarUrl),this.labelUserId.string=""+e.id,this.labelScore.string=n>0?"+ "+n:"- "+n*-1,0==n&&(this.labelScore.string="0"),this.labelNickname.string=e.nickname}}}),cc._RFpop()},{SpriteHelper:"SpriteHelper"}],TotalGameResult:[function(e,t,n){"use strict";cc._RFpush(t,"f7fb2e7foJFNJzjdtbAtk7O","TotalGameResult");var i=e("KQNativeInvoke"),o=e("socket");cc.Class({"extends":cc.Component,properties:{itemLayout:cc.Layout,itemPrefab:cc.Prefab,timeLabel:cc.Label,jushuLabel:cc.Label,roomId:cc.Label,nicknameLabels:cc.Label,recordInfo_sview:[cc.Node],sharrBg:cc.Node,btnWeiXin:cc.Node,btnGongXuoHao:cc.Node,btnZhuShou:cc.Node,btnZongFen:cc.Node,suanfen_sview:cc.Node,suanFenPrefab:cc.Prefab,suanFenBgPrefab:cc.Prefab},onLoad:function(){},onDisable:function(){var e="开房玩[米斗十三水]",t="开好房了，就等你们一起来[米斗十三水]啦！晚了位置就没了哟~";cc.sys.localStorage.setItem("shareTitle",e),cc.sys.localStorage.setItem("desc",t),cc.sys.localStorage.removeItem("recordId"),window.shareToTimeLine&&window.shareToTimeLine(),window.shareToSession&&window.shareToSession()},js:function(e){var t=5;switch(e){case 0:t=5;break;case 1:t=10;break;case 2:t=20;break;case 3:t=30}return t},creator:function(e,t){for(var n=0;n<t.length;n++)if(t[n].id==e)return n},_clickBtn:function(){this.btnZhuShou.active=!0,this.btnZongFen.active=!1},clickZongFen:function(){this.btnZhuShou.active=!0,this.btnZongFen.active=!1,this.recordInfo_sview.forEach(function(e){e.active=!0}),this.suanfen_sview.active=!1},_globalMsg:function(e){var t="房间号："+e.roomId,n=["5 ","10 ","20 "],i="局数："+n[e.setting1-2],o="时间："+(e.createAt?e.createAt:e.createTime),c="[米斗十三水]战绩",r=t+i+o+" 点击查看详情",a=void 0!=e.id?e.id:e.recordId;cc.sys.localStorage.setItem("shareTitle",c),cc.sys.localStorage.setItem("desc",r),cc.sys.localStorage.setItem("recordId",a),cc.sys.localStorage.setItem("roomId",""),window.shareToTimeLine&&window.shareToTimeLine(),window.shareToSession&&window.shareToSession()},setPlayerInfos:function(e,t){e.sort(function(e,t){return t.totalScore-e.totalScore}),this._globalMsg(t),this.recordInfo_sview.forEach(function(e){e.active=!0}),this.suanfen_sview.active=!1,this.btnZhuShou.active=!0,this.btnZongFen.active=!1,this._playerInfos=e,this._deskInfo=t;var n=t.createUserId?t.createUserId:t.createId,i=e[this.creator(n,e)].nickname;this.roomId.string=t.roomId;var o=t.createAt?t.createAt:t.createTime;this.timeLabel.string=o.substr(0,11),this.jushuLabel.string=this.js(t.setting1-2),this.nicknameLabels.string=i,this.itemLayout.node.removeAllChildren(),e.forEach(function(e){var n=cc.instantiate(this.itemPrefab);n.getComponent("TotalGameResultItem").setUserInfo(e,t),t.createUserId==e.id||t.createId==e.id?n.children[1].children[0].active=!0:n.children[1].children[0].active=!1,this.itemLayout.node.addChild(n)}.bind(this))},clickSuanFen:function(){this.btnZhuShou.active=!1,this.btnZongFen.active=!0,this.recordInfo_sview.forEach(function(e){e.active=!1}),this.suanfen_sview.active=!0;var e=this._playerInfos.filter(function(e){return e.totalScore>0}),t=this._playerInfos.filter(function(e){return e.totalScore<0}),n=e.map(function(e){return e.totalScore}),i=t.map(function(e){return e.totalScore*-1}),o=[],c=([n.filter(function(e){return e}),i.filter(function(e){return e})],i.length>n.length?0:1);c=2,this.suanfen_sview.children[0].removeAllChildren(),t.forEach(function(t,r){var a=cc.instantiate(this.suanFenBgPrefab);a.removeAllChildren(),this._ctarePrefab(1,a,t,t.totalScore,this._deskInfo,-200,0);var s=0,u=0;if(1==c)for(var h=0;h<o[r][1].length;h++){var l=o[r][1][h],d=n.indexOf(l);if(d!=-1){var f=e.splice(d,1)[0];n.splice(d,1),f&&(a.childrenCount>=3&&(u=-90),3==a.childrenCount&&(s=0),a.childrenCount>=5&&(u=-180),5==a.childrenCount&&(s=0),this._ctarePrefab(0,a,f,f.totalScore,this._deskInfo,s,u),s+=200)}}else if(0==c)for(var p=a.children[0].getChildByName("fen").getComponent(cc.Label).string.substr(3)*-1,h=0;h<o.length;h++){var l=o[h],d=l[1].indexOf(p),v=l[0],g=n.indexOf(v);if(d!=-1&&g!=-1){var f=e[g];this._ctarePrefab(0,a,f,f.totalScore,this._deskInfo,s,u,p)}}else{for(var v=i[r],m=0,C=[],h=0;h<n.length;h++){var g=n[h];if(m<v&&(m+=g,m>v?C.push(g-(m-v)):C.push(g),v-g>=0&&(n[h]=0)),m>v){n[h]=m-v;break}}for(var _=0;_<C.length;_++){var y=C[_];if(0!=y){a.childrenCount>=3&&(u=-90),3==a.childrenCount&&(s=0),a.childrenCount>=5&&(u=-180),5==a.childrenCount&&(s=0);var f=e[_];this._ctarePrefab(0,a,f,y,this._deskInfo,s,u),s+=200}}}this.suanfen_sview.children[0].addChild(a)}.bind(this))},_ctarePrefab:function(e,t,n,i,o,c,r){var a=arguments.length<=7||void 0===arguments[7]?null:arguments[7],s=cc.instantiate(this.suanFenPrefab);s.getChildByName("ID").getComponent(cc.Label).string="ID:"+n.id,o.createUserId==n.id&&(s.getChildByName("ID").color=new cc.Color(235,115,122)),s.getChildByName("shu").getComponent(cc.Label).string=0==e?"输":"";var u=0==e?i+"分":"总分:"+i;a&&(u=a+"分"),s.getChildByName("fen").getComponent(cc.Label).string=u;var h=s.getChildByName("haed").getComponent(cc.Sprite),l=n.avatarUrl;cc.loader.load({url:l,type:"jpg"},function(e,t){if(!e){var n=new cc.SpriteFrame(t);h.spriteFrame=n,h.node.height=55,h.node.width=55}}),s.x=c,s.y=r,t.height=90+r*-1,t.addChild(s)},clickExit:function(){o.sendOnceAgain("false",this._userId),cc.director.loadScene("hall")},clickShareWeiChat:function(){cc.sys.isNative?i.isNativeIOS()?jsb.reflection.callStaticMethod(i.IOSClassName,"wxScreenShareFriend"):i.screenshotShare():this.sharrBg.active=!0},clickShareBg:function(){this.sharrBg.active=!1},clickSharePengYouQuan:function(){i.isNativeIOS()?jsb.reflection.callStaticMethod(i.IOSClassName,"wxScreenShare"):jsb.reflection.callStaticMethod(i.ANDRIODClassName,"wxScreenShare","()V")},getCombBySum:function(e,t,n,i){var o={getCombination:function(e,t){var n=[];return function i(e,t,o){if(0==o)return n.push(e);for(var c=0,r=t.length;c<=r-o;c++)i(e.concat(t[c]),t.slice(c+1),o-1)}([],e,t),n},getArrayIndex:function(e){var t=0,n=[];for(t=0;t<e.length;t++)n.push(t);return n}},c={init:function(e,t){var n=e.concat(),i=[],o=0;for(n.sort(function(e,t){return e-t}),o=0;o<n.length&&n[o]<=t;o++)i.push(n[o]);return i},core:function(e,t,n,i,r){var a=0,s=0,l=[],d=0,f=[],p=[];if(i!=h){for(l=o.getCombination(n,i),a=0;a<l.length;a++){for(f=l[a],d=0,p=[],s=0;s<f.length;s++)d+=e[f[s]],p.push(e[f[s]]);Math.abs(d-t)<=u&&r.push(p)}c.core(e,t,n,i-1,r)}}},r=[],a=[],s=0,u=0,h=0;return s=i||s,u=n||u,a=c.init(e,t),s&&(h=s-1),c.core(a,t,o.getArrayIndex(a),s||a.length,r),r}}),cc._RFpop()},{KQNativeInvoke:"KQNativeInvoke",socket:"socket"}],UserModelHelper:[function(e,t,n){"use strict";cc._RFpush(t,"98854aScapF5oQnHKxJsvmF","UserModelHelper");var i={isPlayedCards:function(e){return cc.assert(e),!!(e&&e.cardInfo&&e.cardInfo.length>0)},isUserReady:function(e){return 1==e.readyStatus}};t.exports=i,cc._RFpop()},{}],UserSampleInfo:[function(e,t,n){"use strict";cc._RFpush(t,"3a9f7A0IgRGPrAZvy1p9s4i","UserSampleInfo");e("SpriteHelper");cc.Class({"extends":cc.Component,properties:{labelUserId:cc.Label,labelUserIP:cc.Label,labelNickname:cc.Label,avatarSprite:cc.Sprite,manSprite:cc.Sprite,womenSprite:cc.Sprite,_didShowUserInfo:null},onLoad:function(){},updateWithUser:function(e){return},_disappearUserInfo:function(){this.node.active=!1,this._didShowUserInfo=null}}),cc._RFpop()},{SpriteHelper:"SpriteHelper"}],agreement:[function(e,t,n){"use strict";cc._RFpush(t,"8f601dzNnZLtq+KGT0uqDqF","agreement");var i=e("socket"),o=e("KQGlobalEvent");e("KQGlabolSocketEventHander");cc.Class({"extends":cc.Component,properties:{agreement:{"default":null,type:cc.Label}},onLoad:function(){o.on(i.Event.ReceiveHallInfo,this._socketReceiveHallInfo,this)},_socketReceiveHallInfo:function(e){if(e.result){var t=(cc.find("Canvas/agreement"),e.data);this.agreement.string=t.info1||""}}}),cc._RFpop()},{KQGlabolSocketEventHander:"KQGlabolSocketEventHander",KQGlobalEvent:"KQGlobalEvent",socket:"socket"}],alert:[function(e,t,n){"use strict";cc._RFpush(t,"16cd2qs73lByZaHhJkQAEee","alert");var i=e("AudioManager");cc.Class({"extends":cc.Component,properties:{popNode:cc.Node,label:cc.Label,_alertCallback:null,_willDismissCallback:null,_dismissCallback:null,_confirmCallback:null,_tishi:null,_card_num:null},onLoad:function(){},alert:function(){this.node.active=!0;var e=this.popNode.getComponent(cc.Animation);e.play("pop"),this._alertCallback&&this._alertCallback(this.node)},alertResult:function(){this.node.active=!0,cc.find("Canvas/show_result").active=!1;var e=this.popNode.getComponent(cc.Animation);e.play("pop"),this._alertCallback&&this._alertCallback(this.node)},playBtnClickSFX:function(){i.instance.playBtnClickSFX()},palyBtnCancelClickSFX:function(){i.instance.palyBtnCancelClickSFX()},palyBtnPublicSFX:function(){i.instance.palyBtnPublicSFX()},palyBtnCreateRoomSFX:function(){i.instance.palyBtnCreateRoomSFX()},palyWindowSFX:function(){i.instance.palyWindowSFX()},palyWeiXinLoginSFX:function(){i.instance.palyWeiXinLoginSFX()},palyFangPaiSFX:function(){i.instance.palyFangPaiSFX()},dismissAction:function(){var e=this._willDismissCallback;if(e){var t=e();if(t)return void this.dismissComplete()}var n=this.popNode.getComponent(cc.Animation),i=n.getAnimationState("pop_dismiss");i.on("finished",this.dismissComplete,this),n.play("pop_dismiss")},dismissActionResult:function(){var e=this._willDismissCallback;if(e){var t=e();if(t)return void this.dismissComplete()}var n=this.popNode.getComponent(cc.Animation),i=n.getAnimationState("pop_dismiss");i.on("finished",this.dismissComplete,this),n.play("pop_dismiss"),cc.find("Canvas/show_result").active=!0},dismissComplete:function(){this.node.active=!1,this.onDismissComplete&&this.onDismissComplete(),this._dismissCallback&&this._dismissCallback(this.node)},dismissPlay:function(){cc.director.loadScene("hall")},onDismissComplete:function(){},doneAction:function(){this.dismissAction(),this.onDoneAction();var e=this._confirmCallback;e&&e(this.node)},onDoneAction:function(){},setMessage:function(e){this.label.string=e},getMessage:function(){return this.label.string},setAlertCallbck:function(e){this._alertCallback=e},setWillDismissCallback:function(e){this._willDismissCallback=e},setDismissCallback:function(e){this._dismissCallback=e},setConfirmCallback:function(e){this._confirmCallback=e}}),cc._RFpop()},{AudioManager:"AudioManager"}],animation:[function(e,t,n){"use strict";cc._RFpush(t,"c9ee9y0ua5NRLSZAxQqDjdw","animation"),cc.Class({"extends":cc.Component,properties:{fapaiNode:cc.Prefab,liuduiban:cc.Prefab,santonghua:cc.Prefab,sanshunzi:cc.Prefab,quanleida:cc.Prefab,qinglong:cc.Prefab},onLoad:function(){},fapaiAnimation:function(){var e=this.node.getChildByName("fapai");e=cc.removeSelf();var t=cc.instantiate(this.fapaiNode);this.node.addChild(t);var n=t.getChildByName("left_gang"),i=t.getChildByName("right_gang"),o=t.getChildByName("mask"),c=t.getChildByName("start"),r=c.getChildByName("quan"),a=c.getChildByName("baodian"),s=(c.getChildByName("ditan"),c.getChildByName("begin_icon"),c.getChildByName("title"),c.getChildByName("rWing")),u=c.getChildByName("lWing"),h=this;t.active=!0,o.runAction(cc.scaleTo(.2,10,10)),n.runAction(cc.sequence(h.LgunAction())),i.runAction(cc.sequence(h.RgunAction()));var l=cc.callFunc(function(){s.active=!0,u.active=!0,u.runAction(cc.sequence(cc.repeat(cc.sequence(cc.skewTo(.05,20,-10),cc.skewTo(.05,0,0)),3),cc.fadeOut(0))),s.runAction(cc.sequence(cc.repeat(cc.sequence(cc.skewTo(.05,20,-10),cc.skewTo(.05,0,0)),3),cc.fadeOut(0)))}),d=cc.callFunc(function(){setTimeout(function(){c.runAction(cc.scaleTo(.2,0,0))},500)});setTimeout(function(){c.active=!0,c.runAction(cc.sequence(cc.scaleTo(.2,1.5,1.5),cc.scaleTo(.2,1,1),l,d)),r.runAction(cc.sequence(cc.scaleTo(.2,10,10),cc.fadeOut(0))),a.runAction(cc.sequence(cc.scaleTo(.2,1.5,1.5),cc.fadeOut(0)))},400),setTimeout(function(){u.active=!1,s.active=!1,c.active=!1,t.active=!1,t.removeFromParent(!0)},2e3)},LgunAction:function(){return[cc.spawn([cc.moveTo(.2,cc.v2(-430,152)),cc.scaleTo(.2,2,2)]),cc.spawn([cc.fadeTo(.2,255),cc.moveTo(.2,cc.v2(-220,0)),cc.rotateTo(.2,35)]),cc.fadeOut(0)]},RgunAction:function(){return[cc.spawn([cc.moveTo(.2,cc.v2(430,152)),cc.scaleTo(.2,-2,2)]),cc.spawn([cc.fadeTo(.2,255),cc.moveTo(.2,cc.v2(220,0)),cc.rotateTo(.2,-35)]),cc.fadeOut(0)]},_bezier1:function(e){var t=[];return t[0]=[[cc.v2(100,74),cc.v2(150,174),cc.v2(200,-174)],cc.v2(100,74)],t[1]=[[cc.v2(-72,284),cc.v2(-122,384),cc.v2(-222,-150)],cc.v2(-72,284)],t[2]=[[cc.v2(-70,200),cc.v2(-120,300),cc.v2(-220,-200)],cc.v2(-70,200)],t[3]=[[cc.v2(-123,213),cc.v2(-173,313),cc.v2(-273,-160)],cc.v2(-123,213)],t[4]=[[cc.v2(110,237),cc.v2(160,337),cc.v2(260,-177)],cc.v2(210,237)],t[5]=[[cc.v2(183,115),cc.v2(233,215),cc.v2(333,-155)],cc.v2(183,115)],t[6]=[[cc.v2(92,116),cc.v2(142,216),cc.v2(242,-146)],cc.v2(92,116)],t[7]=[[cc.v2(-26,124),cc.v2(-76,224),cc.v2(-176,-164)],cc.v2(-26,124)],t[8]=[[cc.v2(-110,81),cc.v2(-220,131),cc.v2(-460,-180)],cc.v2(-110,81)],t[9]=[[cc.v2(-125,33),cc.v2(-225,133),cc.v2(-275,-133)],cc.v2(-125,33)],t[10]=[[cc.v2(0,0),cc.v2(50,100),cc.v2(150,-150)],cc.v2(0,0)],t[11]=[[cc.v2(-235,5),cc.v2(-275,105),cc.v2(-375,-186)],cc.v2(-235,5)],t[12]=[[cc.v2(-80,4),cc.v2(-130,104),cc.v2(-230,-233)],cc.v2(-80,4)],t[13]=[[cc.v2(100,-7),cc.v2(150,107),cc.v2(250,-177)],cc.v2(100,-7)],t[14]=[[cc.v2(154,23),cc.v2(204,113),cc.v2(254,-173)],cc.v2(254,23)],t[e]},_qinglongAniamtion:function(e){var t=cc.instantiate(this.qinglong);this.node.addChild(t);var n=t.getChildByName("bg"),i="";i="ql"==e?t.getChildByName("qlongtitle"):t.getChildByName("longtitle");for(var o=t.getChildByName("yun1"),c=t.getChildByName("yun2"),r=t.getChildByName("yun3"),a=t.getChildByName("yun4"),s=t.getChildByName("long"),u=t.getChildByName("hua1"),h=t.getChildByName("hua2"),l=t.getChildByName("hua3"),d=[],f=[],p=[],v=[],g=(cc.instantiate(u),this),m=0;m<5;m++)d[m]=cc.instantiate(u),d[m].runAction(cc.fadeTo(.1,255)),v.push(d[m]),f[m]=cc.instantiate(h),f[m].runAction(cc.fadeTo(.1,255)),v.push(f[m]),p[m]=cc.instantiate(l),p[m].runAction(cc.fadeTo(.1,255)),v.push(p[m]);var C=cc.callFunc(function(){i.runAction(cc.sequence(cc.spawn(cc.scaleTo(.2,1,1),cc.fadeTo(.2,255)),cc.scaleTo(.2,2,2),cc.spawn(cc.scaleTo(.2,1.5,1.5),_)))}),_=cc.callFunc(function(){s.runAction(cc.sequence(cc.spawn(cc.fadeTo(.2,255),cc.scaleTo(.2,.5)),cc.scaleTo(.1,3,3),cc.spawn(cc.scaleTo(.1,1,1),y)))}),y=(cc.callFunc(function(){}),cc.callFunc(function(){o.runAction(cc.spawn(cc.fadeTo(.2,255),cc.repeat(cc.sequence(cc.moveTo(.2,cc.v2(-334,234)),cc.moveTo(.2,cc.v2(-344,234))),3))),c.runAction(cc.spawn(cc.fadeTo(.2,255),cc.repeat(cc.sequence(cc.moveTo(.2,cc.v2(-368,-82)),cc.moveTo(.2,cc.v2(-358,-82))),3))),r.runAction(cc.spawn(cc.fadeTo(.2,255),cc.repeat(cc.sequence(cc.moveTo(.2,cc.v2(408,-4)),cc.moveTo(.2,cc.v2(398,-4))),3))),a.runAction(cc.spawn(cc.fadeTo(.2,255),cc.repeat(cc.sequence(cc.moveTo(.2,cc.v2(406,181)),cc.moveTo(.2,cc.v2(416,181))),3)));for(var e=1;e<v.length;e++)v[e].setPosition(g._bezier(e)[1]),t.addChild(v[e]),v[e].runAction(cc.sequence(cc.spawn(cc.bezierTo(.3,g._bezier(e)[0]),cc.scaleTo(.3,1,1),cc.fadeTo(.3,0))));setTimeout(function(){t.removeFromParent(!0)},1500)}));n.runAction(cc.sequence(cc.spawn(cc.fadeTo(.4,255),cc.scaleTo(.4,30,30)),C)),i.runAction(cc.scaleTo(.2,2,2))},_sanshunziAnimation:function(){var e=cc.instantiate(this.sanshunzi);this.node.addChild(e);var t=e.getChildByName("bg"),n=e.getChildByName("Ltu"),i=e.getChildByName("Rtu"),o=e.getChildByName("title"),c=e.getChildByName("zushun1"),r=e.getChildByName("zushun2"),a=e.getChildByName("zushun3"),s=e.getChildByName("zushun4"),u=e.getChildByName("zushun5"),h=this,l=cc.callFunc(function(){o.runAction(cc.sequence(cc.spawn(cc.scaleTo(.2,1,1),cc.fadeTo(.2,255)),d))}),d=cc.callFunc(function(){o.runAction(cc.sequence(cc.scaleTo(.2,2.5,2.5),f)),n.runAction(cc.sequence(cc.fadeTo(.2,255))),i.runAction(cc.sequence(cc.fadeTo(.2,255)))}),f=cc.callFunc(function(){o.runAction(cc.scaleTo(.2,1.5,1.5)),r.runAction(cc.sequence(cc.spawn(cc.fadeTo(.2,255),cc.scaleTo(.2,12,12)),cc.scaleTo(.2,10,10),p)),a.runAction(cc.sequence(cc.spawn(cc.fadeTo(.2,255),cc.scaleTo(.2,22,22)),cc.scaleTo(.2,20,20),v)),setTimeout(function(){u.runAction(cc.sequence(cc.spawn(cc.fadeTo(.2,255),cc.scaleTo(.2,12,12)),cc.scaleTo(.2,10,10)))},100),setTimeout(function(){h.sanshunzi.active=!1,e.removeFromParent(!0)},2e3)}),p=cc.callFunc(function(){c.runAction(cc.sequence(cc.spawn(cc.fadeTo(.2,255),cc.scaleTo(.2,12,12)),cc.scaleTo(.2,10,10)))}),v=cc.callFunc(function(){s.runAction(cc.sequence(cc.spawn(cc.fadeTo(.2,255),cc.scaleTo(.2,14,14)),cc.scaleTo(.2,12,12)))});t.runAction(cc.sequence(cc.spawn(cc.fadeTo(.4,255),cc.scaleTo(.4,30,30)),l)),o.runAction(cc.scaleTo(.2,2,2))},_quanleidaAnimation:function(){var e=cc.instantiate(this.quanleida);this.node.addChild(e);var t=e.getChildByName("bg"),n=e.getChildByName("ball"),i=e.getChildByName("bangqiutao"),o=e.getChildByName("bangqiugun"),c=e.getChildByName("Lyun"),r=e.getChildByName("Ryun"),a=e.getChildByName("title"),s=cc.callFunc(function(){a.runAction(cc.sequence(cc.spawn(cc.scaleTo(.2,1,1),cc.fadeTo(.2,255)),u))}),u=cc.callFunc(function(){a.runAction(cc.sequence(cc.scaleTo(.2,2.5,2.5),cc.scaleTo(.2,1.5,1.5),cc.repeat(cc.sequence(cc.moveTo(.3,cc.v2(0,20)),cc.moveTo(.3,cc.v2(0,0))),2))),c.runAction(cc.sequence(cc.spawn(cc.fadeTo(.2,255),cc.scaleTo(.2,20,20),cc.moveTo(.2,cc.v2(-270,70))),cc.repeat(cc.sequence(cc.moveTo(.3,cc.v2(-270,26)),cc.moveTo(.3,cc.v2(-270,46))),2))),r.runAction(cc.sequence(cc.spawn(cc.fadeTo(.2,255),cc.scaleTo(.2,20,20),cc.moveTo(.2,cc.v2(270,70))),cc.repeat(cc.sequence(cc.moveTo(.3,cc.v2(270,66)),cc.moveTo(.3,cc.v2(270,46))),2))),i.runAction(cc.sequence(cc.spawn(cc.fadeTo(.2,255),cc.scaleTo(.3,10,10),cc.moveTo(.3,cc.v2(250,50))),h))}),h=cc.callFunc(function(){i.runAction(cc.repeat(cc.sequence(cc.rotateTo(.2,-10),cc.rotateTo(.2,0)),3)),n.runAction(cc.sequence(cc.spawn(cc.fadeTo(.1,255),cc.moveTo(.2,cc.v2(196,83))),l))}),l=cc.callFunc(function(){n.runAction(cc.spawn(cc.fadeTo(.2,0),cc.moveTo(.2,cc.v2(0,0)),cc.scaleTo(.2,4,4))),o.runAction(cc.sequence(cc.spawn(cc.scaleTo(.2,2,2),cc.fadeTo(.2,255)),cc.scaleTo(.3,1.5,1.5))),setTimeout(function(){t.runAction(cc.fadeTo(.2,0)),n.runAction(cc.fadeTo(.2,0)),i.runAction(cc.fadeTo(.2,0)),o.runAction(cc.fadeTo(.2,0)),c.runAction(cc.fadeTo(.2,0)),r.runAction(cc.fadeTo(.2,0)),a.runAction(cc.fadeTo(.2,0)),e.removeFromParent(!0)},2e3)});t.runAction(cc.sequence(cc.spawn(cc.fadeTo(.4,255),cc.scaleTo(.4,30,30)),s)),a.runAction(cc.sequence(cc.scaleTo(.2,2,2)))},_santonghuaAnimation:function(){var e=cc.instantiate(this.santonghua);this.node.addChild(e);for(var t=e.getChildByName("bg"),n=e.getChildByName("hua1"),i=e.getChildByName("hua2"),o=e.getChildByName("hua3"),c=e.getChildByName("Rtaohua"),r=e.getChildByName("Ltaohua"),a=e.getChildByName("title"),s=this,u=[],h=[],l=[],d=[],f=0;f<5;f++)u[f]=cc.instantiate(n),u[f].runAction(cc.fadeTo(.1,255)),d.push(u[f]),h[f]=cc.instantiate(i),h[f].runAction(cc.fadeTo(.1,255)),d.push(h[f]),l[f]=cc.instantiate(o),l[f].runAction(cc.fadeTo(.1,255)),d.push(l[f]);var p=cc.callFunc(function(){a.runAction(cc.sequence(cc.spawn(cc.scaleTo(.2,1,1),cc.fadeTo(.2,255)),cc.scaleTo(.2,1,1),v))}),v=cc.callFunc(function(){a.runAction(cc.sequence(cc.scaleTo(.1,1.8,1.8))),r.runAction(cc.sequence(cc.spawn(cc.fadeTo(.2,255),cc.scaleTo(.2,3,3),cc.moveTo(.2,cc.v2(-160,-60))))),c.runAction(cc.sequence(cc.spawn(cc.fadeTo(.2,255),cc.scaleTo(.2,3,3),cc.moveTo(.2,cc.v2(140,-60)))));for(var n=1;n<d.length;n++)d[n].setPosition(s._bezier(n)[1]),e.addChild(d[n]),d[n].runAction(cc.sequence(cc.spawn(cc.bezierTo(.3,s._bezier(n)[0]),cc.scaleTo(.3,1,1),cc.fadeTo(.3,0))));setTimeout(function(){t.runAction(cc.fadeTo(.2,0)),c.runAction(cc.fadeTo(.2,0)),r.runAction(cc.fadeTo(.2,0)),a.runAction(cc.fadeTo(.2,0)),e.removeFromParent(!0)},1500)});t.runAction(cc.sequence(cc.spawn(cc.fadeTo(.3,255),cc.scaleTo(.3,30,30)),p)),a.runAction(cc.sequence(cc.scaleTo(.2,2,2)))},_bezier:function(e){var t=[];return t[0]=[[cc.v2(200,74),cc.v2(250,124),cc.v2(400,-174)],cc.v2(200,74)],t[1]=[[cc.v2(-72,284),cc.v2(-122,334),cc.v2(-272,-150)],cc.v2(-72,284)],t[2]=[[cc.v2(-270,300),cc.v2(-320,350),cc.v2(-420,-200)],cc.v2(-270,300)],t[3]=[[cc.v2(-223,213),cc.v2(-273,263),cc.v2(-373,-160)],cc.v2(-223,213)],t[4]=[[cc.v2(210,237),cc.v2(260,287),cc.v2(360,-177)],cc.v2(210,237)],t[5]=[[cc.v2(183,115),cc.v2(233,164),cc.v2(333,-155)],cc.v2(183,115)],t[6]=[[cc.v2(92,116),cc.v2(142,166),cc.v2(242,-146)],cc.v2(92,116)],t[7]=[[cc.v2(-26,124),cc.v2(-76,174),cc.v2(-176,-164)],cc.v2(-26,124)],t[8]=[[cc.v2(-310,81),cc.v2(-360,131),cc.v2(-460,-180)],cc.v2(-310,81)],t[9]=[[cc.v2(-125,33),cc.v2(-175,83),cc.v2(-275,-133)],cc.v2(-125,33)],t[10]=[[cc.v2(0,0),cc.v2(50,50),cc.v2(150,-150)],cc.v2(0,0)],t[11]=[[cc.v2(-235,5),cc.v2(-275,55),cc.v2(-375,-86)],cc.v2(-235,5)],t[12]=[[cc.v2(-80,4),cc.v2(-130,54),cc.v2(-230,-233)],cc.v2(-80,4)],t[13]=[[cc.v2(100,-7),cc.v2(150,57),cc.v2(250,-177)],cc.v2(100,-7)],t[14]=[[cc.v2(254,23),cc.v2(304,73),cc.v2(404,-173)],cc.v2(254,23)],t[e]},_liuduibanAnimation:function(){var e=cc.instantiate(this.liuduiban);this.node.addChild(e);var t=e.getChildByName("bg"),n=e.getChildByName("Lqi"),i=e.getChildByName("Rqi"),o=e.getChildByName("Cqi"),c=e.getChildByName("Rtaohua"),r=e.getChildByName("Ltaohua"),a=e.getChildByName("title"),s=cc.callFunc(function(){a.runAction(cc.sequence(cc.spawn(cc.scaleTo(.2,1,1),cc.fadeTo(.2,255)),u))}),u=cc.callFunc(function(){a.runAction(cc.sequence(cc.scaleTo(.1,2.5,2.5),cc.scaleTo(.1,1.8,1.8),h)),r.runAction(cc.sequence(cc.spawn(cc.fadeTo(.2,255),cc.scaleTo(.2,3,3),cc.moveTo(.2,cc.v2(-160,-60))))),c.runAction(cc.sequence(cc.spawn(cc.fadeTo(.2,255),cc.scaleTo(.2,3,3),cc.moveTo(.2,cc.v2(140,-60)))))}),h=cc.callFunc(function(){n.runAction(cc.sequence(cc.spawn(cc.fadeTo(.2,255),cc.moveTo(.2,cc.v2(-103,158))),cc.moveTo(.2,cc.v2(-103,168)),cc.moveTo(.2,cc.v2(-103,158)))),i.runAction(cc.sequence(cc.spawn(cc.fadeTo(.2,255),cc.moveTo(.2,cc.v2(133,160))),cc.moveTo(.2,cc.v2(133,170)),cc.moveTo(.2,cc.v2(133,160)))),setTimeout(function(){o.runAction(cc.sequence(cc.spawn(cc.fadeTo(.2,255),cc.moveTo(.2,cc.v2(20,96))),cc.moveTo(.2,cc.v2(20,106)),cc.moveTo(.2,cc.v2(20,96)))),r.runAction(cc.sequence(cc.repeat(cc.sequence(cc.rotateTo(.3,10),cc.rotateTo(.3,0)),2),l)),c.runAction(cc.repeat(cc.sequence(cc.rotateTo(.3,-10),cc.rotateTo(.3,0)),2))},500)}),l=cc.callFunc(function(){t.runAction(cc.fadeTo(.2,0)),n.runAction(cc.fadeTo(.2,0)),i.runAction(cc.fadeTo(.2,0)),o.runAction(cc.fadeTo(.2,0)),c.runAction(cc.fadeTo(.2,0)),r.runAction(cc.fadeTo(.2,0)),a.runAction(cc.fadeTo(.2,0)),e.removeFromParent(!0)});t.runAction(cc.sequence(cc.spawn(cc.fadeTo(.4,255),cc.scaleTo(.4,30,30)),s)),a.runAction(cc.sequence(cc.scaleTo(.2,2,2)))}}),cc._RFpop()},{}],cardNum:[function(e,t,n){"use strict";cc._RFpush(t,"19329zUw3hCTpBk+7waBT2d","cardNum"),cc.Class({"extends":cc.Component,properties:{cards:cc.Label},onLoad:function(){this.totalCards()},totalCards:function(){var e=this.node.getChildByName("renshu"),t=this.node.getChildByName("jushu"),n=this.node.getChildByName("cards"),i=e.getComponent("singleSelect").selectedIndex,o=t.getComponent("singleSelect").selectedIndex,c=n.getComponent("singleSelect").selectedIndex,r=1,a=1,s=1;switch(i){case 0:r=1;break;case 1:r=2;break;case 2:r=3;break;case 3:r=4}switch(o){case 0:a=1;break;case 1:a=2;break;case 2:a=3}switch(c){case 0:s=1;break;default:s=0}this.cards.string=r+a}}),cc._RFpop()},{}],cardsBack:[function(e,t,n){"use strict";cc._RFpush(t,"98986IsXIdHiqLGEVIG2CWP","cardsBack"),cc.Class({"extends":cc.Component,properties:{cardsBackLayout:cc.Layout,cardsBackList:[cc.Sprite]},onLoad:function(){},showPlayCardBacks:function(){this.hideCardBacks(),this.cardsBackLayout.node.active=!0;var e=.05,t=0;this.cardsBackList.forEach(function(n){this.scheduleOnce(function(){
n.node.active=!0},t),t+=e}.bind(this))},hideCardBacks:function(){this.cardsBackLayout.node.active=!1,this.cardsBackList.forEach(function(e){e.node.active=!1})}}),cc._RFpop()},{}],cards:[function(e,t,n){"use strict";cc._RFpush(t,"0fcbct/TBxC742saKLuFviQ","cards"),cc.Class({"extends":cc.Component,properties:{spadesImages:[cc.SpriteFrame],heartsImages:[cc.SpriteFrame],clubImages:[cc.SpriteFrame],diamondImages:[cc.SpriteFrame]},onLoad:function(){}}),cc._RFpop()},{}],cellText:[function(e,t,n){"use strict";cc._RFpush(t,"9c9fd3OxWNEp4rijfjJv05t","cellText"),cc.Class({"extends":cc.Component,properties:{labelMsg:cc.Label},onLoad:function(){},setText:function(e){this.labelMsg.getComponent(cc.Label).string=e},clickAction:function(){var e=this.labelMsg.getComponent(cc.Label).string;this.onSelectAction(e)},onSelectAction:function(e){}}),cc._RFpop()},{}],changInfo:[function(e,t,n){"use strict";cc._RFpush(t,"cb225d0jXtB0JToI7yXR0hG","changInfo");var i=e("socket"),o=e("KQGlobalEvent");cc.Class({"extends":cc.Component,properties:{phoneEditBox:cc.EditBox,wxEditBox:cc.EditBox,alert:cc.Prefab,canvas:cc.Node,_userId:null},onLoad:function(){this._userId=i.instance.userInfo.id,this._registerSocketEvent()},_registerSocketEvent:function(){o.on(i.Event.ReceiveOnChangeInfo,this._ReceiveChangeInfo,this)},_ReceiveChangeInfo:function(e){var t=e.data,n="";n=t?"更改成功":"今天已经更新过了，请明天再更新",this.alertMsg(n)},clickAction:function(){var e=this.wxEditBox.string,t=this.phoneEditBox.string,n={},o="";return e||t?/(^[1-9]\d*$)/.test(t)?11!=t.length?(o="您输入的手机号码不够11位，请重新输入",t="",void this.alertMsg(o)):/(^[1-9a-zA-Z]\d*$)/.test(e)?e.length<6||e.length>20?(o="您输入的微信号格式超出范围，请输入6~20位的微信号",e="",void this.alertMsg(o)):(n.wx=e,n.phone=t,void i.sendChangeInfo(this._userId,n)):(o="您输入的微信号格式不对，请重新输入",e="",void this.alertMsg(o)):(o="您输入的手机号码格式不对，请重新输入",t="",void this.alertMsg(o)):(o="请填写微信号和手机号",t="",void this.alertMsg(o))},alertMsg:function(e){var t=cc.instantiate(this.alert);this.canvas.addChild(t);var n=t.getComponent("alert");n.setMessage(e)}}),cc._RFpop()},{KQGlobalEvent:"KQGlobalEvent",socket:"socket"}],change_mapai:[function(e,t,n){"use strict";cc._RFpush(t,"ed8274emaRL471ny4dnQ8cA","change_mapai"),cc.Class({"extends":cc.Component,properties:{mPtitle:cc.Label,_cards:[],renshuSelect:cc.Node},onLoad:function(){var e=3,t=5;cc.set&&(e=cc.set.setting7[0],t=cc.set.setting7[1]),this._cards=[e,t],this.mp(e,t)},change:function(){var e=this.renshuSelect.getComponent("singleSelect").selectedIndex,t=Math.ceil(40*Math.random()/10),n=Math.ceil(130*Math.random()/10),i=[t,n];this._cards=i,this.mp(t,n,e)},mp:function(e,t,n){var i="单码",o=["方块","梅花","红桃","黑桃"],c=["1","2","3","4","5","6","7","8","9","10","J","Q","K"];if(n){var r=4;e>=r-n+1&&(i="双码")}this.mPtitle.string=o[e-1]+c[t-1]+i}}),cc._RFpop()},{}],checkSelect:[function(e,t,n){"use strict";cc._RFpush(t,"974a0c6jzZPRI5AeaAb4U0z","checkSelect"),cc.Class({"extends":cc.Component,properties:{selectedIndex:0,selectedNode:cc.Node},onLoad:function(){this.selected=!0,this.selectedIndex=0,this.selectedNode.active=!0},clickAction:function(e,t){this.selected=!this.selected,this.selectedNode.active=this.selected,this.selectedIndex=this.selected?0:null}}),cc._RFpop()},{}],choujiang:[function(e,t,n){"use strict";cc._RFpush(t,"f64e0whLhNLmbOHtPpK94CG","choujiang");e("socket");cc.Class({"extends":cc.Component,properties:{option:{"default":[],type:cc.Node}},onLoad:function(){},clickBtnchoujiang:function(){for(var e=0;e<this.option.length;e++)this.option[e].opacity=255;var t=0;this._tishi=this.node.getChildByName("choujiang_bg").getChildByName("tishi"),this._card_num=cc.find("Canvas/user/shop_bg/card_num");var n=this._card_num.getComponent(cc.Label);this.callback=function(){0==t?(this.option[t].opacity=128,this.option[this.option.length-1].opacity=255):1==t?(this.option[t].opacity=128,this.option[t-1].opacity=255):(this.option[t].opacity=128,this.option[t-1].opacity=255),t++,t==this.option.length&&(t=0)},n.string<20?this._tishi.active=!0:(this.schedule(this.callback,.05),this.schedule(function(){this.unschedule(this.callback);for(var e=0;e<this.option.length;e++)this.option[e].opacity=255;var e=Math.floor(12*Math.random());this.option[e].opacity=128},3,0,1))},clickBtnComfirm:function(){this._tishi.active=!1}}),cc._RFpop()},{socket:"socket"}],create_btn_anima:[function(e,t,n){"use strict";cc._RFpush(t,"df337riLglP3YcI/IJFXecj","create_btn_anima"),cc.Class({"extends":cc.Component,properties:{},onLoad:function(){},loadCardSpriteFrame:function(e,t){this._loadCardFrame(e,t)},_cardFullName:function(e){var t=e;return t.startsWith("public-pic-card-poker")||(t="public-pic-card-poker-"+t),t},_loadCardFrame:function(e,t){cc.assert(t),cc.loader.loadRes("play/hall/public/all_effect_ttw_main",cc.SpriteAtlas,function(n,i){if(n)return void t(null,n);e=this._cardFullName(e);var o=i.getSpriteFrame(e);t(o)}.bind(this))},test:function(){}}),cc._RFpop()},{}],fecha:[function(e,t,n){"use strict";cc._RFpush(t,"e517077l0xMarB9uQsXGzvk","fecha"),function(e){function n(e,t){for(var n=[],i=0,o=e.length;i<o;i++)n.push(e[i].substr(0,t));return n}function i(e){return function(t,n,i){var o=i[e].indexOf(n.charAt(0).toUpperCase()+n.substr(1).toLowerCase());~o&&(t.month=o)}}function o(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e}var c={},r=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,a=/\d\d?/,s=/\d{3}/,u=/\d{4}/,h=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,l=/\[([^]*?)\]/gm,d=function(){},f=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],p=["January","February","March","April","May","June","July","August","September","October","November","December"],v=n(p,3),g=n(f,3);c.i18n={dayNamesShort:g,dayNames:f,monthNamesShort:v,monthNames:p,amPm:["am","pm"],DoFn:function(e){return e+["th","st","nd","rd"][e%10>3?0:(e-e%10!==10)*e%10]}};var m={D:function(e){return e.getDate()},DD:function(e){return o(e.getDate())},Do:function(e,t){return t.DoFn(e.getDate())},d:function(e){return e.getDay()},dd:function(e){return o(e.getDay())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return e.getMonth()+1},MM:function(e){return o(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},YY:function(e){return String(e.getFullYear()).substr(2)},YYYY:function(e){return e.getFullYear()},h:function(e){return e.getHours()%12||12},hh:function(e){return o(e.getHours()%12||12)},H:function(e){return e.getHours()},HH:function(e){return o(e.getHours())},m:function(e){return e.getMinutes()},mm:function(e){return o(e.getMinutes())},s:function(e){return e.getSeconds()},ss:function(e){return o(e.getSeconds())},S:function(e){return Math.round(e.getMilliseconds()/100)},SS:function(e){return o(Math.round(e.getMilliseconds()/10),2)},SSS:function(e){return o(e.getMilliseconds(),3)},a:function(e,t){return e.getHours()<12?t.amPm[0]:t.amPm[1]},A:function(e,t){return e.getHours()<12?t.amPm[0].toUpperCase():t.amPm[1].toUpperCase()},ZZ:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+o(100*Math.floor(Math.abs(t)/60)+Math.abs(t)%60,4)}},C={D:[a,function(e,t){e.day=t}],Do:[new RegExp(a.source+h.source),function(e,t){e.day=parseInt(t,10)}],M:[a,function(e,t){e.month=t-1}],YY:[a,function(e,t){var n=new Date,i=+(""+n.getFullYear()).substr(0,2);e.year=""+(t>68?i-1:i)+t}],h:[a,function(e,t){e.hour=t}],m:[a,function(e,t){e.minute=t}],s:[a,function(e,t){e.second=t}],YYYY:[u,function(e,t){e.year=t}],S:[/\d/,function(e,t){e.millisecond=100*t}],SS:[/\d{2}/,function(e,t){e.millisecond=10*t}],SSS:[s,function(e,t){e.millisecond=t}],d:[a,d],ddd:[h,d],MMM:[h,i("monthNamesShort")],MMMM:[h,i("monthNames")],a:[h,function(e,t,n){var i=t.toLowerCase();i===n.amPm[0]?e.isPm=!1:i===n.amPm[1]&&(e.isPm=!0)}],ZZ:[/([\+\-]\d\d:?\d\d|Z)/,function(e,t){"Z"===t&&(t="+00:00");var n,i=(t+"").match(/([\+\-]|\d\d)/gi);i&&(n=+(60*i[1])+parseInt(i[2],10),e.timezoneOffset="+"===i[0]?n:-n)}]};C.dd=C.d,C.dddd=C.ddd,C.DD=C.D,C.mm=C.m,C.hh=C.H=C.HH=C.h,C.MM=C.M,C.ss=C.s,C.A=C.a,c.masks={"default":"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},c.format=function(e,t,n){var i=n||c.i18n;if("number"==typeof e&&(e=new Date(e)),"[object Date]"!==Object.prototype.toString.call(e)||isNaN(e.getTime()))throw new Error("Invalid Date in fecha.format");t=c.masks[t]||t||c.masks["default"];var o=[];return t=t.replace(l,function(e,t){return o.push(t),"??"}),t=t.replace(r,function(t){return t in m?m[t](e,i):t.slice(1,t.length-1)}),t.replace(/\?\?/g,function(){return o.shift()})},c.parse=function(e,t,n){var i=n||c.i18n;if("string"!=typeof t)throw new Error("Invalid format in fecha.parse");if(t=c.masks[t]||t,e.length>1e3)return!1;var o=!0,a={};if(t.replace(r,function(t){if(C[t]){var n=C[t],c=e.search(n[0]);~c?e.replace(n[0],function(t){return n[1](a,t,i),e=e.substr(c+t.length),t}):o=!1}return C[t]?"":t.slice(1,t.length-1)}),!o)return!1;var s=new Date;a.isPm===!0&&null!=a.hour&&12!==+a.hour?a.hour=+a.hour+12:a.isPm===!1&&12===+a.hour&&(a.hour=0);var u;return null!=a.timezoneOffset?(a.minute=+(a.minute||0)-+a.timezoneOffset,u=new Date(Date.UTC(a.year||s.getFullYear(),a.month||0,a.day||1,a.hour||0,a.minute||0,a.second||0,a.millisecond||0))):u=new Date(a.year||s.getFullYear(),a.month||0,a.day||1,a.hour||0,a.minute||0,a.second||0,a.millisecond||0),u},"undefined"!=typeof t&&t.exports?t.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):e.fecha=c}(this),cc._RFpop()},{}],game:[function(e,t,n){"use strict";cc._RFpush(t,"45811N61jFFA6UrygQla5+x","game"),cc.Class({"extends":cc.Component,properties:{messageNode:cc.Node,playNode:cc.Node},onLoad:function(){},showMessageAlert:function(){this.messageNode.active=!0;var e=this.messageNode.getComponent(cc.Animation);e.play("pop")},dismissMessageAlert:function(){var e=this;this.scheduleOnce(function(){e.messageNode.active=!1},.3)}}),cc._RFpop()},{}],hall_btn_anima:[function(e,t,n){"use strict";cc._RFpush(t,"b8a30Txa91I27+7HOFLyJA6","hall_btn_anima"),cc.Class({"extends":cc.Component,properties:{create_anima:{type:cc.SpriteFrame,"default":[]}},onLoad:function(){}}),cc._RFpop()},{}],hall:[function(e,t,n){"use strict";cc._RFpush(t,"1e6741Q2VFGDLupV88mg60Z","hall");var i=e("manager"),o=e("socket"),c=e("KQGlobalEvent"),r=e("AudioManager"),a=e("KQNativeInvoke"),s=e("Playback"),u=cc.Class({"extends":cc.Component,properties:{shopAlertNode:cc.Node,createNode:cc.Node,joinNode:cc.Node,gengxin:cc.Node,alertPrefab:cc.Prefab,tsSingleSelect:[cc.Node],tsCheckSeclect:[cc.Node],selectMoShi:cc.Node,selectGuiPai:cc.Node,overTime:cc.Node,labelBanner:cc.Label,recordNode:cc.Node,waitingPrefab:cc.Prefab,setting:cc.Node,avatarNode:cc.Node,nickNameLabel:cc.Label,cardNumberLabel:cc.Label,userIdLabel:cc.Label,codeLabel:cc.Label,logoutNode:cc.Node,recordMsgNode:cc.Node,feedbackEditBox:cc.EditBox,feedbackNode:cc.Node,wxshare:cc.Node,_userId:0,_openId:null,_help:null,_close:null,iosUrl:null,aUrl:null},statics:{lastHallInfo:null,cacheImageInfo:null},onLoad:function(){this.keyBackListen(),cc.sys.isBrowser&&(window.shareToTimeLine&&window.shareToTimeLine(),window.shareToSession&&window.shareToSession()),cc.sys.localStorage.removeItem("timestamp");var e=this.node.getChildByName("room_bg"),t=cc.director.getWinSizeInPixels(),n=t.width/e.width,i=t.height/e.height,c=Math.max(n,i);e.scaleX=c,e.scaleY=c,this.clearLocalStorage(),cc.from={},cc.from.isUseMa=!0,cc.from.ma=0,cc.isRoomViewShow=!1,this._btn=this.node.getChildByName("btn"),this._buttons=this.node.getChildByName("buttons");var a=cc.sys.localStorage.getItem("bgVolume");null!=a&&parseInt(a)&&r.instance.playMusic();var h=cc.sys.localStorage.getItem("bgSound");if(0==h){var l=cc.find("AudioManager");l=l.getComponent("AudioManager"),l.setEffectMusicVolum(h)}s.instance.removePlaybackDatas(),u.cacheImageInfo=u.cacheImageInfo||{},this._registerSocketEvent(),this._startBannerAnimation(),this._initJoinRoom(),this._userId=o.instance.userInfo.id,this._openId=o.instance.userInfo.openId,this._inviteCode=o.instance.userInfo.inviteCode;var d=this;if(this.socket=cc.find("GameSocket").getComponent("socket"),this.socket.receviceMessage=function(e){JSON.parse(e)},this.socket.connectionSuccess=function(){d.hiddenNetworkMessage(),d.hiddenCheckMessage()},this.socket.connectionDisconnect=function(){d.showNetworkMessage("网络链接断开，重新连接中...")},this.socket.checkNetworkNow=function(){d.showCheckMessage("检查网络中...")},this.socket.checkNetworkEnd=function(){d.hiddenCheckMessage(),d.hiddenNetworkMessage()},this.updateUserInfo(),o.sendGetUserInfo(this._userId,this._openId),this.schedule(function(){o.sendGetUserInfo(this._userId,this._openId)}.bind(this),10),o.sendGetHallInfo(this.socket.userInfo.id),u.lastHallInfo&&this.updateBanner(u.lastHallInfo.info),cc.onShareWXResp=null,cc.director.preloadScene("play",function(){cc.director.preloadScene("login")}),null!=cc.joinDesk){if(!cc.joinDesk.result){var f=cc.joinDesk.reason;this.alertMessage(f)}cc.joinDesk=null}null!=cc.qingli&&(this.alertMessage("您被房主请出房间"),cc.qingli=null)},keyBackListen:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,function(e){e.keyCode==cc.KEY.back&&(a.isNativeIOS()||jsb.reflection.callStaticMethod(a.ANDRIODClassName,"backToDesk","()V"))},this)},clickWxShare:function(){if(cc.sys.isNative){var e=cc.sys.localStorage.getItem("shareTitle"),t=cc.sys.localStorage.getItem("desc"),n=cc.sys.localStorage.getItem("recordId"),i="";if(n&&(i="recordId="+n),a.isNativeIOS())jsb.reflection.callStaticMethod(a.IOSClassName,"wxShareFriend",i,t,e);else{var o="(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V";jsb.reflection.callStaticMethod(a.ANDRIODClassName,"wxShareFriend",o,i,t,e)}}else this.wxshare.active=!0},shareHallTimeline:function(){if(cc.sys.isNative){var e=cc.sys.localStorage.getItem("shareTitle"),t=cc.sys.localStorage.getItem("desc"),n=cc.sys.localStorage.getItem("recordId"),i="";if(n&&(i="recordId="+n),a.isNativeIOS())jsb.reflection.callStaticMethod(a.IOSClassName,"wxShareHallTimeline",i,t,e);else{var o="(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V";jsb.reflection.callStaticMethod(a.ANDRIODClassName,"wxShareHallTimeline",o,i,t,e)}}else this.wxshare.active=!0},shareBg:function(){cc.sys.isNative||(this.wxshare.active=!1)},clearLocalStorage:function(){var e="开房玩[米斗十三水]",t="开好房了，就等你们一起来[米斗十三水]啦！晚了位置就没了哟~";cc.sys.localStorage.removeItem("roomId"),cc.sys.localStorage.setItem("shareTitle",e),cc.sys.localStorage.setItem("desc",t)},onDestroy:function(){this.socket.receviceMessage=function(){},this.socket.connectionSuccess=function(){},this.socket.connectionDisconnect=function(){},this.socket.checkNetworkNow=function(){},this.socket.checkNetworkEnd=function(){},c.offTarget(this)},_registerSocketEvent:function(){c.on(o.Event.JoinDesk,this._jiinRoomSocketCallback,this),c.on(o.Event.ReceiveDeskInfo,this._jiinRoomSocketCallback,this),c.on(o.Event.ReceiveCreateDesk,this._createRoomSocketCallback,this),c.on(o.Event.ReceiveHallInfo,this._socketReceiveHallInfo,this),c.on(o.Event.ReceiveGetUserInfo,this._socketReceiveUserInfo,this),c.on(o.Event.SocketDisconnect,this._socketDisconnect,this),c.on(o.Event.SocketConnectSuccessed,this._socketConnected,this)},guanzhu:function(){var e="http://127.0.0.1/gzh/index.html";cc.sys.openURL(e)},_startBannerAnimation:function(){var e=this.labelBanner.getComponent(cc.Animation);e.play("banner")},downLoad:function(){var e="https://fir.im/5tne";cc.sys.openURL(e)},_initJoinRoom:function(){var e=this.joinNode.getComponent("joinRoom");e.callbackJoinRoom=function(e){var t=o.instance.userInfo.id;o.sendJoinDesk(e,t)}},_jiinRoomSocketCallback:function(e){var t=this;if(!cc.isRoomViewShow)if(this.hiddenWaitingMessage(),e.result)!function(){null==cc.from&&(cc.from={});var n=t.joinNode.getComponent("joinRoom");t.joinNode.getComponent("alert").setAlertCallbck(function(){n.clickClear()}),cc.from.ma=e.data.maPai,cc.director.loadScene("play")}();else{var n=this._joinReasonMap(e.data.reason);this.alertMessage(n)}},_socketReceiveHallInfo:function(e){if(!cc.isRoomViewShow&&e.result){var t=e.data;u.lastHallInfo=t;var n=t.isIOS,i=t.isA,o=t.vIOS,c=t.vA;this.iosUrl=t.iosUrl,this.aUrl=t.aUrl,cc.sys.isNative&&(a.isNativeIOS()?1==n&&"1.0.3"!=o&&(this.gengxin.active=!0):1==i&&"1.0.4"!=c&&(this.gengxin.active=!0));var r=(t.broadcast,t.info);this.updateBanner(r)}},downloadNewVersion:function(){a.isNativeIOS()?cc.sys.openURL(this.iosUrl):cc.sys.openURL(this.aUrl)},_createRoomSocketCallback:function(e){cc.isRoomViewShow||(this.hiddenWaitingMessage(),e.result?cc.director.loadScene("play"):this.alertMessage("您的钻石不足"))},_joinReasonMap:function(e){var t={notExist:"房间不存在!",cardNumber:"您房卡不足!"},n=t[e]||"房间已满!";return n},shopAction:function(){var e=this.shopAlertNode.getComponent("alert");e.alert()},alertMessage:function(e){var t=cc.instantiate(this.alertPrefab);this.node.addChild(t);var n=t.getComponent("alert");n.setMessage(e),n.alert()},updateBanner:function(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0];null!=this.labelBanner&&(this.labelBanner.string=e)},createDoneAction:function(){for(var e={},t=this,n=["setting1","setting2","setting4","setting5"],i=0;i<this.tsSingleSelect.length;i++){var o=t.tsSingleSelect[i].getComponent("singleSelect").selectedIndex;e[n[i]]=o}e.setting3=this.selectMoShi.getComponent("selectMoShi")._select,e.setting6=this.overTime.getComponent("overTime")._selected,e.setting3[3]||(e.setting5=0),e.setting8=null,e.setting7=this.selectMoShi.getComponent("change_mapai")._cards,cc.set=e,e.userId=this.socket.userInfo.id,this.socket.sendMessage("createDesk",e),this.createNode.getComponent("alert").dismissAction(),this.showWaitingMessage("创建中..."),this.scheduleOnce(function(){t.hiddenWaitingMessage()},2)},clickRecord:function(){var e=this.recordNode.getComponent("alert");e.alert(),o.sendGetRecrod(o.instance.userInfo.id)},clickPlayRule:function(){this.help=this.node.getChildByName("help");var e=this.help.getComponent("alert");e.alert()},clickPlay:function(){cc.clickOut&&cc.director.loadScene("play")},clickCancelLation:function(){this.logoutNode.getComponent("alert").alert()},logoutAction:function(){i.setUserInfo(""),cc.director.loadScene("login"),u.cacheImageInfo=null},exitAction:function(){return i.setUserInfo(""),cc.sys.isNative?(a.isNativeIOS()?jsb.reflection.callStaticMethod(a.IOSClassName,"exitApp"):a.isNativeAndroid()&&jsb.reflection.callStaticMethod(a.ANDRIODClassName,"exitApp","()V"),void cc.director.end()):(cc.director.loadScene("login"),void(u.cacheImageInfo=null))},_socketReceiveUserInfo:function(e){if(!cc.isRoomViewShow){if(!this.socket.userInfo)return void cc.error("this.socket.userInfo 为空!!!");this.setting.getComponent("Setting")._phone=e.data.phone?e.data.phone:null,this.setting.getComponent("Setting").phone.string=e.data.phone?e.data.phone:"无",this.nickNameLabel.string=e.data.nickname,this.userIdLabel.string="ID: "+e.data.id,this.cardNumberLabel.string=e.data.cardNumber;var t=this.avatarNode.getComponent(cc.Sprite);cc.loader.load({url:e.data.avatarUrl,type:"jpg"},function(e,n){if(!e){var i=new cc.SpriteFrame(n);t.spriteFrame=i}})}},_socketDisconnect:function(){this.showNetworkMessage("网络链接断开，重新连接中...")},_socketConnected:function(){this.hiddenNetworkMessage()},updateUserInfo:function(){var e=this.socket.userInfo;if(!e)return void cc.error("this.socket.userInfo 为空!!!");this.nickNameLabel.string=e.nickname,this.userIdLabel.string="ID: "+e.id,this.cardNumberLabel.string=e.cardNumber;var t=e.avatarUrl+".jpg",n=this.avatarNode.getComponent(cc.Sprite),i=u.cacheImageInfo[t];if(i){var o=new cc.SpriteFrame(i);if(o)return void(n.spriteFrame=o)}cc.loader.load({url:e.avatarUrl,type:"jpg"},function(e,i){if(!e){var o=new cc.SpriteFrame(i);n.spriteFrame=o,u.cacheImageInfo[t]=i}})},feedbackAcion:function(){var e=this.socket.userInfo.id,t=this.feedbackEditBox.string;t.length>0&&(this.feedbackNode.getComponent("alert").dismissAction(),o.sendFeedback(e,t),this.feedbackEditBox.string="")},showWaitingMessage:function(e){null!=this.waitingNode&&cc.sys.isNative&&cc.sys.isObjectValid(this.waitingNode)&&(this.waitingNode.destory(),this.waitingNode=null),this.waitingNode=cc.instantiate(this.waitingPrefab),this.node.addChild(this.waitingNode);var t=this.waitingNode.getComponent("alert");t.setMessage(e),t.alert()},hiddenWaitingMessage:function(){null!=this.waitingNode&&this.waitingNode.getComponent("alert").dismissAction()},showNetworkMessage:function(e){if(this.networkNode&&this.networkNode.active){var t=this.networkNode.getComponent("alert");if(t.getMessage()==e)return}if(null!=this.networkNode){var n=cc.removeSelf();this.networkNode.runAction(n),this.networkNode=null}this.networkNode=cc.instantiate(this.waitingPrefab),this.node.addChild(this.networkNode);var i=this.networkNode.getComponent("alert"),o=this;i.onDismissComplete=function(){o.networkNode=null},i.setMessage(e),i.alert()},hiddenNetworkMessage:function(){null!=this.networkNode&&this.networkNode.getComponent("alert").dismissAction()},showCheckMessage:function(e){if(this.checkNode&&this.checkNode.active){var t=this.checkNode.getComponent("alert");if(t.getMessage()==e)return}else;if(null!=this.checkNode){var n=cc.removeSelf();this.checkNode.runAction(n),this.checkNode=null}this.checkNode=cc.instantiate(this.waitingPrefab),this.node.addChild(this.checkNode);var i=this.checkNode.getComponent("alert"),o=this;i.onDismissComplete=function(){o.checkNode=null},i.setMessage(e),i.alert()},hiddenCheckMessage:function(){null!=this.checkNode&&this.checkNode.getComponent("alert").dismissAction()},onBtnClick:function(){this._buttons.active?this._buttons.active=!1:this._buttons.active=!0}});t.exports=u,cc._RFpop()},{AudioManager:"AudioManager",KQGlobalEvent:"KQGlobalEvent",KQNativeInvoke:"KQNativeInvoke",Playback:"Playback",manager:"manager",socket:"socket"}],help:[function(e,t,n){"use strict";cc._RFpush(t,"09981CwNMZOI4DHUg8u9kcj","help"),cc.Class({"extends":cc.Component,properties:{play_method_before:cc.Node,play_method_content_label:cc.Node,introduce_pai_before:cc.Node,details:cc.Node,caozuo_before:cc.Node,caozuo_content:cc.Node,_btn:null,_content:null,_buttonCom:null,_play_method_button:null,_introduce_pai_button:null,_caozuo_button:null},onLoad:function(){},onBtnPlayMethodClick:function(){this._content[0].active=!0},onBtnIntroducePaiClick:function(){},onBtnCaozuoClick:function(){}}),cc._RFpop()},{}],inviteCode:[function(e,t,n){"use strict";cc._RFpush(t,"777f9/eB7RKK4aO7FmNYFgO","inviteCode");var i=e("socket");cc.Class({"extends":cc.Component,properties:{labelNumbers:[cc.Label],callbackInviteCode:""},onLoad:function(){this.clickClear()},clickClear:function(){this.labelNumbers.forEach(function(e){e.string=""})},clickNumber:function(e,t){var n=this._lastEmptyLabel();if(n){n.string=t;var o=(null==this._lastEmptyLabel(),this._inviteNumber());if(6==o.length){i.instance.userInfo.id;this.callbackInviteCode=o}}},sendCode:function(){var e=i.instance.userInfo.id,t=this.callbackInviteCode;t&&6==t.length&&(i.sendInviteCode(t,e),this.callbackInviteCode="")},clickDeleteOne:function(){var e=this._lastNumberLabel();e&&(e.string="")},_lastEmptyLabel:function(){for(var e in this.labelNumbers){var t=this.labelNumbers[e];if(null==t.string||t.string.length<=0)return t}return null},_lastNumberLabel:function(){for(var e=this.labelNumbers.length-1;e>=0;--e){var t=this.labelNumbers[e];if(t.string&&t.string.length>0)return t}return null},_inviteNumber:function(){return this.labelNumbers.reduce(function(e,t){return e+(t.string||"")},"")}}),cc._RFpop()},{socket:"socket"}],joinRoom:[function(e,t,n){"use strict";cc._RFpush(t,"d5dcb9CJvpPJpnsCQ/q197x","joinRoom"),cc.Class({"extends":cc.Component,properties:{labelNumbers:[cc.Label],callbackJoinRoom:null},onLoad:function(){this.clickClear()},clickNumber:function(e,t){var n=this._lastEmptyLabel();if(n){n.string=t;var i=null==this._lastEmptyLabel();if(i&&this.callbackJoinRoom){var o=this._roomNumber();this.callbackJoinRoom(o)}}},clickClear:function(){this.labelNumbers.forEach(function(e){e.string=""})},clickDeleteOne:function(){var e=this._lastNumberLabel();e&&(e.string="")},_lastEmptyLabel:function(){for(var e in this.labelNumbers){var t=this.labelNumbers[e];if(null==t.string||t.string.length<=0)return t}return null},_lastNumberLabel:function(){for(var e=this.labelNumbers.length-1;e>=0;--e){var t=this.labelNumbers[e];if(t.string&&t.string.length>0)return t}return null},_roomNumber:function(){return this.labelNumbers.reduce(function(e,t){return e+(t.string||"")},"")}}),cc._RFpop()},{}],launch:[function(e,t,n){"use strict";cc._RFpush(t,"0efb2ngHglDtK2A+W4dmfzt","launch"),cc.Class({"extends":cc.Component,properties:{},onLoad:function(){this.scheduleOnce(function(){cc.director.loadScene("login")},.5)}}),cc._RFpop()},{}],login:[function(e,t,n){(function(n){"use strict";cc._RFpush(t,"9c72dn88ytPxZWrZRaxt5cr","login");var i=e("manager"),o=(e("KQCard"),e("socket")),c=(e("KQCardFindTypeExtension"),e("KQGlobalEvent")),r=(e("AudioManager"),e("KQNativeInvoke")),a=e("KQGlabolSocketEventHander"),s="wx8267b852c9dd3d22",u="",h="http%3A%2F%2F127.0.0.1%2Ftest%2Findex.php",l="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+s+"&redirect_uri="+h+"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect";cc.Class({"extends":cc.Component,properties:{alertPrefab:cc.Prefab,canvasNode:cc.Node,loadingNode:cc.Node,waitingPrefab:cc.Prefab,recordInfo:cc.Prefab,label:cc.Label},goUpdateAction:function(){r.isNativeIOS()?jsb.reflection.callStaticMethod("AppController","downloadNewVersion:",this.iosUrl):jsb.reflection.callStaticMethod("com/gongpa/ssz/AppActivity","downloadNewVersion","(Ljava/lang/String;)V",this.androidUrl)},checkVersion:function(e){if(cc.info1=e.version,this.iosUrl=e.iosUrl,this.androidUrl=e.androidUrl,r.isNativeIOS()){this.versionEnable=!0;var t=this,n=i.getUserInfo();0==n.length&&(this.loginEnable=!0),this.scheduleOnce(function(){n.length>0&&(this.loginEnable=!0,t.loginAction())},.5)}else if(r.isNativeAndroid()){this.versionEnable=!0;var t=this,n=i.getUserInfo();0==n.length&&(this.loginEnable=!0),this.scheduleOnce(function(){n.length>0&&(this.loginEnable=!0,t.loginAction())},.5)}else{this.versionEnable=!0;var t=this;this.scheduleOnce(function(){if(!cc.sys.isNative){var e=t.getQueryString("recordId");if(e)return void o.sendGetRecrodFromId(e);var n=t.getQueryString("roomId");if(n){var c=i.getUserInfo();if(c.length>0){var r=JSON.parse(c);return void(r.errcode?i.setUserInfo(""):t.sendLoginRequest(r))}t._get_HREF(n)}}var c=i.getUserInfo();if(c.length>0){var r=null;try{r=JSON.parse(c)}catch(a){i.setUserInfo(""),r=null}!r||r.errcode?i.setUserInfo(""):(this.loginEnable=!0,t.loginAction())}else if(!cc.sys.isNative){var s=t.getQueryString("code"),n=t.getQueryString("roomId");if(n){var c=i.getUserInfo();if(c.length>0){var r=JSON.parse(c);return void(r.errcode?i.setUserInfo(""):t.sendLoginRequest(r))}t._get_HREF(n)}if(s)try{var u=new XMLHttpRequest,h="./get_token.php";u.open("POST",h,!0),u.setRequestHeader("Content-type","application/x-www-form-urlencoded"),u.onreadystatechange=function(){if(4==u.readyState&&(200==u.status||304==u.status)){var e=JSON.parse(u.responseText);e.errcode||(i.setUserInfo(u.responseText),t.sendLoginRequest(e))}},u.send("code="+s)}catch(a){}}},.5)}},keyBackListen:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,function(e){e.keyCode==cc.KEY.back&&(r.isNativeIOS()||jsb.reflection.callStaticMethod(r.ANDRIODClassName,"backToDesk","()V"))},this)},onLoad:function(){if(this.keyBackListen(),!cc.sys.isNative&&cc.sys.isMobile){var e=cc.find("Canvas");e.getComponent(cc.Canvas)}a.start(),this.socket=cc.find("GameSocket").getComponent("socket");var t=this;this.loginEnable=!1,this.socket.receviceMessage=function(e){var n=JSON.parse(e);if("checkVersion"==n.action)try{t.checkVersion(n.data)}catch(i){}else if("login"==n.action&&n.result){if(t.socket.userInfo=n.data,!cc.sys.isNative){var c=t.getQueryString("roomId");if(c){var r=n.data.id;return void o.sendLoginJoin(c,r)}}t._loadingLabel("登录中"),n.data.roomId.length>0?cc.director.loadScene("play"):cc.director.loadScene("hall")}},this._registerSocketEvent(),this.socket.getWxInfo=function(e){i.setUserInfo(e);var n=JSON.parse(e);t.scheduleOnce(function(){t.sendLoginRequest(n)},1)}},_registerSocketEvent:function(){c.on(o.Event.ReceiveLoginJoin,this._LoginJoin,this),c.on(o.Event.ReceiveRecordId,this._ReceiveRecordId,this),c.on(o.Event.ReceiveNoUionid,this._ReceiveNoUionid,this)},_get_HREF:function(e){e!=u&&(u=e,e="%3froomId%3d"+e,h+=e,l="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+s+"&redirect_uri="+h+"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect")},_ReceiveNoUionid:function(e){i.setUserInfo("");var t=this,n=this.getQueryString("roomId");n&&this._get_HREF(n),setTimeout(function(){t.loadingNode.parent.active=!1,t.loadingNode.stopAllActions()},2e3),this._loadingLabel("登录失败，请重新登录")},_ReceiveRecordId:function(e){var t=e.data;if(t.recordMsg.length>0){var n=t.recordMsg[0],i=JSON.parse(n.playersInfo).players,o=cc.instantiate(this.recordInfo),c=o.getComponent("TotalGameResult");i.sort(function(e,t){return t.totalScore-e.totalScore}),c.setPlayerInfos(i,n),c._clickBtn(),o.getComponent("alert").alert(),this.node.addChild(o)}},_LoginJoin:function(e){if(this._loadingLabel("进入房间，正在为您请求数据"),e.result)null==cc.from&&(cc.from={}),cc.from.ma=e.data.maPai,cc.director.loadScene("play");else{cc.joinDesk={},cc.director.loadScene("hall");var t=this._joinReasonMap(e.data.reason);cc.joinDesk.result=e.result,cc.joinDesk.reason=t}},_joinReasonMap:function(e){var t={notExist:"房间不存在!",cardNumber:"您房卡不足!"},n=t[e]||"房间已满!";return n},getQueryString:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(t);return null!=n?unescape(n[2]):null},agreements:function(){this.agreementNode.active=!0,this.agreementLabel.node.y=0},onDestroy:function(){this.socket.receviceMessage=function(){}},_loadingLabel:function(e){this.label.string=e},sendLoginRequest:function(e){this.loadingNode.parent.active=!0,this.loadingNode.runAction(cc.repeatForever(cc.rotateBy(2,360))),this.socket.sendMessage("login",e)},loginAction:function(){var e=i.getUserInfo();if(e.length>0){var t=JSON.parse(e);return void this.sendLoginRequest(t)}cc.sys.isNative?r.isNativeIOS()?jsb.reflection.callStaticMethod(r.IOSClassName,"wxLogin"):r.isNativeAndroid()&&jsb.reflection.callStaticMethod(r.ANDRIODClassName,"wxLogin","()V"):window.location.href=l},loginYkAction:function(){var e=new Date,t="'"+e.toLocaleString()+"'",i=new n(t).toString("base64"),o='{"openid":"'+i+'","nickname":"游客","sex":1,"language":"zh_CN","city":"Changsha","province":"Hunan","country":"CN","headimgurl":"http://wx.qlogo.cn/mmopen/BVyz4R8q6puJibEv1hrsaTmIKQhkaTS9FyvcevvC5hlxFnfOuspDjicG0GtzyJXOhNT7g1WZDeCDQhnRdEOgz3QMnP0F9iboQGy/0","privilege":[]}',c=JSON.parse(o);this.sendLoginRequest(c)},showWaitingMessage:function(e){if(null!=this.waitingNode&&cc.sys.isNative&&cc.isValid(this.waitingNode)){if(e==this.waitingNode.getComponent("alert").getMessage())return;this.waitingNode.removeFromParent(),this.waitingNode=null}this.waitingNode=cc.instantiate(this.waitingPrefab),this.canvasNode.addChild(this.waitingNode);var t=this.waitingNode.getComponent("alert");t.setMessage(e),t.alert()},hiddenWaitingMessage:function(){null!=this.waitingNode&&this.waitingNode.getComponent("alert").dismissAction()},protocolAction:function(){cc.log("protocol action")}}),cc._RFpop()}).call(this,e("buffer").Buffer)},{AudioManager:"AudioManager",KQCard:"KQCard",KQCardFindTypeExtension:"KQCardFindTypeExtension",KQGlabolSocketEventHander:"KQGlabolSocketEventHander",KQGlobalEvent:"KQGlobalEvent",KQNativeInvoke:"KQNativeInvoke",buffer:2,manager:"manager",socket:"socket"}],maPai:[function(e,t,n){"use strict";cc._RFpush(t,"8b896xHkCtE1IzD8BDK4cWL","maPai"),
cc.Class({"extends":cc.Component,properties:{maPaiSprite:[cc.SpriteFrame],spriteNode:cc.Sprite,labelNode:cc.Node},onLoad:function(){}}),cc._RFpop()},{}],manager:[function(e,t,n){"use strict";cc._RFpush(t,"4a47fj0J/VHup24OT7njkko","manager"),t.exports={version:"v1.0.0",setUserInfo:function(e){cc.sys.localStorage.setItem("userinfo",e)},getUserInfo:function(){var e=cc.sys.localStorage.getItem("userinfo");return e?e:""},setMusicValue:function(e){cc.sys.localStorage.setItem("musicVolumn",e)},getMusicValue:function(){var e=cc.sys.localStorage.getItem("musicVolumn");return e?e:1},setMusicEffectValue:function(e){cc.sys.localStorage.setItem("musicEffectVolumn",e)},getMusicEffectValue:function(){var e=cc.sys.localStorage.getItem("musicEffectVolumn");return e?e:1}},cc._RFpop()},{}],overTime:[function(e,t,n){"use strict";cc._RFpush(t,"48748u5hxdOD4WTPWQqSQwN","overTime"),cc.Class({"extends":cc.Component,properties:{nodes:[cc.Node],_selected:1},onLoad:function(){var e=this;this._select=!0;var t=0;cc.set&&(t=cc.set.setting6,this._selected=this._select=t);for(var n=0;n<this.nodes.length;n++){var i=this._select;this._selected=this._select,this.nodes[n].getComponent("select").setSelected(i);var o=this.nodes[n].getChildByName("title");e._select?o.color=new cc.Color(13,210,222):o.color=new cc.Color(255,255,255)}for(var n=0;n<this.nodes.length;n++){var c=this.nodes[n].getComponent("select");c.index=n,c.clickAction=function(){this.setSelected(e._selected=e._select=!e._select);var t=this.node.getChildByName("title");e._select?t.color=new cc.Color(13,210,222):t.color=new cc.Color(255,255,255),e.onSelectChange(this.index)}}"orders"==this.node._name&&cc.set},remember_set:function(e){for(var t=0;t<this.nodes.length;t++)if(this.nodes[t].getComponent("select").setSelected(e),this.nodes[t].getChildByName("title").color=new cc.Color(255,255,255),e){var n=this.nodes[0].getChildByName("title");n.color=new cc.Color(13,210,222)}},onSelectChange:function(e){}}),cc._RFpop()},{}],play:[function(e,t,n){"use strict";cc._RFpush(t,"16c65H2Pw9PBaQSvw69LGLQ","play");var i=e("socket"),o=e("KQGlobalEvent"),c=(e("ArrayExtension"),e("manager"),e("AudioManager")),r=e("KQNativeInvoke"),a=e("UserModelHelper"),s=e("Playback"),u=e("fecha"),h=e("manager"),l=e("KQCard"),d=e("Player"),f={isTeShuPai:!1,isLiuDuiBan:!1,isSanShunZi:!1,isSanTaoHua:!1,isQingLong:!1,isYiTiaoLong:!1,isSanTongHuaShun:!1,isSanFenTianXia:!1,isCouYiSe:!1,isSiTaoSanTiao:!1,isWuDuiSanTiao:!1},p={WAIT_PEOPLE:0,WAIT_READY:1,PLAYING:2},v="",g="",m="",C=cc.Class({"extends":cc.Component,properties:{playerNodes:[cc.Node],chatNode:cc.Node,cardTypeCombineNode:cc.Node,typeButtonsNode:cc.Node,phone:cc.Label,labelRoomNumber:cc.Label,labelOverview:cc.Label,labelRemainTime:cc.Label,btnShare:cc.Button,btnReady:cc.Button,btnStartGame:cc.Button,beilv:cc.Node,btnChatVoice:cc.Button,btnChatText:cc.Button,againBtn:cc.Node,startCompareCardsNode:cc.Node,settingNode:cc.Node,VoiceMsgBg:cc.Node,exit:cc.Node,Dissolve:cc.Node,shareBg:cc.Node,totalGameResult:cc.Node,alertRequestExitNode:cc.Node,dissolveAlter:cc.Node,alertRequestExitCountdownNode:cc.Node,alertAnsowerExitNode:cc.Node,contentAnsowerExitNode:cc.Node,alertAnsowerExitResult:cc.Node,alertAnsowerExitCountdownNode:cc.Node,Countdown:cc.Node,labelTime:cc.Label,needCard:cc.Label,alert:cc.Node,coinsContainerNode:cc.Node,btnAlertRequestExitConfirmButton:cc.Button,btnAlertRequestExitCancelButton:cc.Button,autoTishi:cc.Prefab,waitingPrefab:cc.Prefab,coinsPrefab:cc.Prefab,playerComps:[d],gongXiNi:cc.Node,teShuPai:cc.Node,cardSpriteAtlas:cc.SpriteAtlas,daoSpriteAtlas:cc.SpriteAtlas,_liuDuiBan:!1,_sanShunZi:!1,_sanTongHua:!1,_yiTiaoLong:!1,_QingLong:!1,_SanTongHuaShun:!1,_SanFenTianXia:!1,_CouYiSe:!1,_SiTaoSanTiao:!1,_WuDuiSanTiao:!1,_playerComponents:null,_msgControl:null,_socket:null,_userId:0,_playerInfos:null,_deskInfo:null,_gameStatus:p.WAIT_PEOPLE,_enterTime:null,_players:null,_isComparingCardsNow:!1,_playedCompareCardsIndexs:[],fapaiNode:cc.Prefab,liuduiban:cc.Prefab,santonghua:cc.Prefab,sanshunzi:cc.Prefab,quanleida:cc.Prefab},keyBackListen:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,function(e){e.keyCode==cc.KEY.back&&(r.isNativeIOS()||jsb.reflection.callStaticMethod(r.ANDRIODClassName,"backToDesk","()V"))},this)},onLoad:function(){var e=this;this.keyBackListen(),this.headCardTime=.85;var t=this.node.getChildByName("room_bg"),n=cc.director.getWinSizeInPixels(),o=n.width/t.width,r=n.height/t.height,a=Math.max(o,r);t.scaleX=a,t.scaleY=a,this.BtnClickGongXiNiComfirm=this.cardTypeCombineNode.getComponent("CardTypeCombine").BtnClickGongXiNiComfirm,this._enterTime=Date.now(),this.playerComps.forEach(function(t){t.playedCompareCardsIndexs=e._playedCompareCardsIndexs}),c.instance.stopHallMusic();var u=cc.sys.localStorage.getItem("bgSound");if(0==u){var h=cc.find("AudioManager");h=h.getComponent("AudioManager"),h.setEffectMusicVolum(u)}this._initPlayerComponents(),this._initSelectCardNode(),this._initOneGameResult(),this._remainTimeStartUpdate(),this._userId=i.instance.userInfo.id,this._msgControl=this.chatNode.getComponent("MsgControl"),this._userId=i.instance.userInfo.id,this.beilv.getComponent("selectbeilv")._userid=this._userId,this.labelRoomNumber.string="",this.labelRemainTime.node.active=!1,this._registerVoiceNodeEvents(),this._registerSocketEvent(),C.instances=this,this._gongXiNiShow(!1),s.instance.isContainPlaybackDatas()?(s.instance.startPlayback(),this.playbackNode.active=!0,this.btnChatVoice.node.active=!1):this._loadDeskInfo(),this._socket=i.instance,cc.director.preloadScene("hall",function(){cc.director.preloadScene("login")}),cc.clickOut=!1},timeStart:function(e,t){if(cc.assert(e>0),this.timeStop(),this.Countdown.active=!0,"ready"!=t){var n=cc.sys.localStorage.getItem("timestamp");if(n){var i=Date.parse(new Date),o=1e3*e;i-n>o?i-n<2*o?e=5:cc.sys.localStorage.removeItem("timestamp"):e=Math.floor(e-(i-n)/1e3)}else{var n=Date.parse(new Date);cc.sys.localStorage.setItem("timestamp",n)}}this._timeRemainDuration=e,this.labelTime.string=String(e),this.Countdown.getComponent("time").setTime(.5*e);var c=this;this.callback=function(){c._timeMethod(t)},this.schedule(this.callback,1,e)},timeStop:function(){this.unschedule(this.callback),this.Countdown.active=!1},_timeMethod:function(e){this._timeRemainDuration=this._timeRemainDuration-1;var t=Math.max(this._timeRemainDuration,0);if(this.labelTime.string=t<10&&t>0?"0"+t:t,this._timeRemainDuration<=0)return this.timeStop(),"ready"==e&&this.clickReady(),void cc.sys.localStorage.removeItem("timestamp")},_globalMsg:function(e){var t=e.roomId,n=e.setting3,i="房号："+t,o=n[0]?"疯狂场 ":"普通场 ",c=n[1]?"鬼牌 ":"无鬼 ",r=(n[2]?"比花色 ":"不比花色 ",n[3]?"坐庄 ":"不坐庄 "),a=n[4]?"买马 ":"不买马 ",s="房费:"+(e.setting4?1==e.setting4?"赢者扣 ":"房主扣 ":"平摊 "),u=i+" 模式:"+r+s,h=["5局 ","10局 ","20局 "],l=["4人不加色 ","5人加一色 ","6人二色 ","7人加三色 "],d=l[e.setting2]+"",f=h[e.setting1-2],p="[京京十三水] "+r+o+a+c+s+d+f+" 点击直接进入房间";v=u,g=p,m="roomId="+t,cc.sys.localStorage.setItem("roomId",t),cc.sys.localStorage.setItem("shareTitle",u),cc.sys.localStorage.setItem("desc",p),cc.sys.isBrowser&&(window.shareToTimeLine&&window.shareToTimeLine(),window.shareToSession&&window.shareToSession())},_initMaPai:function(){},_initPlayerComponents:function(e){this._playerComponents=this.playerNodes.map(function(e){return e.getComponent("Player")}),e||(e=[0,1,2,3,4,5]);for(var t=this._playerComponents.splice(1,7),n=0;n<e.length-1;n++){var i=e[n],o=e[n+1],c=null;c=t[i],t[i]=t[o],t[o]=c}t.forEach(function(e){this._playerComponents.push(e)}.bind(this)),this.playsCoins&&this.playsCoins.length>0&&this.playsCoins.forEach(function(e){e.active=!1}.bind(this)),this.playsCoins=[],this._playerComponents.forEach(function(e,t){var n="coins"+t,i=new cc.Node;i.name=n,i.x=e.node.x,i.y=e.node.y,this.node.addChild(i),this.playsCoins.push(i)}.bind(this))},_initSelectCardNode:function(){var e=this,t=this.cardTypeCombineNode.getComponent("CardTypeCombine");t.setFinishSelectCardsCallback(function(n){t.reset(),i.sendPlayCard(e._userId,n),e.cardTypeCombineNode.active=!1})},_initOneGameResult:function(){},onDestroy:function(){o.offTarget(this)},clickLeaveDesk:function(){0==this._deskInfo.cIndex&&(this._deskInfo.createId==this._userId?cc.director.loadScene("hall"):i.sendLeaveDesk(this._userId))},clickDissolveDesk:function(){if(this._deskInfo.createId==this._userId){this.btnAlertRequestExitCancelButton.node.active=!0,this.btnAlertRequestExitConfirmButton.node.active=!0;var e=this.alertRequestExitNode.getComponent("alert");e.unscheduleAllCallbacks(),e.setMessage("是否要解散房间"),e.alert()}},clickExitOut:function(){i.sendDissolveDesk(this._userId)},clickExit:function(){if(s.instance.isPlaybacking())return void cc.director.loadScene("hall");if(this._deskInfo&&this._deskInfo.isDeskOver)return void(this._isComparingCardsNow||cc.director.loadScene("hall"));if(0!=this._deskInfo.cIndex){this.btnAlertRequestExitCancelButton.node.active=!0,this.btnAlertRequestExitConfirmButton.node.active=!0;var e=this.alertRequestExitNode.getComponent("alert");e.unscheduleAllCallbacks(),e.setMessage("是否解散房间？"),e.alert(),this.alertRequestExitCountdownNode.getComponent("Countdown").stop()}else if(this._deskInfo.createId==this._userId){var t=this.dissolveAlter.getComponent("alert");t.alert()}else i.sendLeaveDesk(this._userId)},clickOut:function(){if(0==this._deskInfo.cIndex){if(this._deskInfo.createId==this._userId)return cc.clickOut=!0,void cc.director.loadScene("hall");i.sendLeaveDesk(this._userId)}},clickShareBg:function(){cc.find("Canvas/shareBg").active=!1,this.shareBg.active=!1},guanzhu:function(){var e="http://127.0.0.1/gzh/index.html";cc.sys.openURL(e)},recordShare:function(){if(this._deskInfo.recordId){var e="[京京十三水]战绩",t="房间号："+this._deskInfo.roomId,n=["5 ","10 ","20 "],i="局数："+n[this._deskInfo.setting1-2],o="时间："+this._deskInfo.createTime,c=t+i+o+"点击查看详情",a=this._deskInfo.recordId;cc.sys.localStorage.setItem("shareTitle",e),cc.sys.localStorage.setItem("desc",c),cc.sys.localStorage.setItem("recordId",a),cc.sys.localStorage.setItem("roomId",""),v=e,g=c,m="roomId="+t,a&&(m="recordId="+a),cc.sys.isBrowser&&(window.shareToTimeLine&&window.shareToTimeLine(),window.shareToSession&&window.shareToSession())}cc.sys.isNative?r.isNativeIOS()?jsb.reflection.callStaticMethod(r.IOSClassName,"wxScreenShareFriend"):r.screenshotShare():cc.find("Canvas/shareBg").active=!0},clickDeskShare:function(){if(!cc.sys.isNative){var e=cc.find("Canvas/shareBg");e.active=!0}var t=m,n=v,i=g;if(r.isNativeIOS())jsb.reflection.callStaticMethod(r.IOSClassName,"wxShareFriend:description:",t,i,n);else if(r.isNativeAndroid()){var o="(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V";jsb.reflection.callStaticMethod(r.ANDRIODClassName,"wxShareFriend",o,t,i,n)}},clickShare:function(){if(!cc.sys.isNative){var e=this.shareBg.getChildByName("wx"),t=this.shareBg.getChildByName("PYQ");e.active=!0,t.active=!1,this.shareBg.active=!0}var n=m,i=v,o=g;if(r.isNativeIOS())jsb.reflection.callStaticMethod(r.IOSClassName,"wxShareFriend:description:",n,o,i);else if(r.isNativeAndroid()){var c="(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V";jsb.reflection.callStaticMethod(r.ANDRIODClassName,"wxShareFriend",c,n,o,i)}},shareHallTimeline:function(){if(cc.sys.isNative){var e=m,t=v,n=g;if(r.isNativeIOS())jsb.reflection.callStaticMethod(r.IOSClassName,"wxShareHallTimeline",e,n,t);else{var i="(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V";jsb.reflection.callStaticMethod(r.ANDRIODClassName,"wxShareHallTimeline",i,e,n,t)}}else{var o=this.shareBg.getChildByName("wx"),c=this.shareBg.getChildByName("PYQ");o.active=!1,c.active=!0,this.shareBg.active=!0}},clickReady:function(){this.btnReady.node.active=!1,this.btnShare.node.active=!1,this.timeStop(),i.sendReady(this._userId)},clickStartGame:function(){this.btnReady.node.active=!1,this.btnShare.node.active=!1,this.btnStartGame.node.active=!1,i.sendStartGame(this._userId)},updateRoomNumber:function(e){var t="";0!=this._deskInfo.setting1&&1!=this._deskInfo.setting1?t="局数 : "+this._deskInfo.cIndex+"/"+this._deskInfo.mMax:0==this._deskInfo.setting1?t="局数 : 10局":1==this._deskInfo.setting1&&(t="局数 : 20局"),this.labelRoomNumber.string="房号 : "+e+"    "+t},updateGameStatus:function(){var e=arguments.length<=0||void 0===arguments[0]?p.WAIT_PEOPLE:arguments[0];this._gameStatus=e,this.btnShare.node.active=e==p.WAIT_PEOPLE,this.btnReady.node.active=e==p.WAIT_READY,this.isReadyStatus()},gameStatus:function(){return this._gameStatus},isReadyStatus:function(){this._playerInfos&&this._playerInfos.length>0&&this._playerInfos.forEach(function(e){var t=cc.find("Canvas/playSelf/userInfoSelf");e.id==this._userId&&(e.readyStatus||this._isComparingCardsNow||s.instance.isPlaybacking()||s.instance.isContainPlaybackDatas()?(this.btnReady.node.active=!1,this.btnShare.node.active=!1,this.btnStartGame.node.active=!1,this._isComparingCardsNow?this._playerComponents.forEach(function(e){e.hideReadyStatus()}):t.getComponent("userInfo").setReadyNodeVisible(!0)):(t.getComponent("userInfo").setReadyNodeVisible(!1),0==this._deskInfo.cIndex?(this.btnReady.node.active=!1,this._deskInfo.players.length<this._deskInfo.maxNumber?this.btnShare.node.active=!0:this.btnShare.node.active=!1,this._deskInfo.players.length>=2&&this._deskInfo.createId==this._userId?this.btnStartGame.node.active=!0:this.btnStartGame.node.active=!1):(this.btnReady.node.active=!0,this.btnShare.node.active=!1,this.btnStartGame.node.active=!1,this.btnStartGame.node.active=!1))),this._isComparingCardsNow&&this._playerComponents.forEach(function(e){e.hideReadyStatus()})}.bind(this))},isGameStart:function(){0==this._deskInfo.cIndex?(this._deskInfo.createId==this._userId&&!this._isComparingCardsNow&&!s.instance.isPlaybacking()&&!s.instance.isContainPlaybackDatas()&&this._deskInfo.players.length>=2?(this.btnStartGame.node.active=!0,this.btnReady.node.active=!1):this.btnStartGame.node.active=!1,this._deskInfo.players.length<this._deskInfo.maxNumber?this.btnShare.node.active=!0:this.btnShare.node.active=!1):(this.btnStartGame.node.active=!1,this.btnShare.node.active=!1)},_startGame:function(e){if(this.gameStatus()!=p.PLAYING){this._playerComponents.forEach(function(e){e.reset(),e.hideReadyStatus()}),this.teShuPai.active=!1,this.unscheduleAllCallbacks(),this.playsCoins.forEach(function(e){e&&e.removeAllChildren()}),this._playerComponents.forEach(function(e,t){var n="coins"+t,i=this.node.getChildByName(n);i&&(i.removeAllChildren(),this.node.removeChild(i))}.bind(this)),cc.log(this.node),cc.log("------709"),this._updateUserInfos(this._playerInfos),this.showCompareCard(),this._isComparingCardsNow=!0,this.updateGameStatus(p.PLAYING),this._playFaPaiAnimation(e);var t=this.cardTypeCombineNode.getComponent("CardTypeCombine");t.reset(),t.node.active=!1,a.isPlayedCards(this._findPlayerInfoByUserId(this._userId))||(this.node.getComponent("animation").fapaiAnimation(),this.scheduleOnce(function(){this._showCardTypeCombine()}.bind(this),1.9))}},_playFaPaiAnimation:function(e){this._playerComponents.forEach(function(e){e.playFaPaiAnimation()}),e&&c.instance.playFaPai()},isTeShuPai:function(e){var t=l.isTeShuPai(e);return t?f.isTeShuPai=!0:f.isTeShuPai=!1,t},isYiTiaoLong:function(e){var t=l.isYiTiaoLong(e);return t?f.isYiTiaoLong=!0:f.isYiTiaoLong=!1,t},isLiuDuiBan:function(e){var t=l.isLiuDuiBan(e);t?f.isLiuDuiBan=!0:f.isLiuDuiBan=!1},isSanShunZi:function(e){var t=l.isSanShunZi(e);t?f.isSanShunZi=!0:f.isSanShunZi=!1},isSanTongHua:function(e){var t=l.isSanTongHua(e);t?f.isSanTaoHua=!0:f.isSanTaoHua=!1},isSanTongHuaShun:function(e){var t=l.isSanTongHuaShun(e);t?f.isSanTongHuaShun=!0:f.isSanTongHuaShun=!1},isQingLong:function(e){var t=l.isQingLong(e);t?f.isQingLong=!0:f.isQingLong=!1},isSanFenTianXia:function(e){var t=l.isSanFenTianXia(e);t?f.isSanFenTianXia=!0:f.isSanFenTianXia=!1},isSiTaoSanTiao:function(e){var t=l.isSiTaoSanTiao(e);t?f.isSiTaoSanTiao=!0:f.isSiTaoSanTiao=!1},isWuDuiSanTiao:function(e){var t=l.isWuDuiSanTiao(e);t?f.isWuDuiSanTiao=!0:f.isWuDuiSanTiao=!1},isCouYiSe:function(e){var t=l.isCouYiSe(e);t?f.isCouYiSe=!0:f.isCouYiSe=!1},_showCardTypeCombine:function(){if(!s.instance.isPlaybacking()&&!this.cardTypeCombineNode.active){this.startCompareCardsNode.active=!1,this.btnReady.node.active=!1,this.btnShare.node.active=!1,cc.teShuPaiCards=null;var e=this.cardTypeCombineNode.getComponent("CardTypeCombine");e.reset(),e.reloadCards([]),e.node.active=!0,e.timeStart(60),this.timeStart(60,""),this.cardTypeCombineNode.scale=1;var t=this._findCardsByUserId(this._userId);2==this._userId&&(t=[{suit:"d",number:2},{suit:"d",number:2},{suit:"d",number:2},{suit:"h",number:2},{suit:"d",number:2},{suit:"c",number:3},{suit:"c",number:3},{suit:"c",number:3},{suit:"d",number:3},{suit:"d",number:4},{suit:"d",number:4},{suit:"d",number:4},{suit:"d",number:4}]),cc.moshi=0;for(var n=0;n<t.length;n++){var i=t[n].number;if(i>=20){cc.moshi=1;break}}var o=this._convertCardsToCardNames(t);if(e.reloadCards(o),e.addCardModes(o),1!=cc.moshi){if(this.isTeShuPai(t),this.isQingLong(t),this.isYiTiaoLong(t),this.isLiuDuiBan(t),this.isSanShunZi(t),this.isSanTongHua(t),f.isTeShuPai){this.cardTypeCombineNode.scale=0;var c=this.gongXiNi.getChildByName("bg");c.opacity=240}this._showGongXiNiAndBtnTeShuPai()}e.cacleAutoSelectedCards2(),1==cc.moshi&&(cc.teShuPaiCards=null),this._playerComponents.forEach(function(e){e.reset(),e.hideReadyStatus()})}},getIsTeShuPai:function(e){var t=this._findCardsByUserId(e);return this.isTeShuPai(t)},_showGongXiNiAndBtnTeShuPai:function(){f.isTeShuPai&&(f.isQingLong?(this._gongXiNiShow(!0,"同花十三水"),this._sanTongHua=!0):f.isYiTiaoLong?(this._gongXiNiShow(!0,"十三水"),this._yiTiaoLong=!0):f.isLiuDuiBan?(this._gongXiNiShow(!0,"六对半"),this._liuDuiBan=!0):f.isSanShunZi?(this._gongXiNiShow(!0,"三顺子"),this._sanShunZi=!0):f.isSanTaoHua?(this._gongXiNiShow(!0,"三同花"),this._sanTongHua=!0):this._gongXiNiShow(!1))},_initTeShuPaiSprite:function(){},clickGongXiNiShow:function(){this.cardTypeCombineNode.scale=1;var e=this.gongXiNi.getChildByName("bg");e.opacity=0},_gongXiNiShow:function(e){var t=arguments.length<=1||void 0===arguments[1]?"":arguments[1],n=this.gongXiNi.getComponent("alert");n.unscheduleAllCallbacks(),t="是否按特殊牌型["+t+"]出牌？\n(取消后点击左下角可再报道)",n.setMessage(t),e?n.alert():n.dismissAction(),this.teShuPai.active=e;var i=this.teShuPai.getChildByName("btnTeshupai");i.children[0].runAction(cc.repeatForever(cc.rotateBy(1,-360))),i.children[1].runAction(cc.repeatForever(cc.rotateBy(1,360)))},_showOneGameResult:function(){this._isComparingCardsNow=!1,this.updateGameStatus(p.WAIT_PEOPLE),this._updateUserScores();var e=this;if(this.scheduleOnce(function(){e._isRandomRoom()||e._isTotalGameOver()&&e._showTotalGameResult()},.5),this._isRandomRoom()||s.instance.isPlaybacking())return this.scheduleOnce(function(){oneGameResult.getComponent("alert").dismissAction(),cc.director.loadScene("hall")},2),!0},_showTotalGameResult:function(){var e=arguments.length<=0||void 0===arguments[0]?2:arguments[0];this.timeStop(),this.btnReady.node.active=!1,this.btnShare.node.active=!1,this.alertAnsowerExitNode.active=!1,this.alertRequestExitNode.active=!1,this._deskInfo.cIndex==this._deskInfo.mMax?this.againBtn.active=!0:this.againBtn.active=!1;var t=this.totalGameResult.getComponent("TotalGameResult");if(!t.node.active){t.setPlayerInfos(this._deskInfo.players,this._deskInfo);var n=this.totalGameResult.getComponent("alert");this.scheduleOnce(function(){this.totalGameResult.active||n.alert()}.bind(this),e),n.setDismissCallback(function(){i.sendOnceAgain("false",this._userId)})}},clickAgain:function(){i.sendOnceAgain("true",this._userId)},_loadDeskInfo:function(){i.sendGetDesckInfo(this._userId)},_registerSocketEvent:function(){o.on(i.Event.ReceiveDeskInfo,this._socketReceiveDeskInfo,this),o.on(i.Event.ReceiveOnlineStatus,this._socketReciveOnlineStatus,this),o.on(i.Event.ReceiveChatText,this._socketReciveChatTextMessage,this),o.on(i.Event.ReceiveChatEmoji,this._socketReciveChatEmojiMessage,this),o.on(i.Event.ReceiveRequestDissolve,this._socketReceiveRequestExitMessage,this),o.on(i.Event.ReceiveRequestDissolveResult,this._socketReceiveRequestExitResultMessage,this),o.on(i.Event.ReceiveAudioMessage,this._socketReceiveAudioMessage,this),o.on(i.Event.ReceivePlayCard,this._socketReceivePlayCard,this),o.on(i.Event.ReceiveGameOver,this._socketReceiveGameOver,this),o.on(i.Event.ReceiveFaPai,this._socketReciveFaPai,this),o.on(i.Event.ReceiveReady,this._socketReciveReady,this),o.on(i.Event.ReceiveDissolveDesk,this._socketReceiveDissolveDesk,this),o.on(i.Event.ReceiveLeaveDesk,this._socketLeaveDesk,this),o.on(i.Event.SocketDisconnect,this._receiveSocketConnectError,this),o.on(i.Event.SocketConnectSuccessed,this._receiveSocketConnectSuccessed,this),o.on(i.Event.ReceivePause,this._socketReceivePause,this),o.on(i.Event.ReceiveSelectBeiLv,this._ReceiveSelectBeiLv,this),o.on(i.Event.ReceiveBeiLv,this._ReceiveBeiLv,this),o.on(i.Event.ReceiveQingLi,this._ReceiveQingLi,this),o.on(i.Event.ReceiveOnceAgain,this._ReceiveOnceAgain,this)},_ReceiveOnceAgain:function(e){var t=this;this._playedCompareCardsIndexs=[],this.playerComps.forEach(function(e){e.playedCompareCardsIndexs=t._playedCompareCardsIndexs});var n=e.data;if(n.reason){this.alertAnsowerExitResult.y=-143,this.alertAnsowerExitResult.opacity=255,this.alertAnsowerExitResult.children[0].getComponent(cc.Label).string="房卡不足";var i=cc.spawn(cc.moveTo(.3,cc.p(0,20)),cc.fadeOut(this.cardTime));this.alertAnsowerExitResult.runAction(cc.sequence(cc.moveTo(1,cc.p(0,0)),i))}else this.totalGameResult.active=!1,this.startCompareCardsNode.active=!1,this._playerComponents.forEach(function(e){e.reset()}),this._socketReceiveDeskInfo(e)},_ReceiveSelectBeiLv:function(){if(this._deskInfo.createId!=this._userId){this.beilv.active=!0;var e=this.beilv.getChildByName("bg").getChildByName("btn3").getComponent(cc.Button);1==this._deskInfo.setting5&&(e.interactable=!1);var t=this.beilv.getComponent("selectBeilv");t._userid=this._userid}},_ReceiveBeiLv:function(e){var t=e.data.userId,n=e.data.beilv;this._playerComponents.forEach(function(e){e.showBeilv(t,n)})},_ReceiveQingLi:function(e){var t=e.data.leaveId;if(t==this._userId){if(null==cc.qingli){var n=e.action;cc.qingli="",cc.qingli=n}cc.director.loadScene("hall")}},_socketReceiveDeskInfo:function(e){if(!e.result)return void cc.error("错误：",e);var t=e.data;this._initPlayerComponents(t.playersIndexAyy),cc.maPai=null,2==t.maPai.length&&(cc.maPai=t.maPai[0]+"_"+t.maPai[1]),cc.huaSe=t.setting3[2],cc.chaoShiChuPai=t.setting6,cc.duoYiSe=e.data.setting2,this._deskInfo=t,this._globalMsg(t),this._updatGameOverview(this._deskInfo),this.updateRoomNumber(t.roomId),this.needCard.string=t.needCard;var n=t.playersIndex;this._injectUserIdToPlayerComponents(n);var i=t.players;this._playerInfos=i,this._updateUserInfos(i),this._updateUserScores(),this._updateBanker(),this._msgControl.addPlayerInfos(this._playerInfos);var o=i.find(function(e){return e.id==this._userId}.bind(this));t.createId==this._userId&&(t.cIndex>0?this._playerComponents.forEach(function(e){e.showQingli(!1,t.cIndex)}):this._playerComponents.forEach(function(e){t.createId==e.userId?e.showQingli(!0,t.cIndex):e.showQingli(!1,t.cIndex)})),this._playerComponents.forEach(function(e){t.createId==e.userId?e.showFangZhuStatus(t.createId,!0):e.showFangZhuStatus(e.userId,!1)}),this._deskInfo.createId!=this._userId?0==this._deskInfo.cIndex?(this.exit.active=!0,this.Dissolve.active=!1):(this.exit.active=!1,this.Dissolve.active=!0):this._deskInfo.cIndex>0?(this.exit.active=!1,this.Dissolve.active=!0):(this.exit.active=!0,this.Dissolve.active=!0),this._deskInfo.isCBegin||(this._gameStatus=p.WAIT_READY);for(var c=0;c<i.length;c++){var r=i[c],s=r.readyStatus,u=r.id;this._playerComponents.forEach(function(e){this._deskInfo.isCBegin||e.showReadyStatus(u,s)}.bind(this))}o&&o.cards.length>0&&this._deskInfo.isCBegin?o.cardInfo.length?this._startGame(!1):this._startGame(!0):a.isPlayedCards(o)&&!this._deskInfo.isCBegin&&this._socketReceiveGameOver(e),this.isReadyStatus(),this._handleUpdateDeskInfoAboutExitRoom(this._deskInfo),this.showCompareCard()},showCompareCard:function(){0==this._deskInfo.cIndex||this._deskInfo.isCBegin||!this._deskInfo.players||this._deskInfo.players.length<=0||this._deskInfo.players[0].cardInfo<=0||(this.playsCoins.forEach(function(e){e&&e.removeAllChildren()}),this.unscheduleAllCallbacks(),this.node.stopAllActions(),this._playerComponents.forEach(function(e){e.readyToCompareCards()}),this._playerComponents.forEach(function(e){e.node.active&&e.showAllCompareCards(this._deskInfo.players)}.bind(this)),this.startCompareCardsNode.active=!1,this._isComparingCardsNow=!1,this.isReadyStatus(),this.scheduleOnce(function(){this._isTotalGameOver()&&this._showTotalGameResult()}.bind(this),.5))},_socketReciveFaPai:function(e){this.startCompareCardsNode.active=!1,this.timeStop(),this._isComparingCardsNow=!0,this._gameStatus=p.WAIT_READY,this._socketReceiveDeskInfo(e)},logoutAction:function(){cc.director.loadScene("login"),h.setUserInfo("")},_socketReciveOnlineStatus:function(e){if(!e.result)return void cc.error("错误：",e);var t=e.data,n=t.userId,i=t.status;this._playerComponents.forEach(function(e){e.setUserOnlineStatus(n,i)})},_socketReciveChatTextMessage:function(e){var t=e.data.userId,n=e.data.msg;this._playerComponents.forEach(function(e){e.showChatText(t,n)}),this._msgControl.addChatTextMessage(t,n);var i=this._playerInfos.find(function(e){return e.id==t}).sex;c.instance.playChatAudio(i,n)},_socketReciveChatEmojiMessage:function(e){var t=e.data.userId,n=e.data.emoji;this._msgControl._loadEmojiFrame(n,function(e){this._playerComponents.forEach(function(n){n.userId==t&&n.chatMessageNode.getComponent("ChatMessage").showEmoji(e)})}.bind(this))},_socketReceiveRequestExitMessage:function(e){var t=this.alertAnsowerExitNode.getChildByName("alert_bg"),n=t.getChildByName("btnAgree"),i=t.getChildByName("btnDisagree");n.active=!0,i.active=!0;var o=e.data.info;if(!this.alertAnsowerExitNode.active){var c=this.alertAnsowerExitNode.getComponent("alert");c.alert(),c.unscheduleAllCallbacks(),this.contentAnsowerExitNode.children.forEach(function(e){e.active=!1}),this._playerInfos.forEach(function(e,t){var n=this.contentAnsowerExitNode.children[t],i=n.getChildByName("nickname"),o=n.getChildByName("fanzhu"),c=n.getChildByName("avatar_bg");n.active=!0,i.getComponent(cc.Label).string=e.nickname,this._deskInfo.createId==e.id?o.active=!0:o.active=!1,cc.loader.load({url:e.avatarUrl,type:"jpg"},function(e,t){if(!e){var n=new cc.SpriteFrame(t);c.getComponent(cc.Sprite).spriteFrame=n}}.bind(this))}.bind(this));var r=this.alertAnsowerExitCountdownNode.getComponent("Countdown");r.startCountdown(60,function(e){if(e)return void this.clickAgreeOtherPlayerExit()}.bind(this))}this._playerInfos.forEach(function(e,t){var c=o[t],r=this.contentAnsowerExitNode.children[t],a=r.getChildByName("id"),c=o[t];1==c?(this._userId==e.id&&(n.active=!1,i.active=!1),a.getComponent(cc.Label).string="同意"):a.getComponent(cc.Label).string=""}.bind(this))},_socketReceiveRequestExitResultMessage:function(e){if(this._hideReqestExitNode(),this.alertAnsowerExitNode.active&&(this.alertAnsowerExitNode.getComponent("alert").dismissAction(),this.alertAnsowerExitCountdownNode.getComponent("Countdown").stop()),e.data.result);else{var t=e.data.userId,n=this._findPlayerInfoByUserId(t).nickname;this.alertAnsowerExitResult.y=-143,this.alertAnsowerExitResult.opacity=255,this.alertAnsowerExitResult.children[0].getComponent(cc.Label).string=n+"不同意退出";var i=cc.spawn(cc.moveTo(.3,cc.p(0,20)),cc.fadeOut(this.cardTime));this.alertAnsowerExitResult.runAction(cc.sequence(cc.moveTo(1,cc.p(0,0)),i))}},_socketReceiveAudioMessage:function(e){var t=e.data.userId;if(this.playSpeakAnimation(t),t!=this._userId){var n=e.data.url;this.playAudioUrl(n)}},_socketReceivePlayCard:function(e){var t=e.data[0].userId,n=e.data[1].card;this._deskInfo=e.data[2].s;var i=e.data[2].s.players;this._playerInfos=i,this._updateUserInfos(i),this._playerComponents.forEach(function(e){e.playCard(t,n)}),t==this._userId&&(this.cardTypeCombineNode.active=!1)},_getSelfReadyStatus:function(){var e=this._findPlayerInfoByUserId(this._userId);return e.readyStatus},_socketReciveReady:function(e){var t=e.data.userId;this._playerComponents.forEach(function(e){this._deskInfo.isCBegin||e.showReadyStatus(t)}.bind(this))},_socketReceiveGameOver:function(e){if(this.timeStop(),cc.sys.localStorage.removeItem("timestamp"),this._hideReqestExitNode(),!e.result)return void cc.error("错误：",e);var t=e.data;if("gameOver"==e.action&&t.isDeskOver&&i.sendDidReceiveGameOverAction(this._userId),this._deskInfo=e.data,this._isDissvledRoom()&&!s.instance.isPlaybacking())return void this._showTotalGameResult(.1);if(Date.now()-this._enterTime<4e3)return this.isReadyStatus(),this.btnShare.node.active=!1,this.btnReady.node.active=!0,this._playerComponents.forEach(function(e){e.reset()}),void this._playedCompareCardsIndexs.push(this._deskInfo.cIndex);var n=e.data;this._deskInfo=n,this._updatGameOverview(this._deskInfo);var o=n.players;return this._playerInfos=o,this._updateUserInfos(o),a.isUserReady(this._findCurrentUserInfo())?this._playerComponents.forEach(function(e){e.reset()}):this._startCompareCards(e),Date.now()-this._enterTime<4e3?void this.showCompareCard():void 0},_socketReceiveDissolveDesk:function(e){this.cardTypeCombineNode.active=!1,cc.director.loadScene("hall")},_socketLeaveDesk:function(e){e.result&&(this._deskInfo.isDeskOver||cc.director.loadScene("hall"))},_socketReceivePause:function(e){if(e.result){var t=e.data.userId;this._playerComponents.forEach(function(e){e.userId==t&&e.setUserOnlineStatus(t,0)})}},_receiveSocketConnectError:function(e){this.showNetworkMessage()},_receiveSocketConnectSuccessed:function(e){this.hiddenNetworkMessage(),s.instance.isPlaybacking()||this._loadDeskInfo()},updateDeskInfo:function(e){this._deskInfo=e,this._updatGameOverview(this._deskInfo),this.updateRoomNumber(e.roomId);var t=e.playersIndex;this._injectUserIdToPlayerComponents(t);var n=e.players;this._playerInfos=n,this._updateUserInfos(n),this._msgControl.addPlayerInfos(this._playerInfos),0==e.cIndex&&this._deskInfo.players.length<this._deskInfo.maxNumber&&(this.btnShare.node.active=!0)},_injectUserIdToPlayerComponents:function(e){var t=e.findIndex(function(e){return e==this._userId}.bind(this)),n=e.translationWithStartIndex(t);this._playerComponents.forEach(function(e,t){var i=n.length>t?n[t]:null;e.userId=i})},_updateUserInfos:function(e){var t=this;this._playerComponents.forEach(function(n,i){n.updateDeskInfo(t._deskInfo),n.updateUserInfoWithUsers(e)})},_updateUserScores:function(e){this._playerComponents.forEach(function(e){e.updateScore()})},_updateBanker:function(){this._playerComponents.forEach(function(e){e.updateBanker()})},_findCardsByUserId:function(e){var t=this._findPlayerInfoByUserId(e);return null!=t?t.cards:null},_findPlayerInfoByUserId:function(e){var t=(this._playerInfos||[]).find(function(t){return e==t.id});return t},_findPlayerIndexByUserId:function(e){var t=this.playerNodes.findIndex(function(t){return t.getComponent("Player").userId==e});return t},_findCurrentUserInfo:function(){return this._findPlayerInfoByUserId(this._userId)},_convertCardsToCardNames:function(e){var t={s:4,h:3,c:2,d:1};return e.map(function(e){var n=e.number;14==e.number&&(n=1);var i=t[e.suit],o=Math.max(Math.min(n,21),1);return i+"_"+o})},_updatGameOverview:function(e){if(s.instance.isPlaybacking())return void(this.labelOverview.string="回放");if(this._isRandomRoom())return void(this.labelOverview.string="");var t="不比花色 ",n="不坐庄 ",i="普通场 ",o="无鬼 ",c="不买马 ",r="4人不加色 ",a="平摊";if(this._deskInfo.setting3[2]&&(t="比花色  "),this._deskInfo.setting3[3]&&(n="坐庄 "),this._deskInfo.setting3[0]&&(i="疯狂场  "),this._deskInfo.setting3[1]&&(o="有鬼  "),this._deskInfo.setting3[4]){c="买马";var u="方块",h=1;switch(this._deskInfo.setting7[0]){case 1:u="方块";break;case 2:u="梅花";break;case 3:u="红心";break;case 4:u="黑桃"}switch(this._deskInfo.setting7[1]){case 1:h="A";break;case 2:h=2;break;case 3:h=3;break;case 4:h=4;break;
case 5:h=5;break;case 6:h=6;break;case 7:h=7;break;case 8:h=8;break;case 9:h=9;break;case 10:h=10;break;case 11:h="J";break;case 12:h="Q";break;case 13:h="K"}c=u+h+c}1==this._deskInfo.setting2?r="5人加一色 ":2==this._deskInfo.setting2?r="6人加二色 ":3==this._deskInfo.setting2&&(r="7人加三色 "),1==this._deskInfo.setting4?a="赢者扣 ":2==this._deskInfo.setting4&&(a="房主扣 "),this.labelOverview.string="模式 : "+t+n+i+o+c+"\n其他："+r+a},_isRandomRoom:function(){return null==this._deskInfo||this._deskInfo.isRandomDesk},_isTotalGameOver:function(){return null!=this._deskInfo&&(!!this._deskInfo.isDeskOver||this._deskInfo.mMax<=this._deskInfo.cIndex)},_isDissvledRoom:function(){return!!this._deskInfo&&this._deskInfo.dissolveStatus},_startCompareCards:function(e){this._isComparingCardsNow=!0,this._gongXiNiShow(!1),this._players=e.data.players;var t=this._findPlayerInfoByUserId(this._userId);c.instance.playStartCompare(t.sex),this.startCompareCardsNode.getComponent("alert").alert(),this._playerComponents.forEach(function(e){e.readyToCompareCards()}),this.unscheduleAllCallbacks(),this.scheduleOnce(function(){this.startCompareCardsNode.active=!1,this._showCompareCardDetails(e)}.bind(this),1)},_showCompareCardDetails:function(e){this._playerComponents.forEach(function(e){e.reset(),e.readyToCompareCards()});var t=this.cardTypeCombineNode.getComponent("CardTypeCombine");t.reset(),t.node.active=!1;var n=this._playerComponents.filter(function(e){if(e.node.active){var t=e.compareCardsNode.getComponent("CompareCards")._user;if(!t.isContainExtra)return e.node.active}}),i=this._playerComponents.filter(function(e){if(e.node.active){var t=e.compareCardsNode.getComponent("CompareCards")._user;if(t.isContainExtra)return e.node.active}}),o=this,c=this._showCompareCardStep(0,n);this.scheduleOnce(function(){o._showCompareCardStep(0,n)},c),this.scheduleOnce(function(){o._showCompareCardStep(0,n)},2*c),i.length>0&&this.scheduleOnce(function(){o._showCompareCardStep(0,i,!0)},3*c),c=3*c+.5;for(var r=0;r<i.length;r++){var a=i[r].compareCardsNode.getComponent("CompareCards")._user;a.isContainExtra&&(c+=2.5)}var s=this.headCardTime,u=this._shootDatas()||[],h=this._shotData()||[],l=this._homeRunUserId(),d=0;h.forEach(function(e,t){o.scheduleOnce(function(){o.playShoot(e.fromUserId,e.toUserId)},c+t*s),d+=o.headCardTime,c+=o.headCardTime}),l.length>=1&&u.forEach(function(e,t){o.scheduleOnce(function(){o.playShoot(e.fromUserId,e.toUserId)},c+(t+d)*s),c+=o.headCardTime}),c=c+u.length*s+h.length*s,l>0&&(o.scheduleOnce(function(){o.playHomeRun(l)},c),c+=1),l&&(c+=1),this._jinBiAction(c)},_jinBiAction:function(e){var t=this._playerComponents.filter(function(e){return e.node.active}),n=0,i=0,o=[],r=[];this.playsCoins.forEach(function(e){e&&e.removeAllChildren()}),t.forEach(function(e,t){var n=e.compareCardsNode.getComponent("CompareCards")._user.cScore;if(n<0){n*=-1;var i=new cc.Node;i.name="coinsContainer";for(var c=n>30?30:n,r=0;r<c;r++)this._createJinBiPrefab(i,i);this.playsCoins[t].addChild(i),o.push(i.children)}}.bind(this)),this.playsCoins.forEach(function(e){e&&(e.active=!1)}),this.scheduleOnce(function(){this.playsCoins.forEach(function(e){e&&(e.active=!0)}),c.instance.coinIncome(),o.forEach(function(e){var t=0,i=.002;e.forEach(function(e){var n=0==Math.round(Math.random())?-1:1;n=Math.floor(38*Math.random())*n;var o=0==Math.round(Math.random())?-1:1;o=Math.floor(38*Math.random())*o;var c=this.node.convertToWorldSpaceAR(cc.v2(o,n)),r=e.convertToNodeSpaceAR(c);this.scheduleOnce(function(){e.runAction(cc.moveBy(.2,r))},t),t+=i}.bind(this)),n=t,r=r.concat(e)}.bind(this));var e=0;t.forEach(function(t){var n=t.compareCardsNode.getComponent("CompareCards")._user.cScore;n=n>30?30:n,n>0&&(e+=1*n)}.bind(this));var a=r.splice(e,r.length);a.forEach(function(e){e.parent.removeChild(e)}),t.forEach(function(e){var t=e.compareCardsNode.getComponent("CompareCards")._user.cScore;if(t>0){var o=.0025,c=n+1,a=t>30?30:t;r.splice(0,a).forEach(function(t){this.scheduleOnce(function(){var n=e.node.convertToWorldSpaceAR(cc.v2(0,0)),i=t.convertToNodeSpaceAR(n),o=cc.moveBy(.25,i),c=cc.fadeOut(.13),r=cc.sequence(o,c);t.runAction(r)},c),c+=o}.bind(this)),i=c}}.bind(this)),this.scheduleOnce(function(){this._showCompareCardFinished(),t.forEach(function(e){e.showScoreResult()})}.bind(this),i),this.scheduleOnce(function(){this.playsCoins.forEach(function(e){e&&e.removeAllChildren()})}.bind(this),i+5)}.bind(this),e)},_createJinBiPrefab:function(e,t){var n=cc.instantiate(this.coinsPrefab),i=0==Math.round(Math.random())?-1:1;i=Math.floor(38*Math.random())*i+t.y;var o=0==Math.round(Math.random())?-1:1;o=Math.floor(38*Math.random())*o+t.x,n.x=o,n.y=i,e.addChild(n)},_showCompareCardStep:function(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],t=arguments.length<=1||void 0===arguments[1]?[]:arguments[1],n=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],i=e,o=this.headCardTime,c=0,r=this;t=t.sort(function(e,t){return e.nextCompareScore()-t.nextCompareScore()});var a=t;if(a.forEach(function(e){r.scheduleOnce(function(){e.showNextCompareCards()},i+c),i+=o;var t=e.compareCardsNode.getComponent("CompareCards")._user;t.isContainExtra&&(10==t.cardInfo[0].type?(r.scheduleOnce(function(){this.node.getComponent("animation")._santonghuaAnimation()},i-1+c),c+=2.5):11==t.cardInfo[0].type?(r.scheduleOnce(function(){this.node.getComponent("animation")._sanshunziAnimation()},i-1+c),c+=2.5):12==t.cardInfo[0].type?(r.scheduleOnce(function(){this.node.getComponent("animation")._liuduibanAnimation()},i-1+c),c+=2.5):18==t.cardInfo[0].type?(r.scheduleOnce(function(){this.node.getComponent("animation")._qinglongAniamtion("long")},i-1+c),c+=2.5):19==t.cardInfo[0].type&&(r.scheduleOnce(function(){this.node.getComponent("animation")._qinglongAniamtion("ql")},i-1+c),c+=2.5))}),n){for(var s=0;s<a.length;s++)i+=2.5;this._playerComponents.forEach(function(e){e.node.active&&r.scheduleOnce(function(){e.showNextCompareScore(n)},i-o)})}else a.forEach(function(e){r.scheduleOnce(function(){e.showNextCompareScore()},i-o)});return i+c},_isGameOver:function(){},_showCompareCardFinished:function(){this.timeStart(5,"ready"),this._showOneGameResult(),this._playedCompareCardsIndexs.push(this._deskInfo.cIndex)},showNetworkMessage:function(){var e=arguments.length<=0||void 0===arguments[0]?"网络链接断开，重新连接中...":arguments[0];if(!this.networkNode||!this.networkNode.active){if(null!=this.networkNode){var t=cc.removeSelf();this.networkNode.runAction(t),this.networkNode=null}this.networkNode=cc.instantiate(this.waitingPrefab),this.node.addChild(this.networkNode);var n=this.networkNode.getComponent("alert"),i=this;n.onDismissComplete=function(){i.networkNode=null},n.setMessage(e),n.alert()}},hiddenNetworkMessage:function(){null!=this.networkNode&&this.networkNode.getComponent("alert").dismissAction()},showAlertMessage:function(e,t){var n=this.alert.getComponent("alert");this.alert.active||n.alert(),n.setMessage(e),n.unscheduleAllCallbacks(),t&&n.scheduleOnce(function(){n.dismissAction()},5)},showCheckMessage:function(){var e=arguments.length<=0||void 0===arguments[0]?"检查网络中...":arguments[0];if(null!=this.checkNode){var t=cc.removeSelf();this.checkNode.runAction(t),this.checkNode=null}this.checkNode=cc.instantiate(this.waitingPrefab),this.node.addChild(this.checkNode);var n=this.checkNode.getComponent("alert"),i=this;n.onDismissComplete=function(){i.checkNode=null},n.setMessage(e),n.alert()},hiddenCheckMessage:function(){null!=this.checkNode&&this.checkNode.active&&this.checkNode.getComponent("alert").dismissAction()},_registerVoiceNodeEvents:function(){var e=this,t=this.btnChatVoice.node;this.endRecordTime=Date.now(),t.on(cc.Node.EventType.TOUCH_START,function(t){if(cc.sys.isNative){if(Date.now()-e.endRecordTime>=1e3){e.VoiceMsgBgAnimation(),e.nativeRecordAction();var n=cc.scaleTo(.12,1.2);e.btnChatVoice.node.runAction(n),e._isRecording=!0}}else{var i=.3,o=cc.instantiate(e.autoTishi);e.node.addChild(o);var c=cc.spawn(cc.moveTo(.3,cc.v2(0,0)),cc.fadeIn(.3));o.runAction(c),e.scheduleOnce(function(){var e=cc.callFunc(function(){o.removeFromParent(!0)}),t=cc.sequence(cc.spawn(cc.fadeOut(i),cc.moveTo(i,cc.v2(0,50))),e);o.runAction(t)}.bind(this),1.5)}}),t.on(cc.Node.EventType.TOUCH_END,function(t){e.VoiceMsgBg.active=!1,e._isRecording&&(e.endRecordTime=Date.now()),e._isRecording=!1,e.nativeEndRecordAction();var n=cc.scaleTo(.12,1);e.btnChatVoice.node.runAction(n)}),t.on(cc.Node.EventType.TOUCH_CANCEL,function(t){e.VoiceMsgBg.active=!1,e._isRecording&&(e.endRecordTime=Date.now()),e._isRecording=!1,e.nativeEndRecordAction();var n=cc.scaleTo(.12,1);e.btnChatVoice.node.runAction(n)}),i.instance.uploadFinish=function(t){var n=e._userId;i.sendAudioMessage(n,t),e.playSpeakAnimation(e._userId)}},VoiceMsgBgAnimation:function(){this.VoiceMsgBg.active=!0;var e=this.VoiceMsgBg.getChildByName("whileLayout"),t=e.getChildByName("childWhile");this.whileLayoutInterval&&clearInterval(this.whileLayoutInterval),this.whileLayoutInterval=setInterval(function(){var n=cc.instantiate(t);e.children.length>5&&e.removeAllChildren(),e.addChild(n)},200);var n=this.VoiceMsgBg.getChildByName("layout"),i=n.getChildByName("while");this.layoutInterval&&clearInterval(this.layoutInterval),this.layoutInterval=setInterval(function(){var e=cc.instantiate(i);n.children.length>3&&n.removeAllChildren(),n.addChild(e)},300)},nativeRecordAction:function(){r.isNativeIOS()?jsb.reflection.callStaticMethod(r.IOSClassName,"record"):r.isNativeAndroid()&&(jsb.reflection.callStaticMethod(r.ANDRIODClassName,"record","()V"),c.instance.pauseMusic())},nativeEndRecordAction:function(){r.isNativeIOS()?jsb.reflection.callStaticMethod(r.IOSClassName,"endRecord"):r.isNativeAndroid()&&(jsb.reflection.callStaticMethod(r.ANDRIODClassName,"endRecord","()V"),c.instance.resumeMusic())},playAudioUrl:function(e){r.isNativeIOS()?jsb.reflection.callStaticMethod(r.IOSClassName,"playUrl:",e):r.isNativeAndroid()&&jsb.reflection.callStaticMethod(r.ANDRIODClassName,"playUrl","(Ljava/lang/String;)V",e)},_handleUpdateDeskInfoAboutExitRoom:function(e){if(e.isDissolving){var t=e.dissolveAnswerInfo,n=this.alertAnsowerExitNode.getComponent("alert");n.alert(),n.unscheduleAllCallbacks(),this.contentAnsowerExitNode.children.forEach(function(e){e.active=!1}),this._playerInfos.forEach(function(e,n){var i=this.contentAnsowerExitNode.children[n],o=i.getChildByName("nickname"),c=i.getChildByName("fanzhu"),r=i.getChildByName("avatar_bg"),a=i.getChildByName("id"),s=t[n];i.active=!0,o.getComponent(cc.Label).string=e.nickname,this._deskInfo.createId==e.id?c.active=!0:c.active=!1,cc.loader.load({url:e.avatarUrl,type:"jpg"},function(e,t){if(!e){var n=new cc.SpriteFrame(t);r.getComponent(cc.Sprite).spriteFrame=n}}.bind(this)),1==s?a.getComponent(cc.Label).string="同意":a.getComponent(cc.Label).string=""}.bind(this));var i=e.dissolveLeftTime||60,o=this.alertAnsowerExitCountdownNode.getComponent("Countdown");o.startCountdown(i,function(e){if(e)return void this.clickAgreeOtherPlayerExit()}.bind(this));var c=e.dissolveUserId;if(c==this._userId){var r=this.alertAnsowerExitNode.getChildByName("alert_bg"),a=r.getChildByName("btnAgree"),s=r.getChildByName("btnDisagree");return a.active=!1,void(s.active=!1)}}},clickConfirmForceExit:function(){i.sendForceExitRoom(this._userId),cc.director.loadScene("hall")},clickConfirmRequestExit:function(){this.btnAlertRequestExitCancelButton.node.active=!1,this.btnAlertRequestExitConfirmButton.node.active=!1;var e=this.alertRequestExitNode.getComponent("alert");this._deskInfo.cIndex>0&&(e.setMessage("您正在申请协商退出，等待其他玩家同意"),this.alertRequestExitCountdownNode.getComponent("Countdown").startCountdown(60)),i.sendLeaveDesk(this._userId)},clickAgreeOtherPlayerExit:function(){var e=this.alertAnsowerExitNode.getChildByName("alert_bg"),t=e.getChildByName("btnAgree"),n=e.getChildByName("btnDisagree");t.active=!1,n.active=!1,i.sendAnswerDissolve(this._userId,1)},clickDisagreeOtherPlayerExit:function(){var e=this.alertAnsowerExitNode.getChildByName("alert_bg"),t=e.getChildByName("btnAgree"),n=e.getChildByName("btnDisagree");t.active=!1,n.active=!1,i.sendAnswerDissolve(this._userId,0)},_hideReqestExitNode:function(){this.alertRequestExitNode.active&&(this.alertRequestExitNode.active=!1,this.alertRequestExitCountdownNode.getComponent("Countdown").stop())},playShoot:function(e,t){var n=this._findPlayerInfoByUserId(e);n&&c.instance.playHumanDaQiang(n.sex);var i=this._findPlayerIndexByUserId(t);this._playerComponents.forEach(function(n){this._userId!=e&&this._userId!=t||n.showNextCompareScore(),n.playShootAnimation(e,i),n.playBulletHoleAnimation(t)}.bind(this))},playHomeRun:function(e){var t=this._findPlayerInfoByUserId(e);t&&c.instance.playHomeRun(t.sex),this.node.getComponent("animation")._quanleidaAnimation("long"),this._playerComponents.forEach(function(e){e.showNextCompareScore()}.bind(this))},playSpeakAnimation:function(e){this._playerComponents.forEach(function(t){t.playSpeakAnimation(e)})},_shootDatas:function(){var e=this._homeRunUserId(),t=this._deskInfo.shotData.filter(function(t){return t.fromUserId==e});return t},_shotData:function(){var e=this._homeRunUserId(),t=this._deskInfo.shotData.filter(function(t){return t.fromUserId!=e});return t},_homeRunUserId:function(){return this._deskInfo.allShotData},_deskInfoGameWay:function(){var e=this._deskInfo.setting3;null==e&&(e=2);var t=["庄家模式","无特殊牌","普通模式"];return t[e]},_deskInfoNumberOfGame:function(){var e=this._deskInfo.setting1,t=["10局","20局","40局","5局"];return 2==e?e=0:3==e?e=1:4==e?e=2:5==e&&(e=3),"局数："+t[e]},_deskInfoNumberOfPeople:function(){var e=this._deskInfo.setting2,t=["2人","3人","4人","5人"];return t[e]},_deskInfoPayInfo:function(){var e=this._deskInfo.setting4;null==e&&(e=0),0==e&&(e=1);var t=["房主霸主庄","房费AA"];return t[e]},_deskInfoJiaYiSeInfo:function(){var e=0==this._deskInfo.setting7?1:0,t=["无多一色","多一色"];return t[e]},_deskInfoGuiPaiInfo:function(){var e=void 0;null==this._deskInfo.setting8?e=0:0==this._deskInfo.setting8?e=1:1==this._deskInfo.setting8&&(e=2);var t=["无王牌","两张王牌","四张王牌"];return t[e]},_remainTimeStartUpdate:function(){},_remainTimeUpdate:function(){if(this._isRandomRoom()||s.instance.isPlaybacking())return this.labelRemainTime.string="",void(this.labelRemainTime.node.active=!1);if(null==this._deskInfo)return this.labelRemainTime.string="",void(this.labelRemainTime.node.active=!1);var e=0==this._deskInfo.setting1||1==this._deskInfo.setting1;if(e)return void(this.labelRemainTime.node.active=!1);if(this._deskInfo.createTime){this.labelRemainTime.node.active=!0;var t=u.parse(this._deskInfo.createTime,"YYYY-MM-DD HH:mm:ss").getTime(),n=3600,i=(Date.now()-t)/1e3;i=Math.max(n-i,0);var o=Math.floor(i/60),c=Math.floor(i%60);if(0==o&&0==c)return void(this.labelRemainTime.string="");var r=""+o;r.length<2&&(r="0"+r);var a=""+c;a.length<2&&(a="0"+a);var h="剩余时间：00:"+r+":"+a;this.labelRemainTime.string=h}},_handleTheSameOfIPAdress:function(e){if(e&&0!=e.length){var t=e.reduce(function(e,t){var n=e[t.ipAddress]||[];return n.push(t),e[t.ipAddress]=n,e},{}),n=null;for(var i in t){var o=t[i];if(o.length>1){n=o;break}}null!=n&&this._alertSameIpUserInfos(n)}},_alertSameIpUserInfos:function(e){var t="",n="";e.forEach(function(e,i){t=t+(i>0?" 和 ":"")+e.nickname,n+=e.id}),t+=" 在同一 IP 下！",this._didAlertSameIpMessage=this._didAlertSameIpMessage||{},this._didAlertSameIpMessage[n]||(this.showAlertMessage(t,!0),this._didAlertSameIpMessage[n]=!0)}});C.gongXiNiShow=function(e){this.instances._gongXiNiShow(e)},t.exports=C,cc._RFpop()},{ArrayExtension:"ArrayExtension",AudioManager:"AudioManager",KQCard:"KQCard",KQGlobalEvent:"KQGlobalEvent",KQNativeInvoke:"KQNativeInvoke",Playback:"Playback",Player:"Player",UserModelHelper:"UserModelHelper",fecha:"fecha",manager:"manager",socket:"socket"}],product:[function(e,t,n){"use strict";cc._RFpush(t,"a9ad2cC2BdEiaFSqV4XCWQV","product"),cc.Class({"extends":cc.Component,properties:{productId:""},onLoad:function(){},clickAction:function(){this.onClickAction(this.productId)},onClickAction:function(e){}}),cc._RFpop()},{}],randRoom:[function(e,t,n){"use strict";cc._RFpush(t,"4d298BlaelCHqiV5dTDjhuY","randRoom");var i=e("socket"),o=e("KQGlobalEvent");cc.Class({"extends":cc.Component,properties:{matchingLabel:cc.Label,timeNode:cc.Node,matchingNode:cc.Node,waitingPrefab:cc.Prefab,alertPrefab:cc.Prefab,tishi:cc.Node,_userId:null,_response:null},onLoad:function(){this._userId=i.instance.userInfo.id,cc.isRoomViewShow=!0,o.on(i.Event.ReceiveDeskInfo,this._socketReceiveDeskInfo,this),o.on(i.Event.SocketDisconnect,this._socketDisconnect,this),o.on(i.Event.SocketConnectSuccessed,this._socketConnected,this),o.on(i.Event.ReceiveInterRandom,this._socketReceiveInterRandom,this)},_socketReceiveDeskInfo:function(e){e.result&&cc.director.loadScene("play")},_socketReceiveInterRandom:function(e){if(this._response=e,this.unschedule(this._timeoutRandomAction),!e.result){var t=e.data.reason||"加入随机场失败";this.showAlertMessage(t),"你已经在匹配队列"==t?this._showMatching():this._hideMatching()}},_socketDisconnect:function(){this.matchingNode.active=!1,this.showNetworkMessage("网络链接断开，重新连接中...")},_socketConnected:function(){this.hiddenNetworkMessage()},onDestroy:function(){o.offTarget(this)},clickExit:function(){cc.director.loadScene("hall")},clickStart:function(){i.sendEnterRandom(this._userId),this._showMatching(),this.scheduleOnce(this._timeoutRandomAction,5)},clickCancel:function(){i.sendCancelRandom(this._userId),this._hideMatching()},_timeoutRandomAction:function(){this._hideMatching(),this.showAlertMessage("进入匹配失败")},_showMatching:function(){var e=this.matchingNode.getComponent("alert");e.alert(),this.matchingLabel.string="正在匹配中，请稍后...";var t=0;this.schedule(function(){t+=.5,this.timeNode.rotation=t},.01)},_hideMatching:function(){var e=this.matchingNode.getComponent("alert");e.dismissAction()},showNetworkMessage:function(e){if(this.unschedule(this._timeoutRandomAction),null!=this.networkNode){var t=cc.removeSelf();this.networkNode.runAction(t),this.networkNode=null}this.networkNode=cc.instantiate(this.waitingPrefab),this.node.addChild(this.networkNode);var n=this.networkNode.getComponent("alert"),i=this;n.onDismissComplete=function(){i.networkNode=null},n.setMessage(e),n.alert()},hiddenNetworkMessage:function(){null!=this.networkNode&&this.networkNode.getComponent("alert").dismissAction()},showAlertMessage:function(e){return e?(this.alertMessageNode||(this.alertMessageNode=cc.instantiate(this.alertPrefab),this.node.addChild(this.alertMessageNode)),this.alertMessageNode.getComponent("alert").setMessage(e),void this.alertMessageNode.getComponent("alert").alert()):void cc.error("不能显示为空的信息")}}),cc._RFpop()},{KQGlobalEvent:"KQGlobalEvent",socket:"socket"}],recordInfo:[function(e,t,n){"use strict";cc._RFpush(t,"e1457gdvd5I5aENjKvCTkCd","recordInfo");e("socket"),e("Playback"),e("record");cc.Class({"extends":cc.Component,properties:{timeLabel:cc.Label,jushuLabel:cc.Label,createUser:cc.Node,roomId:cc.Label,jifen:cc.Label,id:cc.Label,avatarNode:cc.Node,creatorImg:cc.Node,nicknameLabels:cc.Label,scoreLabels:[cc.Label],_parentId:null,reordInfo:cc.Node,_recordItemInfo:null,totalGameResult:cc.Node},onLoad:function(){this.totalGameResult=cc.find("Canvas/recordInfo")},setInfo:function(e){if(this._parentId=e.id,0!=e.playersInfo.length){var t=JSON.parse(e.playersInfo);e.scores=JSON.parse(e.scores);var n=e.scores[this.fen(e.userid,t.playersIndex)];this.jifen.string=n>=0?"+"+n:n;var i=t.players[this.creator(e.createUserId,t.playersIndex)].avatarUrl,o=this.avatarNode.getComponent(cc.Sprite);cc.loader.load({url:i,type:"jpg"},function(e,t){if(!e){var n=new cc.SpriteFrame(t);o.spriteFrame=n}}),this.roomId.string="房号："+t.roomId,this.timeLabel.string="时间："+t.time.substr(5,11),this.jushuLabel.string="局数："+this.js(t.setting1-2)}},js:function(e){var t=5;switch(e){case 0:t=5;break;case 1:t=10;break;case 2:t=20;break;case 3:t=30}return t},fen:function(e,t){for(var n=0;n<t.length;n++)if(t[n]==e)return n},creator:function(e,t){for(var n=0;n<t.length;n++)if(t[n]==e)return n},clickAction:function(e,t){var n=JSON.parse(t.playersInfo),i=this.totalGameResult.getComponent("TotalGameResult");i.setPlayerInfos(n.players,t),i._clickBtn(),this.totalGameResult.getComponent("alert").alert()},_startPlayback:function(e){},detailAction:function(e,t){},records:function(){}}),cc._RFpop()},{Playback:"Playback",record:"record",socket:"socket"}],record:[function(e,t,n){"use strict";cc._RFpush(t,"452f4rFUqRLFYlGEJS5kEWs","record");var i=e("KQGlobalEvent"),o=e("socket");cc.Class({"extends":cc.Component,properties:{scrollView:cc.Node,recordItem:cc.Prefab},onLoad:function(){this.scrollViewContent=this.scrollView.getComponent(cc.ScrollView).content,this._registerSocketEvent()},_registerSocketEvent:function(){i.on(o.Event.GetRecord,this._ReceiveRecordInfo,this)},_ReceiveRecordInfo:function(e){this.scrollViewContent.removeAllChildren();var t=0;e.data.filter(function(e){return e.playersInfo.length>0}).forEach(function(e){t++;var n=cc.instantiate(this.recordItem);this.scrollViewContent.addChild(n);var i=n.getComponent("recordInfo");i.setInfo(e);var o=n.children[7].getComponent(cc.Button);o.clickEvents[0].customEventData=e}.bind(this))},closeAction:function(){this.isSubPage?(this.isSubPage=!1,this.subScrollView.active=!1,this.scrollView.active=!0):this.node.getComponent("alert").dismissAction()}}),cc._RFpop()},{KQGlobalEvent:"KQGlobalEvent",socket:"socket"}],rule:[function(e,t,n){"use strict";cc._RFpush(t,"92f6eNs7RdDRJIRLCZnyulJ","rule"),cc.Class({"extends":cc.Component,properties:{},onLoad:function(){},clickExit:function(){cc.director.loadScene("hall")}}),cc._RFpop()},{}],scale:[function(e,t,n){"use strict";cc._RFpush(t,"c1c33tgIe9JvLb/mE+2mRnK","scale"),cc.Class({"extends":cc.Component,properties:{content:cc.Node},onLoad:function(){var e=cc.director.getVisibleSize(),t={};t.width=this.node.width,t.height=this.node.height;var n=e.width/t.width,i=e.height/t.height,o=Math.min(n,i).toFixed(2);this.node.scaleX=o,this.node.scaleY=o}}),cc._RFpop()},{}],selectMoShi:[function(e,t,n){"use strict";cc._RFpush(t,"0030eDrh7xEm6AeR3FCg5WU","selectMoShi"),cc.Class({"extends":cc.Component,properties:{nodes:[cc.Node],selectedIndex:0,_select:[],_selected:0,beilv:cc.Node,_blShow:0},onLoad:function(){this.beilv.active=this._blShow,this._select=[1,1,1,0,0],cc.set&&(this._select=cc.set.setting3);for(var e=this,t=0;t<this.nodes.length;t++){var n=this._select[t];this.nodes[t].getComponent("select").setSelected(n);var i=this.nodes[t].getChildByName("title");this._select[t]?i.color=new cc.Color(13,210,222):i.color=new cc.Color(255,255,255),3==t&&(this.beilv.active=this._blShow=this._select[3])}for(var t=0;t<this.nodes.length;t++){var o=this.nodes[t].getComponent("select");o.index=t,o.clickAction=function(){for(var t=this.index,n=0;n<e.nodes.length;n++){e.nodes[n].getComponent("select")}this.setSelected(e._select[t]=!e._select[t]),3==this.index&&(e.beilv.active=this._blShow=e._select[3]),e._select[t]=e._select[t],e.selectedIndex=t,e.onSelectChange(t);var i=this.node.children[0];e._select[t]?i.color=new cc.Color(13,210,222):i.color=new cc.Color(255,255,255)}}},onSelectChange:function(e){}}),cc._RFpop()},{}],select_mapai:[function(e,t,n){"use strict";cc._RFpush(t,"8e7e53kJcJK9rwMSxnloqI5","select_mapai"),cc.Class({"extends":cc.Component,properties:{pai:cc.Node,mapai:{"default":[],type:cc.SpriteFrame}},onLoad:function(){this.selectMa=this.node.getComponent("select_ma"),this.selectMa.onLoad(),this.com=this.pai.getComponent(cc.Sprite)},clickBtnComfirm:function(){this.com.spriteFrame=this.mapai[cc.from.ma]}}),cc._RFpop()},{}],select_ma:[function(e,t,n){"use strict";cc._RFpush(t,"4bc0b2bZGRGXoAfdO3Y6Squ","select_ma"),cc.Class({"extends":cc.Component,properties:{rightIcon:[cc.Node],mapaiRight:cc.Node},onLoad:function(){null==cc.from&&(cc.from={}),0==this.mapaiRight.active?(cc.from.isUseMa=!1,cc.from.ma=null):(cc.from.isUseMa=!0,cc.from.ma=0);for(var e=0;e<this.rightIcon.length;e++)0==e?(this.rightIcon[e].active=!0,cc.from.ma=0,this.select=this.rightIcon[e]):this.rightIcon[e].active=!1},onMaPaiClick:function(e){var t=e.target.name;if(t!=this.select.parent.name){"select_kuang1"==t?(this.select=this.rightIcon[2],cc.from.ma=2):"select_kuang2"==t?(this.select=this.rightIcon[1],cc.from.ma=1):"select_kuang3"==t&&(this.select=this.rightIcon[0],cc.from.ma=0);for(var n=0;n<this.rightIcon.length;n++)this.rightIcon[n].active=!1;this.select.active=!0}}}),cc._RFpop()},{}],selectbeilv:[function(e,t,n){"use strict";cc._RFpush(t,"253cf+Bll9FV5ngl0DW3PxZ","selectbeilv");var i=(e("KQGlobalEvent"),e("socket"));cc.Class({"extends":cc.Component,properties:{_userid:0},onLoad:function(){},clickBeiLv:function(e,t){this.node.active=!1,i.sendBeiLv(t,this._userid)}}),cc._RFpop()},{KQGlobalEvent:"KQGlobalEvent",socket:"socket"}],select:[function(e,t,n){"use strict";cc._RFpush(t,"e913aIwAtVEo5jMrf40D5rw","select"),cc.Class({"extends":cc.Component,properties:{bgNode:cc.Node,selectedNode:cc.Node,pai:cc.Node},onLoad:function(){this.selected=!0},clickAction:function(){this.selected=!this.selected,this.selectedNode.active=this.selected},setSelected:function(e){this.selected=e,this.selectedNode.active=this.selected},clickSelectKuang:function(){this.selected=!this.selected,this.selectedNode.active=this.selected,cc.from.isUseMa=this.selected;var e=this.pai.getComponent(cc.Button);this.selectedNode.active===!1?e.interactable=!1:e.interactable=!0}}),cc._RFpop()},{}],singleSelect:[function(e,t,n){"use strict";cc._RFpush(t,"194a8h4vXFO+bXX92yzqbfq","singleSelect"),cc.Class({"extends":cc.Component,properties:{nodes:[cc.Node],selectedIndex:0},onLoad:function(){var e=this,t=0,n=0,i=0,o=0;cc.set&&(n=cc.set.setting1,t=cc.set.setting2,i=cc.set.setting4,o=cc.set.setting5);for(var c=0;c<this.nodes.length;c++){var r=this.selectedIndex==c;this.nodes[c].getComponent("select").setSelected(r);var a=this.selectedIndex;this.nodes[c].getChildByName("title").color=new cc.Color(255,255,255),a==c&&(this.nodes[a].getChildByName("title").color=new cc.Color(13,210,222))}for(var c=0;c<this.nodes.length;c++){var s=this.nodes[c].getComponent("select");s.index=c,s.clickAction=function(){for(var t=0;t<e.nodes.length;t++){var n=e.nodes[t].getComponent("select");n.setSelected(!1)}for(var i=this.node.parent.children,o=0;o<i.length;o++)if(i[o].children.length>0){var c=i[o].getChildByName("title");c.color=new cc.Color(255,255,255)}this.node.getChildByName("title").color=new cc.Color(13,210,222),this.setSelected(!0),e.selectedIndex=this.index,e.onSelectChange(this.index)}}"renshu"==this.node._name&&cc.set&&(console.log(t),this.remember_set(t)),"jushu"==this.node._name&&cc.set&&this.remember_set(n),"cards"==this.node._name&&cc.set&&this.remember_set(i),"beiLv"==this.node._name&&cc.set&&this.remember_set(o)},remember_set:function(e){this.selectedIndex=e;for(var t=0;t<this.nodes.length;t++){var n=e==t;this.nodes[t].getComponent("select").setSelected(n);this.nodes[t].getChildByName("title").color=new cc.Color(255,255,255),e==t&&(this.nodes[e].getChildByName("title").color=new cc.Color(13,210,222))}},onSelectChange:function(e){}}),cc._RFpop()},{}],slider:[function(e,t,n){"use strict";cc._RFpush(t,"1c921w7bEFKUIdNwItOX3oG","slider"),cc.Class({"extends":cc.Component,properties:{indicatorNode:cc.Node,backgroundNode:cc.Node,selectedNode:cc.Node,value:0},onLoad:function(){var e=this;this.indicatorNode.on(cc.Node.EventType.TOUCH_START,function(e){}),this.indicatorNode.on(cc.Node.EventType.TOUCH_MOVE,function(t){var n=e.node.convertToNodeSpace(cc.v2(t.getLocationX(),t.getLocationY()));e.updateSlider(n)}),this.indicatorNode.on(cc.Node.EventType.TOUCH_END,function(t){var n=e.node.convertToNodeSpace(cc.v2(t.getLocationX(),t.getLocationY()));e.updateSlider(n)}),this.indicatorNode.on(cc.Node.EventType.TOUCH_CANCEL,function(t){var n=e.node.convertToNodeSpace(cc.v2(t.getLocationX(),t.getLocationY()));e.updateSlider(n)}),this.maxWidth=this.node.width-28,this.setValue(this.value)},updateSlider:function(e){var t=e.x;t<0&&(t=0),t>this.maxWidth&&(t=this.maxWidth),this.setValue(t/this.maxWidth),this.onValueChange(this.value)},setValue:function(e){this.value=e,this.value<0&&(this.value=0),this.value>1&&(this.value=1),this.maxWidth=this.node.width-28,this.indicatorNode.x=this.value*this.maxWidth+10,this.selectedNode.width=this.value*this.maxWidth+this.indicatorNode.width/2},onValueChange:function(e){cc.log(e)}}),cc._RFpop()},{}],socket:[function(e,t,n){"use strict";cc._RFpush(t,"cf75cLLNo1ETbJFrx/23i/H","socket");var i=(e("manager"),e("KQGlobalEvent")),o=e("KQNativeInvoke"),c={MaxReconnectCheckInterval:5},r=cc.Class({"extends":cc.Component,properties:{_lastReceiveMsgTime:0,_timeout:8},statics:{instance:null,url:"ws://39.108.112.11:5041"},onLoad:function(){r.instance=this,this.name="socket",cc.game.addPersistRootNode(this.node),cc.game.isPersistRootNode(this.node)&&cc.log("添加全局节点 Socket 成功"),this._registerAppActiveChange(),this.isCreating=!1,this.createIndex=0,this.createSocket(),this.schedule(function(){this.checkConnection()},5),this.recvTime=Date.now(),this._checkSocket()},checkConnection:function(){this.sendMessage("checkAction","")},createSocket:function(){var e=this;return this.createIndex++,this.createIndex>5?(this.networkError(),void o.forceExitApp()):(this.isCreating=!0,i.emit(r.Event.SocketConnecting),this.ws=new WebSocket(r.url),null===this.ws?(this.networkError(),i.emit(r.Event.SocketConnectError,{data:"Socket 创建失败"}),void o.forceExitApp()):(this.socketError=!1,this.ws.onopen=function(t){e._lastReceiveMsgTime=cc.sys.now(),i.emit(r.Event.SocketConnectSuccessed,t),e.isCreating=!1,e.socketError=!1,e.createIndex=0,e.connectionSuccess(),e.sendReconnectInfo()},this.ws.onmessage=function(t){e._lastReceiveMsgTime=cc.sys.now(),i.emit(r.Event.SocketReceiveMessage,t.data),e.isCreating=!1,e.socketError=!1,e.receviceMessage(t.data),e._dispatchResponse(t.data),e.recvTime=Date.now()},this.ws._kq_onerror=function(t){if(cc.error("WebSocket 连接错误："+t),i.emit(r.Event.SocketConnectError,{data:t}),e.ws.close(),e.ws){var n=e.ws;e.ws.onclose(),n.onclose=function(){}}},void(this.ws.onclose=function(t){e.isCreating=!1,e.socketError=!0,e.ws=null,e.connectionDisconnect(),i.emit(r.Event.SocketDisconnect,t)})))},reconnect:function(){var e=this;this.scheduleOnce(function(){!e.isCreating&&e.socketError&&e.createSocket()},2)},sendReconnectInfo:function(){var e=this;this.scheduleOnce(function(){if(null!=this.userInfo){var t=e.userInfo.user_id||e.userInfo.id;e.sendMessage("reconnect",{userId:t})}},1)},receviceMessage:function(e){},connectionDisconnect:function(){},connectionSuccess:function(){},networkError:function(){},checkNetworkStart:function(){},checkNetworkEnd:function(){},_dispatchResponse:function(e){var t=JSON.parse(e),n=t.action;n&&i.emit(n,t)},_registerAppActiveChange:function(){cc.game.on(cc.game.EVENT_HIDE,this._appEnterBackground,this),cc.game.on(cc.game.EVENT_SHOW,this._appBecomActive,this)},_appEnterBackground:function(){var e=cc.sys.now();if(!(e-this._lastAppEnterBackgroundTime<100)){this._lastAppEnterBackgroundTime=e;var t=this.userInfo?this.userInfo.id:void 0;r.sendAppPause(t),this._cancelCheckSocket()}},_appBecomActive:function(){var e=cc.sys.now();if(!(e-this._lastAppBecomActiveTime<100)){this._lastAppBecomActiveTime=e;var t=this.userInfo?this.userInfo.id:void 0;r.sendAppActive(t),this._checkSocket(),this.scheduleOnce(function(){this._checkSocketExecute()}.bind(this),1.5)}},enterbackgroudAction:function(){this._appEnterBackground()},resumeAction:function(){this._checkNetwork(),this._appBecomActive()},sendMessage:function(e,t){return t=this._strongVerifyData(t),this.socketError?(cc.error("socket 连接错误："+this.socketError),void this.reconnect()):void(cc.sys.isObjectValid(this.ws)?this.ws.readyState===WebSocket.OPEN&&this.ws.send(this._convertParameterToString(e,t)):this.connectionDisconnect())},_strongVerifyData:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return"string"==typeof e&&(e={string:e}),null==e&&(e={}),e.userId||this.userInfo&&"object"==typeof this.userInfo&&this.userInfo.id&&(e.userId=this.userInfo.id),
e},_convertParameterToString:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n={};return n.action=e,n.data=t,JSON.stringify(n)},_checkNetwork:function(){this.checkNetworkNow&&this.checkNetworkNow(),this.shouldCheck=!0,this.socketError?this.connectionDisconnect():(this.recvTime=0,this.sendMessage("checkAction",""),this.scheduleOnce(function(){this.checkNetworkEnd(),this.shouldCheck=!1,0===this.recvTime&&this.connectionDisconnect()},2.5))},_checkSocket:function(){this.schedule(this._checkSocketExecute,c.MaxReconnectCheckInterval,cc.macro.REPEAT_FOREVER)},_cancelCheckSocket:function(){this.unschedule(this._checkSocketExecute)},_checkSocketExecute:function(){if(this._isSocketTimeout()&&this.ws)return void this.ws._kq_onerror("连接超时")},_isSocketTimeout:function(){return this._lastReceiveMessageInterval()>=this._timeout},_lastReceiveMessageInterval:function(){var e=cc.sys.now(),t=(e-this._lastReceiveMsgTime)/1e3;return t}});r.Event={SocketConnecting:"SocketConnecting",SocketConnectSuccessed:"SocketConnectSuccessed",SocketDisconnect:"SocketDisconnect",SocketConnectError:"SocketConnectError",SocketReceiveMessage:"SocketReceiveMessage",LoginJoin:"loginJoin",RecordId:"recordId",OnceAgain:"onceAgain",BeiLv:"beiLv",InviteCode:"inviteCode",JoinDesk:"joinDesk",CreateDesk:"createDesk",LeaveDesk:"leaveDesk",DissolveDesk:"dissolveDesk",AnswerDissolve:"answerDissolve",GetDeskInfo:"getDeskInfo",SendImage:"sendImage",SendText:"sendText",SendEmoji:"sendEmoji",ChangeInfo:"changeInfo",SendAudioMessage:"sendAudioMessage",GetRecord:"getRecord",GetItemRecord:"getItemRecord",PlayCard:"playCard",TimeoutDissolve:"timeoutDissolve",Feedback:"feedback",SharePng:"sharePng",EnterRandom:"interRandom",CancelRandom:"cancelRandom",ForceExitRandom:"dissolve",Ready:"ready",StartGame:"startGame",GetHallInfo:"getHallInfo",GetUserInfo:"getUserInfo",CheckAction:"checkAction",Pause:"pause",Active:"active",Qingli:"qingli",ReceiveRequestDissolve:"requestDissolve",ReceiveRequestDissolveResult:"requestDissolveResult",ReceiveChatText:"sendText",ReceiveChatEmoji:"sendEmoji",ReceiveDeskInfo:"deskInfo",ReceiveGameOver:"gameOver",ReceiveFaPai:"fapai",ReceiveSharePng:"sharePngs",ReceiveOnlineStatus:"sendOnlineStatus",ReceiveOnChangeInfo:"changeInfo",ReceiveAudioMessage:"sendAudioMessage",ReceivePlayCard:"playCard",ReceiveCreateDesk:"createDesk",ReceiveReady:"ready",ReceiveHallInfo:"getHallInfo",ReceiveGetUserInfo:"getUserInfo",ReceiveCheckAction:"checkAction",ReceiveForceExit:"forceExit",ReceiveDissolveDesk:"dissolveDesk",ReceiveInterRandom:"interRandom",ReceivePause:"pause",ReceiveInviteCode:"inviteCode",ReceiveLeaveDesk:"leaveDesk",ReceiveSelectBeiLv:"selectBeiLv",ReceiveBeiLv:"beiLv",ReceiveQingLi:"qingli",ReceiveRecordId:"recordId",ReceiveLoginJoin:"loginJoin",ReceiveOnceAgain:"onceAgain",ReceiveNoUionid:"noUionid"},r.sendCheckAction=function(){this.instance.sendMessage(this.Event.CheckAction,null)},r.sendDidReceiveGameOverAction=function(e){var t=e?{userId:e}:null;this.instance.sendMessage(r.Event.DidReceiveGameOverAction,t)},r.sendAppPause=function(e){var t=e?{userId:e}:null;this.instance.sendMessage(this.Event.Pause,t)},r.sendAppActive=function(e){var t=e?{userId:e}:null;this.instance.sendMessage(this.Event.Active,t)},r.sendCreateDesk=function(e,t){cc.assert(e),cc.assert(t),e.userId=t,this.instance.sendMessage(this.Event.CreateDesk,e)},r.sendQingli=function(e,t){var n={leaveId:e,userId:t};this.instance.sendMessage(this.Event.Qingli,n)},r.sendLoginJoin=function(e,t){var n={roomId:e,userId:t};this.instance.sendMessage(this.Event.LoginJoin,n)},r.sendOnceAgain=function(e,t){var n={userId:t,again:e};this.instance.sendMessage(this.Event.OnceAgain,n)},r.sendJoinDesk=function(e,t){cc.assert(e),cc.assert(t);var n={roomId:e,userId:t};this.instance.sendMessage(this.Event.JoinDesk,n)},r.sendBeiLv=function(e,t){var n={beilv:e,userId:t};this.instance.sendMessage(this.Event.BeiLv,n)},r.sendInviteCode=function(e,t){var n={inviteCode:e,userId:t};this.instance.sendMessage(this.Event.InviteCode,n)},r.sendGetDesckInfo=function(e){cc.assert(e);var t={userId:e};this.instance.sendMessage(this.Event.GetDeskInfo,t)},r.sendText=function(e,t){var n={msg:t,userId:e};this.instance.sendMessage(this.Event.SendText,n)},r.sendEmoji=function(e,t){var n={emoji:t,userId:e};this.instance.sendMessage(this.Event.SendEmoji,n)},r.sendChangeInfo=function(e,t){var n={changeInfo:t,userId:e};this.instance.sendMessage(this.Event.ChangeInfo,n)},r.sendAudioMessage=function(e){var t=arguments.length<=1||void 0===arguments[1]?"":arguments[1];if(cc.assert(e),cc.assert(t.length>0),0!=t.length){var n={url:t,userId:e};this.instance.sendMessage(this.Event.SendAudioMessage,n)}},r.sendImage=function(e,t){cc.assert(e),cc.assert(t);var n={msg:t,userId:e};this.instance.sendMessage(this.Event.SendImage,n)},r.sendGetRecrod=function(e){cc.assert(e);var t={userId:e};this.instance.sendMessage(this.Event.GetRecord,t)},r.sendGetRecrodFromId=function(e){var t={recordId:e};this.instance.sendMessage(this.Event.RecordId,t)},r.sendDissolveDesk=function(e){cc.assert(e);var t={userId:e};this.instance.sendMessage(this.Event.DissolveDesk,t)},r.sendGetItemRecord=function(e,t){cc.assert(e),cc.assert(t);var n={userId:e,parentId:t};this.instance.sendMessage(this.Event.GetItemRecord,n)},r.sendLeaveDesk=function(e){cc.assert(e);var t={userId:e};this.instance.sendMessage(this.Event.LeaveDesk,t)},r.sendAnswerDissolve=function(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1];cc.assert(e);var n={userId:e,answer:t};this.instance.sendMessage(this.Event.AnswerDissolve,n)},r.sendForceExitRoom=function(e){cc.assert(e);var t={userId:e};this.instance.sendMessage(this.Event.DissolveDesk,t)},r.sendPlayCard=function(e,t){cc.assert(e);var n={userId:e,card:t};this.instance.sendMessage(this.Event.PlayCard,n)},r.sendTimeoutDissolve=function(e){cc.assert(e);var t={userId:e};this.instance.sendMessage(this.Event.TimeoutDissolve,t)},r.sendFeedback=function(e,t){cc.assert(e),cc.assert(t);var n={userId:e,text:t};this.instance.sendMessage(this.Event.Feedback,n)},r.sendSharePng=function(e){cc.assert(e);var t={userId:e};this.instance.sendMessage(this.Event.SharePng,t)},r.sendEnterRandom=function(e){cc.assert(e);var t={userId:e};this.instance.sendMessage(this.Event.EnterRandom,t)},r.sendCancelRandom=function(e){cc.assert(e);var t={userId:e};this.instance.sendMessage(this.Event.CancelRandom,t)},r.sendReady=function(e){cc.assert(e);var t={userId:e};this.instance.sendMessage(this.Event.Ready,t)},r.sendStartGame=function(e){cc.assert(e);var t={userId:e};cc.log(this.Event.StartGame),cc.log(),this.instance.sendMessage(this.Event.StartGame,t)},r.sendGetHallInfo=function(e){var t={userId:e};this.instance.sendMessage(this.Event.GetHallInfo,t)},r.sendGetUserInfo=function(e,t){var n={userId:e,openId:t};this.instance.sendMessage(this.Event.GetUserInfo,n)},t.exports=r,cc._RFpop()},{KQGlobalEvent:"KQGlobalEvent",KQNativeInvoke:"KQNativeInvoke",manager:"manager"}],test:[function(e,t,n){"use strict";cc._RFpush(t,"f3a5ah1deZEh6HfPdghRXyA","test"),this._changeCardScors=function(e){e.forEach(function(e){e.scores=e.number}),e=this._convertOneToA(e);var t=!0,n=!0;if(e.forEach(function(e){e.scores<10&&(t=!1)}),e.forEach(function(e){(e.scores>5||14==e.scores)&&20!=e.scores&&(n=!1)}),t){e.sort(function(e,t){return t.scores-e.scores});for(var i=14,o=[],c=0;c<5;c++)o.push(i),i-=1;for(var r=0;r<o.length;r++)for(var c=0;c<e.length;c++){var a=e[c].scores;a==o[r]&&a<15&&o.splice(r,1)}e.forEach(function(e){e.scores>=20&&(e.scores=o.splice(0,1)[0])})}else if(n){e.sort(function(e,t){return t.scores-e.scores});for(var i=5,o=[],c=0;c<5;c++)o.push(i),i-=1;for(var r=0;r<o.length;r++)for(var c=0;c<e.length;c++){var a=e[c].scores;a==o[r]&&a<15&&o.splice(r,1)}e.forEach(function(e){e.scores>=20&&(e.scores=o.splice(0,1)[0])})}else{e.sort(function(e,t){return e.scores-t.scores});for(var o=[],c=0;c<5;c++){var s=parseInt(e[0].scores)+c;o.push(s)}for(var r=0;r<o.length;r++)for(var c=0;c<e.length;c++){var a=e[c].scores;a==o[r]&&a<15&&o.splice(r,1)}e.forEach(function(e){e.scores>=20&&(e.scores=o.splice(0,1)[0])})}return e=this._convertOneToA(e),e.sort(function(e,t){return e.scores-t.scores}),e},cc._RFpop()},{}],time:[function(e,t,n){"use strict";cc._RFpush(t,"458d4VWlwNDT6xQ+pFW8Bby","time"),cc.Class({"extends":cc.Component,properties:{leftNode:cc.Node,RigthNode:cc.Node,_time:null},onLoad:function(){},setTime:function(e){this.unscheduleAllCallbacks(),this._time=e,this.leftNode.rotation=0,this.RigthNode.rotation=0,this.RigthNode.stopAllActions(),this.leftNode.stopAllActions(),this.leftNode.runAction(cc.rotateBy(this._time,-180)),this.scheduleOnce(function(){this.RigthNode.runAction(cc.rotateBy(this._time,180))}.bind(this),this._time)}}),cc._RFpop()},{}],userInfo:[function(e,t,n){"use strict";cc._RFpush(t,"e8d10xRGnJAn42wJsuC6aBi","userInfo");var i=e("AudioManager"),o=e("Playback");cc.Class({"extends":cc.Component,properties:{spriteAvatar:cc.Sprite,labelNickname:cc.Label,labelScore:cc.Label,spriteOffline:cc.Sprite,voiceNode:cc.Node,homeRunNode:cc.Node,readyNode:cc.Node,beilv:cc.Label,shootNodes:[cc.Node],bankerNode:cc.Node,fangZhuNode:cc.Node,qingli:cc.Node,id:cc.Label},onLoad:function(){this.updateScore()},setqingli:function(){var e=!(arguments.length<=0||void 0===arguments[0])&&arguments[0];this.qingli.active=0!=e},setReadyNodeVisible:function(){var e=!(arguments.length<=0||void 0===arguments[0])&&arguments[0];this.readyNode.active=0!=e},setBeilvLabel:function(e){this.beilv.string=e?e+"倍":""},setFangZhuNodeVisible:function(){var e=!(arguments.length<=0||void 0===arguments[0])&&arguments[0];this.fangZhuNode.active=0!=e},updateScore:function(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0];e>=0?this.labelScore.string="+"+e:this.labelScore.string=""+e},updateUserId:function(e){this.id.string=e?"ID:"+e:""},updateNickname:function(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0];this.labelNickname.string=e},updateAvatar:function(e){e.endsWith("png")||e.endsWith("jpg")||e.endsWith("gif"),cc.loader.load({url:e,type:"jpg"},function(e,t){if(!e){var n=new cc.SpriteFrame(t);this.spriteAvatar.spriteFrame=n}}.bind(this))},setOfflineVisible:function(){var e=!(arguments.length<=0||void 0===arguments[0])&&arguments[0];o.instance.isPlaybacking()||(this.spriteOffline.node.active=e)},setIsBanker:function(){var e=!(arguments.length<=0||void 0===arguments[0])&&arguments[0];this.bankerNode.active=e},playShootAnimation:function(){arguments.length<=0||void 0===arguments[0]?0:arguments[0];i.instance.playDaQiang()},playBulletHoleAnimation:function(){var e=this.node.getChildByName("bulletHole");e.active=!0;var t=e.getComponent(cc.Animation);t.play("bulletHole").on("finished",function(){e.active=!1},this)},playSpeakAnimation:function(){this.voiceNode.active=!0,this.scheduleOnce(function(){this.voiceNode.active=!1}.bind(this),4)},playHomeRunAimation:function(){}}),cc._RFpop()},{AudioManager:"AudioManager",Playback:"Playback"}],zhuanNumCtrl:[function(e,t,n){"use strict";cc._RFpush(t,"1b0dfWuicJLYJDmjjT1lmQc","zhuanNumCtrl"),cc.Class({"extends":cc.Component,properties:{zhuanNumLabel:cc.Label,jushu:cc.Node,AA:cc.Node,_selectedPeopleIndex:null,_selectedJushuIndex:null,_selectedAAIndex:null},onLoad:function(){this._ctrl()},clickPeopleAction:function(){this._ctrl()},clickAAAction:function(){this._ctrl()},clickJushuAction:function(){this._ctrl()},_ctrl:function(){this._selectedPeopleIndex=this.node.getComponent("singleSelect").selectedIndex,this._selectedJushuIndex=this.jushu.getComponent("singleSelect").selectedIndex,this._selectedAAIndex=this.AA.getComponent("checkSelect").selectedIndex;var e=2;0==this._selectedPeopleIndex?e=2:1==this._selectedPeopleIndex?e=3:2==this._selectedPeopleIndex?e=4:3==this._selectedPeopleIndex&&(e=5);var t=20;0==this._selectedJushuIndex?t=20:1==this._selectedJushuIndex?t=40:2==this._selectedJushuIndex?t=80:3==this._selectedJushuIndex&&(t=10),null!=this._selectedAAIndex&&(t=Math.ceil(t/e)),this.zhuanNumLabel.string=t}}),cc._RFpop()},{}]},{},["AudioManager","CardPrefab","CardTypeCombine","CardTypeSprite","ChatMessage","MsgControl","KQGlobalEvent","ArrayExtension","NumberExtension","SpriteHelper","StringExtension","fecha","Invit","GetCardPointsSameCount","KQCard","KQCardColorsHelper","KQCardFindTypeExtension","KQCardPointsHelper","KQCardResHelper","KQCardScoreExtension","KQCardScoretsHelper","KQCardSelectExtension","test","UserModelHelper","NetworkError","ChatTextRecord","CompareCards","Countdown","GameResult","Player","ResultItem","TotalGameResult","TotalGameResultItem","UserSampleInfo","maPai","Playback","Setting","KQGlabolSocketEventHander","KQNativeInvoke","agreement","alert","animation","cardNum","cards","cardsBack","cellText","changInfo","change_mapai","checkSelect","choujiang","create_btn_anima","game","hall","hall_btn_anima","help","inviteCode","joinRoom","launch","login","manager","overTime","play","product","randRoom","record","recordInfo","rule","scale","select","selectMoShi","select_ma","select_mapai","selectbeilv","singleSelect","slider","socket","time","userInfo","zhuanNumCtrl"]);