{"version":3,"sources":["userInfo.js"],"names":["AudioManager","require","Playback","cc","Class","extends","Component","properties","spriteAvatar","Sprite","labelNickname","Label","labelScore","spriteOffline","voiceNode","Node","homeRunNode","readyNode","beilv","shootNodes","bankerNode","fangZhuNode","qingli","id","onLoad","updateScore","setqingli","visible","active","setReadyNodeVisible","setBeilvLabel","bl","string","setFangZhuNodeVisible","score","updateUserId","updateNickname","nickname","updateAvatar","avatar","endsWith","loader","load","url","type","err","data","frame","SpriteFrame","spriteFrame","bind","setOfflineVisible","instance","isPlaybacking","node","setIsBanker","isBanker","playShootAnimation","toIndex","playDaQiang","playBulletHoleAnimation","bulletHoleNode","getChildByName","anim","getComponent","Animation","play","on","playSpeakAnimation","scheduleOnce","playHomeRunAimation"],"mappings":"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","file":"userInfo.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["const AudioManager = require('AudioManager');\nconst Playback = require('Playback');\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        spriteAvatar: cc.Sprite,\n        labelNickname: cc.Label,\n        labelScore: cc.Label,\n        spriteOffline: cc.Sprite,\n        voiceNode: cc.Node,\n        homeRunNode: cc.Node,\n        readyNode: cc.Node,\n        beilv:cc.Label,\n        shootNodes: [cc.Node],\n        bankerNode: cc.Node,\n        fangZhuNode: cc.Node,\n        qingli:cc.Node,\n        id:cc.Label,\n    },\n\n    // use this for initialization\n    onLoad: function () {\n      this.updateScore();\n    },\n\n    setqingli :function(visible = false){\n      this.qingli.active = (visible != false);\n    },\n\n    setReadyNodeVisible: function (visible = false) {\n      this.readyNode.active = (visible != false);\n    },\n    setBeilvLabel :function(bl){\n      //this.beilv.active = true;\n      this.beilv.string = bl?bl+\"倍\":'';\n    },\n\n    setFangZhuNodeVisible: function (visible = false) {\n        this.fangZhuNode.active = (visible != false);\n    },\n\n    updateScore: function (score = 0) {\n        if(score >= 0) {\n            this.labelScore.string = \"+\" + score;\n        }\n        else {\n            this.labelScore.string = \"\"+score;\n        }\n    },\n    updateUserId:function(id){\n      this.id.string = id ? (\"ID:\"+id):\"\";\n    },\n    updateNickname: function(nickname = \"\") {\n      this.labelNickname.string = nickname;\n    },\n\n    updateAvatar: function (avatar) {\n      if (avatar.endsWith(\"png\")\n      || avatar.endsWith(\"jpg\")\n      || avatar.endsWith(\"gif\")) {\n\n      } else {\n        //avatar = avatar + \".png\";\n      }\n\n      cc.loader.load({url:avatar,type:\"jpg\"}, function (err, data) {\n        if (err) {\n          return;\n        }\n\n        var frame = new cc.SpriteFrame(data);\n        this.spriteAvatar.spriteFrame = frame;\n      }.bind(this));\n    },\n\n    setOfflineVisible: function (visible = false) {\n      if (Playback.instance.isPlaybacking()) {\n        // 如果是处理回放状态，就不用再处理离线消息了\n        return;\n      }\n\n      this.spriteOffline.node.active = visible;\n    },\n\n    setIsBanker: function(isBanker = false) {\n      this.bankerNode.active = isBanker;\n    },\n\n    playShootAnimation: function (toIndex = 0) {\n      //let shootNode = this.shootNodes[toIndex];\n      //shootNode.active = true;\n      //let anim = shootNode.getComponent(cc.Animation);\n      //anim.play('shoot').on('finished', function () {\n      //  shootNode.active = false;\n      //}, this);\n\n      AudioManager.instance.playDaQiang();\n    },\n\n    playBulletHoleAnimation: function () {\n      let bulletHoleNode = this.node.getChildByName('bulletHole');\n      bulletHoleNode.active = true;\n      let anim = bulletHoleNode.getComponent(cc.Animation);\n      anim.play('bulletHole').on('finished', function () {\n        bulletHoleNode.active = false;\n      }, this);\n    },\n\n    playSpeakAnimation: function () {\n      this.voiceNode.active = true;\n      this.scheduleOnce(function () {\n        this.voiceNode.active = false;\n      }.bind(this), 4);\n    },\n\n    // 播放全垒打动画\n    playHomeRunAimation: function () {\n      //let alert = this.homeRunNode.getComponent('alert');\n      //alert.alert();\n      //this.scheduleOnce(function () {\n      //  this.homeRunNode.active = false;\n      //}.bind(this), 2);\n    },\n});\n"]}