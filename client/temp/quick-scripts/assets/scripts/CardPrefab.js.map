{"version":3,"sources":["CardPrefab.js"],"names":["KQCard","require","cc","Class","extends","Component","properties","graySprite","Sprite","_cardName","_kqCardMode","onLoad","node","active","setCard","cardName","_setCardName","_loadCardFrame","spriteFrame","getComponent","bind","cardMode","setSelected","selected","isSelected","_cardFullName","cardShortName","startsWith","callback","assert","loader","loadRes","SpriteAtlas","err","atlas","error","frame","getSpriteFrame"],"mappings":";;;;;;AAAA,IAAMA,SAASC,QAAQ,QAAR,CAAf;;AAEAC,GAAGC,KAAH,CAAS;AACLC,WAASF,GAAGG,SADP;;AAGLC,cAAY;AACRC,gBAAYL,GAAGM,MADP;;AAGRC,eAAW,IAHH;AAIRC,iBAAa;AAJL,GAHP;;AAUL;AACAC,UAAQ,kBAAY;AAClB,SAAKJ,UAAL,CAAgBK,IAAhB,CAAqBC,MAArB,GAA8B,KAA9B;AACD,GAbI;;AAeL;AACAC,WAAS,iBAAUC,QAAV,EAAoB;AAC3B,SAAKC,YAAL,CAAkBD,QAAlB;;AAEA,SAAKE,cAAL,CAAoBF,QAApB,EAA8B,UAAUG,WAAV,EAAuB;AACnD,WAAKN,IAAL,CAAUO,YAAV,CAAuB,WAAvB,EAAoCD,WAApC,GAAkDA,WAAlD;AACD,KAF6B,CAE5BE,IAF4B,CAEvB,IAFuB,CAA9B;AAGD,GAtBI;;AAwBLL,YAAU,oBAAY;AACpB,WAAO,KAAKN,SAAZ;AACD,GA1BI;;AA4BLY,YAAU,oBAAY;AACpB,WAAO,KAAKX,WAAZ;AACD,GA9BI;;AAgCLM,gBAAc,sBAAUD,QAAV,EAAoB;AAChC,SAAKN,SAAL,GAAiBM,QAAjB;AACA,SAAKL,WAAL,GAAmB,IAAIV,MAAJ,CAAWe,QAAX,CAAnB;AACD,GAnCI;;AAqCL;AACAO,eAAa,uBAA4B;AAAA,QAAlBC,QAAkB,uEAAP,KAAO;;AACvC,SAAKhB,UAAL,CAAgBK,IAAhB,CAAqBC,MAArB,GAA8BU,QAA9B;AACD,GAxCI;;AA0CLC,cAAY,sBAAY;AACtB,WAAO,KAAKjB,UAAL,CAAgBK,IAAhB,CAAqBC,MAA5B;AACD,GA5CI;;AA8CLY,iBAAe,uBAAUC,aAAV,EAAyB;AACtC,QAAIX,WAAWW,aAAf;AACA,QAAI,CAACX,SAASY,UAAT,CAAoB,uBAApB,CAAL,EAAmD;AACjDZ,iBAAW,2BAA2BA,QAAtC;AACD;;AAED,WAAOA,QAAP;AACD,GArDI;;AAuDLE,kBAAgB,wBAAUF,QAAV,EAAoBa,QAApB,EAA8B;AAC5C1B,OAAG2B,MAAH,CAAUD,QAAV;;AAEA1B,OAAG4B,MAAH,CAAUC,OAAV,CAAkB,+BAAlB,EAAmD7B,GAAG8B,WAAtD,EAAmE,UAAUC,GAAV,EAAeC,KAAf,EAAsB;AACvF,UAAID,GAAJ,EAAS;AACP/B,WAAGiC,KAAH,CAASF,GAAT;AACA;AACD;;AAEDlB,iBAAW,KAAKU,aAAL,CAAmBV,QAAnB,CAAX;AACA,UAAIqB,QAAQF,MAAMG,cAAN,CAAqBtB,QAArB,CAAZ;AACAa,eAASQ,KAAT;AACD,KATkE,CASjEhB,IATiE,CAS5D,IAT4D,CAAnE;AAUD;AApEI,CAAT","file":"CardPrefab.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["const KQCard = require('KQCard');\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        graySprite: cc.Sprite,\n\n        _cardName: null,\n        _kqCardMode: null\n    },\n\n    // use this for initialization\n    onLoad: function () {\n      this.graySprite.node.active = false;\n    },\n\n    // 通过牌名设置牌\n    setCard: function (cardName) {\n      this._setCardName(cardName);\n\n      this._loadCardFrame(cardName, function (spriteFrame) {\n        this.node.getComponent('cc.Sprite').spriteFrame = spriteFrame;\n      }.bind(this));\n    },\n\n    cardName: function () {\n      return this._cardName;\n    },\n\n    cardMode: function () {\n      return this._kqCardMode;\n    },\n\n    _setCardName: function (cardName) {\n      this._cardName = cardName;\n      this._kqCardMode = new KQCard(cardName);\n    },\n\n    // 设置选择状态\n    setSelected: function (selected = false) {\n      this.graySprite.node.active = selected;\n    },\n\n    isSelected: function () {\n      return this.graySprite.node.active;\n    },\n\n    _cardFullName: function (cardShortName) {\n      var cardName = cardShortName;\n      if (!cardName.startsWith(\"public-pic-card-poker\")) {\n        cardName = \"public-pic-card-poker-\" + cardName;\n      }\n\n      return cardName;\n    },\n\n    _loadCardFrame: function (cardName, callback) {\n      cc.assert(callback);\n\n      cc.loader.loadRes(\"play/CardTypeCombine/pockList\", cc.SpriteAtlas, function (err, atlas) {\n        if (err) {\n          cc.error(err);\n          return;\n        }\n\n        cardName = this._cardFullName(cardName);\n        var frame = atlas.getSpriteFrame(cardName);\n        callback(frame);\n      }.bind(this));\n    },\n});\n"]}