{"version":3,"sources":["KQCardFindTypeExtension.js"],"names":["KQCard","require","ArrayExtension","KQCardPointsHelper","module","exports","findDuiZi","cardModes","sDuiZiIndexs","findSanTiao","result","_findPointLength","length","forEach","indexs","s1","push","tresult","findGuiPai","i","repeat","obj","reduce","card","index","pointIndexs","point","prop","splices","splice","sort","n1","n2","arr1","arr2","findLiaDui","duiZiIndexs","duiZiIndex","unshift","j","pre","next","s","concat","newS","q","indexOf","slice","tieZhiIndexsArray","findTieZhi","sanTiaoIndexs0","findTongHuaShun","cards","Array","from","colorS","colorH","colorC","colorD","pointS","pointH","pointC","pointD","color","colorSum","a1","a2","start","subCards","isTongHuaShun","ca","r","sortByPoint","convertedCards","_convertOneToA1","adfs","scores","findTongHuaShun20","card20","contain20","kq_excludes","parseInt","num","bool","newCard20","sortByNumber","wuTongIndexsArray","findWuTong","tieZhiIndexs0","tieZhiIndexs1","tieZhiIndexs2","tieZhiIndexs3","tieZhiIndexs4","findShunZi","cardsFromArray","uniqueCards","unique","card1","card2","cardA","find","cardAPlus","isShunZi","findIndex","originCard","repeatIndexsArray","_findRepeatPointIndexsArray","findShunZi20","newArr","newArrs","indexsArray","originCards","map","originIndex","repeatIndexs","findTongHua","sortByColor","isTongHua","findTongHua20","findHuLu","p_3","p_4","p2","sanTiaoIndexs3","sanTiaoIndexs6","i_3","i_2","findHuLu20","p_2","numBer","t","o","newAyy","jString","iString","testFind","WuTong","TongHuaShun","TieZhi","HuLu","TongHua","ShunZi","SanTiao","LiaDui","DuiZi"],"mappings":"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","file":"KQCardFindTypeExtension.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\KQCard","sourcesContent":["const KQCard = require('KQCard');\nconst ArrayExtension = require('ArrayExtension');\nconst KQCardPointsHelper = require('KQCardPointsHelper');\n\nmodule.exports = {};\n\n// 寻找 cardModes 中的 对子\n// 这会返回 对子 的索引数组\n// 如：[[1, 3], [4, 5]]\nKQCard.findDuiZi = function (cardModes) {\n  let sDuiZiIndexs = KQCard.findSanTiao(cardModes) || [];\n  let result = KQCard._findPointLength(cardModes, 2) || [];\n  if(result.length < 2 ){\n    if(sDuiZiIndexs.length > 0){\n      sDuiZiIndexs.forEach(function(indexs) {\n        var s1 = [indexs[0],indexs[1]];\n        //var s2 = [indexs[1],indexs[2]];\n        //result.push(s2);\n        result.push(s1);\n      });\n    }\n    var tresult = KQCard.findGuiPai(cardModes,2);\n    for(var i = 0;i < tresult.length;i++){\n      result.push(tresult[i]);\n    }\n  }\n\n  result = KQCard.repeat(result);\n\n  return result.length > 0 ? result : [];\n};\n\nKQCard._findPointLength = function (cardModes, length) {\n  if (cardModes.length < length) {\n    return [];\n  }\n\n  let obj = cardModes.reduce(function(obj, card, index) {\n    let pointIndexs = obj[card.point] || [];\n    obj[card.point] = pointIndexs;\n    pointIndexs.push(index);\n    return obj;\n  }, {});\n\n  let result = [];\n  for (var prop in obj) {\n    let pointIndexs = obj[prop];\n    // if (pointIndexs.length == length) {\n    //   pointIndexs.sort(function (n1, n2) {\n    //     return n1 - n2;\n    //   });\n    //   result.push(pointIndexs);\n    // }\n    while(pointIndexs.length >= length && length != 0){//有多的分割多个数组\n      var splices = pointIndexs.splice(0,length);\n      if (splices.length >= length){\n        splices.sort(function (n1, n2) {\n          return n1 - n2;\n        });\n        result.push(splices);\n      }\n    }\n  }\n\n  result.sort(function (arr1, arr2) {\n    let n1 = arr1[0];\n    let n2 = arr2[0];\n    return n2 - n1;\n  });\n  return result.length > 0 ? result : [];\n};\n\n// 找 两对 的索引数组\n// 如：[[1, 2, 3, 4], [5, 6, 7, 8]]\nKQCard.findLiaDui = function (cardModes) {\n  let duiZiIndexs = KQCard.findDuiZi(cardModes) || [];\n  let duiZiIndex = KQCard.findGuiPai(cardModes,2) || [];\n\n  if(duiZiIndexs.length < 1 && duiZiIndex.length > 0){\n    duiZiIndex.forEach(function(indexs) {\n        duiZiIndexs.unshift(indexs);\n    });\n  }\n  if (duiZiIndexs.length < 2) {\n    return [];\n  }\n\n  let result = [];\n  for (let i = 0; i < duiZiIndexs.length; ++i) {\n    for (let j = i + 1; j < duiZiIndexs.length; ++j) {\n      if(result.length < 10){\n        let pre = duiZiIndexs[i];\n        let next = duiZiIndexs[j];\n        var s = pre.concat(next);\n        var newS = [];\n        for(var q = 0;q < s.length ;q++){\n          if(newS.indexOf(s[q]) == -1){\n            newS.push(s[q]);\n          }else{\n            break;\n          }\n        }\n        if(newS.length == 4){\n          newS.sort(function (n1, n2) {\n            return n1 - n2;\n          });\n          result.unshift(newS);\n        }\n      }else{\n        break;\n      }\n\n\n    }\n  }\n  result = KQCard.repeat(result);\n  if(result.length > 6){\n    result = result.slice(0,6);\n  }\n  return result;\n};\n\n// 找三条\n// 如：[[1, 2, 3]];\nKQCard.findSanTiao = function (cardModes) {\n  if(cardModes.length < 3){\n    return [];\n  }\n  let result = KQCard._findPointLength(cardModes, 3) || [];\n  //for(var q =0;q<result.length;q++){\n  //  var indexs = result[q][0];\n  //  if(cardModes[indexs].point >= 20){\n  //    result.splice(q,1);\n  //  }\n  //}\n  if(result.length < 2 ){\n    let tieZhiIndexsArray = KQCard.findTieZhi(cardModes);\n    if(tieZhiIndexsArray.length > 0){\n      tieZhiIndexsArray.forEach(function(indexs) {\n        //let sanTiaoIndexs1 = [indexs[1], indexs[2], indexs[3]];\n        //let sanTiaoIndexs2 = [indexs[0], indexs[1], indexs[3]];\n        //let sanTiaoIndexs3 = [indexs[0], indexs[2], indexs[3]];\n        let sanTiaoIndexs0 = [indexs[0], indexs[1], indexs[2]];\n        result.push(sanTiaoIndexs0);\n        //result.unshift(sanTiaoIndexs1);\n        //result.unshift(sanTiaoIndexs2);\n        //result.unshift(sanTiaoIndexs3);\n      });\n    }\n    var tresult = KQCard.findGuiPai(cardModes,3);\n    for(var i = 0;i < tresult.length;i++){\n      result.push(tresult[i]);\n    }\n  }\n  /*if(result.length < 1){\n    // 铁支是包含三条的\n    let tieZhiIndexsArray = KQCard.findTieZhi(cardModes);\n    if (tieZhiIndexsArray) {\n      tieZhiIndexsArray.forEach(function(indexs) {\n        //let sanTiaoIndexs1 = [indexs[1], indexs[2], indexs[3]];\n        //let sanTiaoIndexs2 = [indexs[0], indexs[1], indexs[3]];\n        //let sanTiaoIndexs3 = [indexs[0], indexs[2], indexs[3]];\n        let sanTiaoIndexs0 = [indexs[0], indexs[1], indexs[2]];\n        result.push(sanTiaoIndexs0);\n        //result.unshift(sanTiaoIndexs1);\n        //result.unshift(sanTiaoIndexs2);\n        //result.unshift(sanTiaoIndexs3);\n      });\n    }\n  }*/\n\n  //if(result.length > 10){\n  //  result = result.slice(0,10);\n  //}\n\n  result = KQCard.repeat(result);\n  return result.length > 0 ? result : [];\n};\n\n// 找同花顺\n/*KQCard.findTongHuaShun = function (cardModes, length = 5) {\n  if (cardModes.length < length) {\n    return [];\n  }\n  let result = [];\n  var sanShunZi = KQCard.sanShunZi1(cardModes,length);\n  if(sanShunZi[0] == null){\n    return false;\n  }\n  for(var i=0;i<sanShunZi[0].length;i++) {\n    var s = sanShunZi[0][i];\n    if (KQCard.isTongHuaShun(s, length)) {\n      result.unshift(sanShunZi[1][i]);\n\n    }\n  }\n  if(result.length > 0){\n    return result\n  }else{\n    return KQCard.findTongHuaShun1(cardModes);\n  }\n};*/\nKQCard.findTongHuaShun = function (cards, length = 5) {\n  if (cards.length < length) {\n    return [];\n  }\n  cards = Array.from(cards);\n  var colorS = []; //黑桃\n  var colorH = []; //红心\n  var colorC = []; //梅花\n  var colorD = []; //方块\n  var pointS = []; //黑桃\n  var pointH = []; //红心\n  var pointC = []; //梅花\n  var pointD = []; //方块\n  for(var i=0;i<cards.length;i++){\n    if(cards[i].color == '4'){\n      if(pointS.indexOf(cards[i].point) == -1){\n        pointS.push(cards[i].point);\n        colorS.push(cards[i]);\n      }\n\n    }else if(cards[i].color == '3'){\n      if(pointH.indexOf(cards[i].point) == -1){\n        pointH.push(cards[i].point);\n        colorH.push(cards[i]);\n      }\n    }else if(cards[i].color == '2'){\n      if(pointC.indexOf(cards[i].point) == -1){\n        pointC.push(cards[i].point);\n        colorC.push(cards[i]);\n      }\n    }else if(cards[i].color == '1'){\n      if(pointD.indexOf(cards[i].point) == -1){\n        pointD.push(cards[i].point);\n        colorD.push(cards[i]);\n      }\n    }\n  }\n\n  var color = [colorS,colorH,colorC,colorD];\n  var colorSum = [];    //总共有几种花色 [5,3,0....]\n  for(var i=0;i<color.length;i++){\n    if(color[i].length >= 5){\n      color[i].sort(function(a1,a2){\n        return a1.point - a2.point;\n      })\n      colorSum.push(color[i]);\n    }\n  }\n  var result = [];\n  for(var i=0;i<colorSum.length;i++) {\n    var s = colorSum[i]\n    for (var start = 0; (start + 5) <= s.length; ++start) {\n      var subCards = s.slice(start, start + 5);\n      if (KQCard.isTongHuaShun(subCards)) {\n        let indexs = [];\n        subCards.forEach(function(ca) {\n          for(var q = 0;q < cards.length; q++){\n            var r = cards[q];\n            if(r === ca){\n              indexs.push(q);\n              break;\n            }\n          }\n        });\n        indexs.sort(Array.sortByPoint);\n        result.unshift(indexs);\n      }\n    }\n  }\n\n  if(result.length > 0){\n    return result;\n  }else{\n    let convertedCards = KQCard._convertOneToA1(cards);\n    if (cards === convertedCards) {\n      cards.forEach(function(adfs){\n        if(adfs.point == 14){\n          adfs.point = 1;\n          adfs.scores = 1;\n        }\n      })\n      return KQCard.findTongHuaShun20(cards);\n    }\n    return KQCard.findTongHuaShun(convertedCards);\n  }\n  //return result.length > 0 ? result : null;\n};\nKQCard.findTongHuaShun20 = function (card, length = 5) {\n  if (card.length < length) {\n    return false;\n  }\n  var card20 = KQCard.contain20(card) || [];\n  if(card20.length <= 0){\n    return false;\n  }\n  var cards = card.kq_excludes(card20);\n\n  cards = Array.from(cards);\n  var colorS = []; //黑桃\n  var colorH = []; //红心\n  var colorC = []; //梅花\n  var colorD = []; //方块\n  var pointS = []; //黑桃\n  var pointH = []; //红心\n  var pointC = []; //梅花\n  var pointD = []; //方块\n  for(var i=0;i<cards.length;i++){\n    if(cards[i].color == '4'){\n      if(pointS.indexOf(cards[i].point) == -1){\n        pointS.push(cards[i].point);\n        colorS.push(cards[i]);\n      }\n\n    }else if(cards[i].color == '3'){\n      if(pointH.indexOf(cards[i].point) == -1){\n        pointH.push(cards[i].point);\n        colorH.push(cards[i]);\n      }\n    }else if(cards[i].color == '2'){\n      if(pointC.indexOf(cards[i].point) == -1){\n        pointC.push(cards[i].point);\n        colorC.push(cards[i]);\n      }\n    }else if(cards[i].color == '1'){\n      if(pointD.indexOf(cards[i].point) == -1){\n        pointD.push(cards[i].point);\n        colorD.push(cards[i]);\n      }\n    }\n  }\n\n  var color = [colorS,colorH,colorC,colorD];\n  var colorSum = [];    //总共有几种花色 [5,3,0....]\n  for(var i=0;i<color.length;i++){\n    if(color[i].length >= parseInt(5 - card20.length)){\n      color[i].sort(function(a1,a2){\n        return a1.point - a2.point;\n      })\n      colorSum.push(color[i]);\n    }\n  }\n  //cc.log(colorSum)\n\n  var result = [];\n  for(var i=0;i<colorSum.length;i++) {\n    var s = colorSum[i]\n    for(var j = 1;j <= card20.length;++j){\n      var num = 5 - j;\n      for (var start = 0; (start + num) <= s.length; ++start) {\n        var subCards = s.slice(start, start + num);\n        var bool = parseInt(subCards[num-1]['scores']) - parseInt(subCards[0]['scores']) < 5;\n        if(bool){\n          let indexs = [];\n          var newCard20 = card20.slice(0,j);\n          subCards = subCards.concat(newCard20);\n          subCards.forEach(function(ca) {\n            for(var q = 0;q < card.length; q++){\n              var r = card[q];\n              if(r === ca){\n                indexs.push(q);\n                break;\n              }\n            }\n\n          });\n          indexs.sort(Array.sortByNumber);\n\n          result.unshift(indexs);\n\n        }\n      }\n    }\n  }\n  //cc.log(result)\n  //cc.log('--------357')\n  if(result.length > 0){\n    return result;\n  }else{\n    let convertedCards = KQCard._convertOneToA1(card);\n    if (card === convertedCards) {\n      return [];\n    }\n    return KQCard.findTongHuaShun20(convertedCards);\n  }\n  //return result.length > 0 ? result : null;\n};\n\n// 找铁支\n// 如：[[1,2,3,4]]\nKQCard.findTieZhi = function (cardModes) {\n  var result =  KQCard._findPointLength(cardModes, 4);\n  if(result.length > 0){\n    return result;\n  }\n  result = [];\n  // 五同是包含铁支的\n  let wuTongIndexsArray = KQCard.findWuTong(cardModes);\n  if (wuTongIndexsArray) {\n    wuTongIndexsArray.forEach(function(indexs) {\n      let tieZhiIndexs0 = [indexs[0], indexs[1], indexs[2], indexs[3]];\n      let tieZhiIndexs1 = [indexs[0], indexs[1], indexs[2], indexs[4]];\n      let tieZhiIndexs2 = [indexs[0], indexs[1], indexs[3], indexs[4]];\n      let tieZhiIndexs3 = [indexs[0], indexs[2], indexs[3], indexs[4]];\n      let tieZhiIndexs4 = [indexs[1], indexs[2], indexs[3], indexs[4]];\n      result.push(tieZhiIndexs0);\n      result.push(tieZhiIndexs1);\n      result.push(tieZhiIndexs2);\n      result.push(tieZhiIndexs3);\n      result.push(tieZhiIndexs4);\n    });\n  }\n  if(result.length > 10){\n    result = result.slice(0,10);\n  }\n  result = KQCard.repeat(result);\n  return result.length > 0 ? result : KQCard.findGuiPai(cardModes,4);\n};\n//找五同\nKQCard.findWuTong = function (cardModes) {\n  if(cardModes.length < 5){\n    return [];\n  }\n  var result = this._findPointLength(cardModes, 5) || [];\n  return result.length > 0 ? result : KQCard.findGuiPai(cardModes,5);\n};\n// 找顺子\n// 如：[[1, 2, 3, 4, 5]]\nKQCard.findShunZi = function (cardModes,length = 5) {\n  if (cardModes.length < length) {\n    return [];\n  }\n  if(typeof(cardModes[0]['point'])==\"undefined\"){\n    cardModes = KQCard.cardsFromArray(cardModes);\n  }\n  // 先根据点数去重\n  let uniqueCards = cardModes.unique(function(card1, card2) {\n    return card1.point == card2.point;\n  });\n  uniqueCards.sort(KQCard.sortByPoint);\n\n  // 如果有 A，则在最后添加 14\n  let cardA = cardModes.find(function (card) {\n    return card.point == 1;\n  });\n  if (cardA) {\n    let cardAPlus = new KQCard(cardA);\n    cardAPlus.point = 14;\n    uniqueCards.push(cardAPlus);\n  }\n\n  let result = [];\n\n  // 由于点数是唯一且升序，只需要依次遍历判断是否是顺子即可\n  for (var start = 0; (start + length) <= uniqueCards.length; ++start) {\n    let subCards = uniqueCards.slice(start, start + length);\n    if (KQCard.isShunZi(subCards, length)) {\n      let indexs = [];\n      subCards.forEach(function(card) {\n        let index = cardModes.findIndex(function (originCard) {\n\n          if (card.point == 14) {\n            return originCard.point == 1;\n          }\n\n          return card === originCard;\n        });\n        indexs.push(index);\n      });\n\n      indexs.sort(Array.sortByNumber);\n      result.unshift(indexs);\n    }\n  }\n\n  // 处理点数重复的情况\n  // 比如 A A K Q J 10 这种 \n  let repeatIndexsArray = KQCard._findRepeatPointIndexsArray(result, cardModes);\n  repeatIndexsArray.forEach(function(indexs) {\n    result.unshift(indexs);\n  });\n\n  result.sort(function (arr1, arr2) {\n    return arr1[0] - arr2[0];\n  });\n\n  return result.length > 0 ? result : KQCard.findShunZi20(cardModes);\n};\nKQCard.findShunZi20 = function (cardModes ,length = 5) {\n  if (cardModes.length < length) {\n    return [];\n  }\n  var card20 = KQCard.contain20(cardModes);\n  if(card20.length <= 0){\n    return [];\n  }\n  var cards = cardModes.kq_excludes(card20);\n  // 先根据点数去重\n  var newArr = [];\n  var newArrs = [];\n  for (var i = 0; i < cards.length; i++) {\n    if (newArrs.indexOf(cards[i]['point']) == -1) {\n      newArr.push(cards[i]);\n      newArrs.push(cards[i].point);\n    }\n  }\n\n  newArr.sort(function (n1, n2) {\n    return n1.point - n2.point;\n  });\n  var result = [];\n  for(var j = 1;j <= card20.length;++j){\n    var num = length - j;\n    for (var start = 0; (start + num) <= newArr.length; ++start) {\n      var subCards = newArr.slice(start, start + num);\n      var bool = parseInt(subCards[num-1]['point']) - parseInt(subCards[0]['point']) < length;\n      if(bool){\n        let indexs = [];\n        var newCard20 = card20.slice(0,j);\n        subCards = subCards.concat(newCard20);\n        subCards.forEach(function(card) {\n          for(var q = 0;q < cardModes.length; q++){\n            var r = cardModes[q];\n            if(r === card){\n              indexs.push(q);\n              break;\n            }\n          }\n\n        });\n\n        indexs.sort(Array.sortByNumber);\n        result.unshift(indexs);\n      }\n    }\n  }\n\n  if(result.length > 0){\n    return result;\n  }else{\n    let convertedCards = KQCard._convertOneToA1(cardModes);\n    if (cardModes === convertedCards) {\n      return false;\n    }\n    return KQCard.findShunZi20(convertedCards);\n  }\n};\nKQCard._findRepeatPointIndexsArray = function(indexsArray, originCards) {\n  let repeatIndexsArray = [];\n  indexsArray.forEach(function(indexs) {\n    let cards = indexs.map(function(index) {\n      return originCards[index];\n    });\n\n    cards.forEach(function(card, index) {\n      let originIndex = originCards.findIndex(function(originCard) {\n        if(typeof(card) == 'undefined'){\n          return;\n        }\n        if (originCard !== card && originCard.point == card.point) {\n          return true;\n        }\n        return false;\n      });\n\n      if (originIndex < 0) {\n        return;\n      }\n\n      let repeatIndexs = indexs.slice();\n      repeatIndexs[index] = originIndex;\n      repeatIndexsArray.push(repeatIndexs);\n    });\n  });\n\n  return repeatIndexsArray;\n};\n\n// 找同花\n// 如：[[1, 2, 3, 4, 5]]\nKQCard.findTongHua = function (cardModes, length = 5) {\n  if (cardModes.length < length) {\n    return [];\n  }\n\n  let cards = Array.from(cardModes);\n  cards.sort(KQCard.sortByColor);\n\n  let result = [];\n  for (var start = 0; (start + length) <= cards.length; ++start) {\n    let subCards = cards.slice(start, start + length);\n    if (KQCard.isTongHua(subCards, length)) {\n      let indexs = [];\n      subCards.forEach(function(card) {\n        let index = cardModes.findIndex(function (originCard) {\n          return card === originCard;\n        });\n          indexs.push(index);\n      });\n      //indexs = indexs.length > 5 ? indexs.splice(1,1) : indexs;\n      indexs.sort(Array.sortByNumber);\n      result.unshift(indexs);\n    }\n  }\n  return result.length > 0 ? result : KQCard.findTongHua20(cardModes);\n};\nKQCard.findTongHua20 = function (cardModes) {\n  if (cardModes.length < 5) {\n    return [];\n  }\n  var card20 = KQCard.contain20(cardModes);\n  if(card20.length <= 0){\n    return [];\n  }\n  var cards = cardModes.kq_excludes(card20);\n  // 先根据点数去重\n  cards.sort(KQCard.sortByColor);\n\n  var result = [];\n  for(var j = 1;j <= card20.length;++j){\n    var num = 5 - j;\n    for (var start = 0; (start + num) <= cards.length; ++start) {\n      var subCards = cards.slice(start, start + num);\n      if (KQCard.isTongHua(subCards, num)) {\n        let indexs = [];\n        var newCard20 = card20.slice(0,j);\n        subCards = subCards.concat(newCard20);\n        subCards.forEach(function(card) {\n          for(var q = 0;q < cardModes.length; q++){\n            var r = cardModes[q];\n            if(r === card){\n              indexs.push(q);\n              break;\n            }\n          }\n\n        });\n\n        indexs.sort(Array.sortByNumber);\n        result.unshift(indexs);\n      }\n    }\n  }\n\n  return result.length > 0 ? result : [];\n};\n\nKQCard.findHuLu = function (cardModes) {\n  let length = 5;\n  if (cardModes.length < length) {\n    return [];\n  }\n\n\n  var p_3=KQCard.findSanTiao(cardModes);\n  var p_4=KQCard.findTieZhi(cardModes);\n  var p2=KQCard.findDuiZi(cardModes) || [];\n  //var p_3 =  this._findPointLength(cardModes, 3) || [];\n  //var p_4 = this._findPointLength(cardModes, 4) || [];\n  //var p2 = this._findPointLength(cardModes, 2) || [];\n  if(p2.length <= 0){\n    if (p_3) {\n      p_3.forEach(function(indexs) {\n        let sanTiaoIndexs0 = [indexs[0], indexs[1]];\n        //let sanTiaoIndexs1 = [indexs[0], indexs[2]];\n        let sanTiaoIndexs3 = [indexs[1], indexs[2]];\n        p2.push(sanTiaoIndexs0);\n        //p2.unshift(sanTiaoIndexs1);\n        p2.push(sanTiaoIndexs3);\n      });\n    }\n\n    if (p_4) {\n      p_4.forEach(function(indexs) {\n        let sanTiaoIndexs0 = [indexs[0], indexs[1]];\n        //let sanTiaoIndexs1 = [indexs[0], indexs[2]];\n        //let sanTiaoIndexs2 = [indexs[0], indexs[3]];\n        //let sanTiaoIndexs3 = [indexs[1], indexs[2]];\n        //let sanTiaoIndexs4 = [indexs[1], indexs[3]];\n        let sanTiaoIndexs6 = [indexs[2], indexs[3]];\n        p2.push(sanTiaoIndexs0);\n        //p2.unshift(sanTiaoIndexs1);\n        //p2.unshift(sanTiaoIndexs2);\n        //p2.unshift(sanTiaoIndexs3);\n        //p2.unshift(sanTiaoIndexs4);\n        p2.push(sanTiaoIndexs6);\n      });\n    }\n  }\n\n\n\n  if ((p2 == null) || (p_3 == null)) {\n    return [];\n  }\n  var tresult=[]\n  p2.forEach(function (i_3) {\n    var s=i_3;\n    p_3.forEach(function (i_2) {\n      s = i_3.concat(i_2);\n      for(var i =0;i<s.length-1;i++){\n        var index = s[i];\n        for(var j =i+1;j<s.length;j++){\n          if(index == s[j]) {\n            s = null;\n            break;\n          }\n        }\n        if(s == null) {\n          break;\n        }\n      }\n      if(s !== null){\n        tresult.unshift(s);\n      }\n    });\n  });\n  if(tresult.length > 10){\n    tresult = tresult.slice(0,10);\n  }\n  return tresult.length > 0 ? tresult : KQCard.findHuLu20(cardModes);\n};\nKQCard.findHuLu20 = function (cardModes) {\n  let length = 5;\n  if (cardModes.length < length) {\n    return [];\n  }\n  var card20 = KQCard.contain20(cardModes) || [];\n  if(card20.length <= 0){\n    return [];\n  }\n  var p_3=KQCard.findGuiPai(cardModes,3);\n  var p_4=KQCard.findGuiPai(cardModes,4);\n  var p_2=KQCard.findGuiPai(cardModes,2);\n  if(p_2==null){\n    p_2=[];\n  }\n  if (p_3) {\n    p_3.forEach(function(indexs) {\n      let sanTiaoIndexs0 = [indexs[0], indexs[1]];\n      let sanTiaoIndexs3 = [indexs[1], indexs[2]];\n      p_2.unshift(sanTiaoIndexs0);\n      p_2.unshift(sanTiaoIndexs3);\n    });\n  }\n\n  if (p_4) {\n    p_4.forEach(function(indexs) {\n      let sanTiaoIndexs0 = [indexs[0], indexs[1]];\n      let sanTiaoIndexs6 = [indexs[2], indexs[3]];\n      p_2.unshift(sanTiaoIndexs0);\n      p_2.unshift(sanTiaoIndexs6);\n    });\n  }\n\n  if ((p_2 == null) || (p_3 == null)) {\n    return [];\n  }\n  var tresult=[]\n  p_2.forEach(function (i_3) {\n    var s=i_3;\n    p_3.forEach(function (i_2) {\n      s = i_3.concat(i_2);\n      for(var i =0;i<s.length-1;i++){\n        var index = s[i];\n        for(var j =i+1;j<s.length;j++){\n          if(index == s[j]) {\n            s = null;\n            break;\n          }\n        }\n        if(s == null) {\n          break;\n        }\n      }\n      if(s !== null){\n        tresult.unshift(s);\n      }\n    });\n  });\n  if(tresult.length > 10){\n    tresult = tresult.slice(0,10);\n  }\n  return tresult.length > 0 ? tresult : [];\n};\n\nKQCard.findGuiPai = function (cardModes,numBer = 1) {\n  var card20 = KQCard.contain20(cardModes).map(function(card){//得到鬼牌的索引\n    for(var q = 0;q < cardModes.length; q++){\n      var r = cardModes[q];\n      if(r === card){\n        return q;\n      }\n    }\n  });\n  if(card20.length <= 0){\n    return [];\n  }\n  var result = [];\n  for(var j = 1;j <= card20.length;++j){\n    var num = numBer-j;//除鬼牌外 我应该找多少张牌匹配\n    var indexs = KQCard._findPointLength(cardModes, num) || [];\n    for(var t = 0;t < indexs.length; t++) {\n      if(numBer == 2){//是对子的时候把鬼牌和单张匹配都循环一遍\n        for(var o = 0;o < card20.length;++o){\n          var s = indexs[t].concat(card20[o]);\n          if(s.length == numBer){\n            result.push(s);\n          }\n        }\n      }else{\n        var s = indexs[t].concat(card20.slice(0,j));//依次相加鬼牌第一次加一张 递增\n        if(s.length == numBer){\n          result.push(s);\n        }\n      }\n    }\n  }\n  if(result.length > 10){\n    result = result.slice(0,10);\n  }\n  result = KQCard.repeat(result);//去重\n  return result.length > 0 ? result : [];\n};\n\nKQCard.repeat = function (result) {\n  for(var i =0;i<result.length;i++){\n    var index = result[i];\n\n    var newAyy = [];\n    for(var o = 0;o < index.length;o++){//有重复干掉你\n      if(newAyy.indexOf(index[o]) == -1){\n        newAyy.push(index[o]);\n      }else{\n        result.splice(i,1);\n        break;\n      }\n    }\n\n    for(var j =i+1;j<result.length-1;j++){\n      var s = result[j];\n      var jString = '';\n      var iString = '';\n      for(var r = 0;r < s.length;r++){\n          jString = jString + s[r];\n          iString = iString + index[r];\n      }\n      if(jString == iString){//有重复干掉你\n        result.splice(i,1);\n        break;\n      }\n    }\n\n  }\n  return result;\n};\n\n\nKQCard.testFind = function (cardModes) {\n  var WuTong = KQCard.findWuTong(cardModes) || [];\n  var TongHuaShun = KQCard.findTongHuaShun(cardModes) || [];\n  var TieZhi = KQCard.findTieZhi(cardModes) || [];\n  var HuLu = KQCard.findHuLu(cardModes) || [];\n  var TongHua = KQCard.findTongHua(cardModes) || [];\n  var ShunZi = KQCard.findShunZi(cardModes) || [];\n  var SanTiao = KQCard.findSanTiao(cardModes) || [];\n  var LiaDui = KQCard.findLiaDui(cardModes) || [];\n  var DuiZi = KQCard.findDuiZi(cardModes) || [];\n  var result = [\n    WuTong,\n    TongHuaShun,\n    TieZhi,\n    HuLu,\n    TongHua,\n    ShunZi,\n    SanTiao,\n    LiaDui,\n    DuiZi,\n  ]\n  return result;\n};\n"]}