{"version":3,"sources":["KQCard.js"],"names":["KQCardColorsHelper","require","KQCardPointsHelper","NumberExtension","GetCardPointsSameCount","cc","assert","console","log","error","KQCard","point","color","index","sindex","_initWithColorAndPoint","Number","scores","colorScores","_initWithNumber","number","Math","floor","_initWithObject","object","suit","description","cardName","sort","otherCard","asc","AisMax","isEqual","isNaN","found","match","Array","length","result","numbers","split","prototype","toServerCard","COLOR_SPADE","COLOR_HEART","COLOR_CLUB","COLOR_DIAMOND","module","exports","cardsFromArray","cardNames","map","convertToServerCards","cards","card","TYPE","WuLong","DuiZi","LiangDui","SanTiao","ShunZi","TongHua","HuLu","TieZhi","TongHuaShun","WuTong","SanTaoHua","SanShunZi","LiuDuiBan","WuDuiSanTiao","SiTaoSanTiao","CouYiSe","SanFenTianXia","SanTongHuaShun","YiTiaoLong","QingLong","cardsTypeName","names","type","cardsType","isQingLong","isYiTiaoLong","isLiuDuiBan","isSanTongHua","isSanShunZi","containWuTong","containTongHuaShun","containTieZhi","containHuLu","containTongHua","containShunZi","containSanTiao","containLiaDui","containDuiZi","isTongHua","minLength","colors","e","from","sortByColor","card20","contain20","kq_excludes","start","subCards","slice","containTongHua20","j","num","isShunZi","_isShunZiAKQ","points","n1","n2","point1s","point14s","pointK","kq_times","times","push","_isCardsContainPoints","pointCardIndex","findIndex","newCard","filter","findShunZi","isTongHuaShun","findTongHuaShun","colorS","colorH","colorC","colorD","i","ls","lh","lc","ld","colorSum","teShuCard","forEach","a","b","a1","splice","a2","teShuPaiCards","isLong","_convertCardsToCardNames","sanCard","isCouYiSe","duiZiLength","cardNumbers","numberOfDuiZi","numberOfYi","prop","value","isWuDuiSanTiao","sanTiaoLength","numberOfSanTiao","isShunZi1","arr","fenZhu","AIsExist","newCards","newCards1","cad","num1","num2","arr1","arr2","arr3","asdf","isSanShunZi1","sortByPoint","wei","zhong","tou","sanShunZi","sanShunZi1","newPoint","duiZi","s","indexOf","number3","tasks","concat","_isSanShunZi","convertedCards","_convertOneToA1","shunzi","cardsT","cardsIndex","cardsShunzi","touCards","zhongCards","weiCards","isSanTongHuaShun","colorCardsObject","_colorClassCards","s1","s2","_isSanTongHuaShun","isSanFenTianXia","tieZhiLength","pointHelper","numberOfTieZhi","pointNumbers","isSiTaoSanTiao","isSanTaoHua","colorHelper","colorNumbers","colorNumber","helper","w","maxNumber","ca","parseInt","isTieZhi","reduce","isWuTong","findHuLu","isHuLu","p1","p2","numberP1","numberP2","max","minNumber","min","isSanTiao","findLiaDui","isLiaDui","isDuiZi","card1","card2","containGuiPai","isTeShuPai","_convertOneToA","find","undefined","pointAsc","point1","point2","suitColorMap","cardNumber"],"mappings":"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","file":"KQCard.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\KQCard","sourcesContent":["const KQCardColorsHelper = require('KQCardColorsHelper');\nconst KQCardPointsHelper = require('KQCardPointsHelper');\nconst NumberExtension = require('NumberExtension');\nconst GetCardPointsSameCount = require('GetCardPointsSameCount');\n\ncc = cc || {};\ncc.assert = cc.assert || console.assert || function () {};\ncc.log = cc.log || console.log || function () {};\ncc.error = cc.error || console.error || function () {};\n\n// 牌 Model 类，封装了花色和点数\n// 使用：\n// new KQCard(22);\nvar KQCard = function (point, color ,index) {\n    this.color = null;\n    this.point = null;\n    this.sindex = index;\n    this._initWithColorAndPoint = function (color, point) {\n        if (color == 's') { color = 4;}\n        if (color == 'h') { color = 3;}\n        if (color == 'c') { color = 2;}\n        if (color == 'd') { color = 1;}\n\n        this.point = Number(point);\n        this.scores = Number(point);\n        this.color = Number(color);\n        this.colorScores = Number(color);\n\n        cc.assert(this.point > 0);\n        cc.assert(this.color > 0);\n    };\n\n    this._initWithNumber = function (number) {\n        this.point = Math.floor(number / 10);\n        this.color = number % 10;\n        cc.assert(this.point > 0);\n        cc.assert(this.color > 0);\n    };\n\n    this._initWithObject = function (object) {\n        if (object.point) {\n            this._initWithColorAndPoint(object.color, object.point);\n        } else if (object.suit) {\n            this._initWithColorAndPoint(object.suit, object.number);\n        }\n    };\n\n    this.description = function () {\n        return this.cardName();\n    };\n\n    this.cardName = function () {\n        return this.color + \"_\" + this.point;\n    };\n\n    this.sort = function (otherCard, asc = false, AisMax = true) {\n        return KQCard.sort(this, otherCard, asc, AisMax);\n    };\n\n    this.isEqual = function (otherCard) {\n        if (!otherCard) {\n            return false;\n        }\n        return (this.point == otherCard.point) && (this.color == otherCard.color)\n            && (this.sindex == otherCard.sindex);\n    };\n\n    if (point && color) {\n        this._initWithColorAndPoint(color, point);\n        return;\n    }\n\n    var number = Number(point);\n    if (!Number.isNaN(number)) {\n        this._initWithNumber(number);\n        return;\n    }\n\n    if (typeof(point) == 'string') {\n        // 解析 xxxxd_d 形式\n        let found = point.match(/(\\.)*\\d_\\d+/);\n        if ((found instanceof Array) && found.length > 0) {\n            let result = found[0];\n            let numbers = result.split('_');\n\n            let color = Number(numbers[0]);\n            let point = Number(numbers[1]);\n\n            this._initWithColorAndPoint(color, point);\n        }\n\n        return;\n    }\n\n    if (typeof(point) == 'object') {\n        this._initWithObject(point);\n        return;\n    }\n\n    cc.error(\"初始化错误：\" + point + \" \" + color);\n};\n\n// 转换成服务器的牌 model\nKQCard.prototype.toServerCard = function () {\n    return {\n        'suit': this.color,\n        'number': this.point,\n    };\n};\n\nKQCard.COLOR_SPADE   = 4;\nKQCard.COLOR_HEART   = 3;\nKQCard.COLOR_CLUB    = 2;\nKQCard.COLOR_DIAMOND = 1;\n\nmodule.exports = KQCard;\n\nKQCard.cardsFromArray = function (cardNames) {\n    return cardNames.map(function (cardName,index) {\n        return new KQCard(cardName,null,index);\n    });\n};\n\n// 将多张牌转换成服务器的形式\nKQCard.convertToServerCards = function (cards) {\n    return cards.map(function (card) {\n        return card.toServerCard();\n    });\n};\n\nKQCard.TYPE = {\n    WuLong: 0,\n    DuiZi: 1,\n    LiangDui: 2,\n    SanTiao: 3,\n    ShunZi: 4,\n    TongHua: 5,\n    HuLu: 6,\n    TieZhi: 7,\n    TongHuaShun: 8,\n    /*#####*/\n    WuTong:9,\n    /*#####*/\n    SanTaoHua: 10,  // 特殊牌\n    SanShunZi: 11,\n    LiuDuiBan: 12,\n\n    WuDuiSanTiao:13,\n    SiTaoSanTiao: 14,\n\n    CouYiSe: 15,\n    SanFenTianXia: 16,\n    SanTongHuaShun: 17,\n    YiTiaoLong: 18,\n    QingLong: 19,\n};\n\n// 牌类型名\nKQCard.cardsTypeName = function (cards) {\n    let names = ['乌龙', '对子', '两对', '三条', '顺子', '同花', '葫芦', '铁支', '同花顺', '五同',\n        '三同花', '三顺子','六对半', '五对三条', '四套三条',\n        '凑一色','三分天下', '三同花顺', '一条龙', '清龙'];\n    let type = KQCard.cardsType(cards);\n    return names[type];\n};\n\n// 找出牌的类型\nKQCard.cardsType = function (cards) {\n    if (KQCard.isQingLong(cards)) {\n        return KQCard.TYPE.QingLong;\n    }\n\n    if (KQCard.isYiTiaoLong(cards)) {\n        return KQCard.TYPE.YiTiaoLong;\n    }\n\n    //if (KQCard.isSanTongHuaShun(cards)) {\n    //    return KQCard.TYPE.SanTongHuaShun;\n    //}\n    //\n    //if (KQCard.isSanFenTianXia(cards)) {\n    //    return KQCard.TYPE.SanFenTianXia;\n    //}\n\n    if (KQCard.isLiuDuiBan(cards)) {\n        return KQCard.TYPE.LiuDuiBan;\n    }\n\n    if (KQCard.isSanTongHua(cards)) {\n        return KQCard.TYPE.SanTaoHua;\n    }\n\n    if (KQCard.isSanShunZi(cards)) {\n        return KQCard.TYPE.SanShunZi;\n    }\n\n\n    //if (KQCard.isCouYiSe(cards)) {\n    //    return KQCard.TYPE.CouYiSe;\n    //}\n    //\n    //if (KQCard.isWuDuiSanTiao(cards)) {\n    //    return KQCard.TYPE.WuDuiSanTiao;\n    //}\n    //\n    //if (KQCard.isSiTaoSanTiao(cards)) {\n    //    return KQCard.TYPE.SiTaoSanTiao;\n    //}\n\n    /*#####*/\n    if (KQCard.containWuTong(cards, 5)) {\n        return KQCard.TYPE.WuTong;\n    }\n\n    //if (KQCard.containWuTong(cards)) {\n    //    return KQCard.TYPE.WuTong;\n    //}\n    //\n    //if (KQCard.containWuTong(cards)) {\n    //    return KQCard.TYPE.WuTong;\n    //}\n    /*#####*/\n\n    if (KQCard.containTongHuaShun(cards, 5)) {\n        return KQCard.TYPE.TongHuaShun;\n    }\n\n    if (KQCard.containTieZhi(cards)) {\n        return KQCard.TYPE.TieZhi;\n    }\n\n    if (KQCard.containHuLu(cards)) {\n        return KQCard.TYPE.HuLu;\n    }\n\n    if (KQCard.containTongHua(cards)) {\n        return KQCard.TYPE.TongHua;\n    }\n\n    if (KQCard.containShunZi(cards)) {\n        return KQCard.TYPE.ShunZi;\n    }\n\n    if (KQCard.containSanTiao(cards)) {\n        return KQCard.TYPE.SanTiao;\n    }\n\n    if (KQCard.containLiaDui(cards)) {\n        return KQCard.TYPE.LiangDui;\n    }\n\n    if (KQCard.containDuiZi(cards)) {\n        return KQCard.TYPE.DuiZi;\n    }\n\n    return KQCard.TYPE.WuLong;\n};\n\n// 判断是否是同花\nKQCard.isTongHua = function(cards, minLength = 3) {\n    if (cards.length < minLength) {\n        return false;\n    }\n\n    let colors = cards.map(function (card) {\n        return card.color;\n    });\n\n    let color = colors[0];\n    for (let index in colors) {\n        let e = colors[index];\n        if (e != color) {\n            return false;\n        }\n    }\n    return true;\n};\n\n// 是否包含同花\nKQCard.containTongHua = function (cards, minLength = 5) {\n    if (cards.length < minLength) {\n        return false;\n    }\n    //if (KQCard.findTongHua(cards).length > 0) {\n    //    return true;\n    //}\n    //return false;\n    cards = Array.from(cards);\n    cards.sort(KQCard.sortByColor);\n\n    var card20 = KQCard.contain20(cards);\n    cards = cards.kq_excludes(card20);\n    minLength = minLength-card20.length;\n\n    for (var start = 0; (start + minLength) <= cards.length; ++start) {\n        let subCards = cards.slice(start, start + minLength);\n        if (KQCard.isTongHua(subCards, minLength)) {\n            return true;\n        }\n    }\n\n    //return KQCard.containTongHua20(cards);\n};\nKQCard.containTongHua20 = function (card) {\n    if (card.length < 5) {\n        return false;\n    }\n    var card20 = KQCard.contain20(card);\n    var cards = card.kq_excludes(card20);\n    cards.sort(KQCard.sortByColor);\n\n    for(var j = 1;j <= card20.length;++j){\n        var num = 5 - j;\n        for (var start = 0; (start + num) <= cards.length; ++start) {\n            var subCards = cards.slice(start, start + num);\n            if (KQCard.isTongHua(subCards, num)) {\n                return true;\n            }\n        }\n    }\n    return false;\n};\n// 判断是否是顺子\nKQCard.isShunZi = function(cards, minLength = 3) {\n    if (cards.length < minLength) {\n        return false;\n    }\n\n    if (KQCard._isShunZiAKQ(cards)) {\n        return true;\n    }\n\n    let points = cards.map(function (card) {\n        return card.point;\n    }).sort(function (n1, n2) {\n        return n1 - n2;\n    });\n\n    var point = points[0];\n    for (var index in points) {\n        var e = points[index];\n        if (e != point) {\n            return false;\n        }\n\n        point = point + 1;\n    }\n\n    return true;\n};\n\n// 判断是否是 A K Q J 10 这个顺子\nKQCard._isShunZiAKQ = function (cards) {\n    let length = cards.length;\n    if (length.length < 3) {\n        return false;\n    }\n\n    let point1s = [1];\n    let point14s = [14];\n    let pointK = 13;\n\n    Number(length - 1).kq_times(function(times) {\n        point1s.push(pointK - times);\n        point14s.push(pointK - times);\n    });\n\n    return KQCard._isCardsContainPoints(cards, point1s) || KQCard._isCardsContainPoints(cards, point14s);\n};\n\n// cards 中是否包含 points 这些点数\n\nKQCard._isCardsContainPoints = function(cards, points) {\n    for (let index = 0; index < points.length; ++index) {\n        let point = points[index];\n        let pointCardIndex = cards.findIndex(function(card) {\n            return card.point == point;\n        });\n\n        if (pointCardIndex < 0) {\n            return false;\n        }\n    }\n\n    return true;\n};\nKQCard.contain20 = function (cards) {\n    if(cards.length <= 0){\n        return [];\n    }\n    if(typeof(cards[0].point) == 'undefined'){\n        cards = KQCard.cardsFromArray(cards);\n    }\n    var newCard = cards.filter(function(card){//重新赋值cards\n        if(card.point >= 20){\n            return card;\n        }\n    });\n    return newCard || [];\n};\n// 是否包含顺子\nKQCard.containShunZi = function (cards, minLength = 5) {\n    if (cards.length < minLength) {\n        return false;\n    }\n    if (KQCard.findShunZi(cards).length > 0) {\n        return true;\n    }\n    return false;\n    //let uniqueCards = cards.unique(function(card1, card2) {\n    //    return card1.point == card2.point;\n    //});\n    //uniqueCards.sort(KQCard.sortByPoint);\n    //\n    //let minPointCard = uniqueCards[0];\n    //if (minPointCard.point == 1) {\n    //    let APlusCard = new KQCard(minPointCard);\n    //    APlusCard.point = 14;\n    //    uniqueCards.push(APlusCard);\n    //}\n    //\n    //for (var start = 0; (start + minLength) <= uniqueCards.length; ++start) {\n    //    let subCards = uniqueCards.slice(start, start + minLength);\n    //    if (KQCard.isShunZi(subCards, minLength)) {\n    //        return true;\n    //    }\n    //}\n    //\n    //return KQCard.containShunZi20(cards);\n};\n/*KQCard.containShunZi20 = function (card) {\n if (card.length < 5) {\n return false;\n }\n var card20 = KQCard.contain20(card);\n var cards = card.kq_excludes(card20);\n // 先根据点数去重\n var newArr = [];\n var newArrs = [];\n for (var i = 0; i < cards.length; i++) {\n if (newArrs.indexOf(cards[i].point) == -1) {\n newArr.push(cards[i]);\n newArrs.push(cards[i].point);\n }\n }\n //newArr.forEach(function(card){\n //    if(card.scores == 14){\n //        card.scores = 1;\n //    }\n //})\n newArr.sort(function (n1, n2) {\n return n1.point - n2.point;\n });\n for(var j = 1;j <= card20.length;++j){\n var num = 5 - j;\n for (var start = 0; (start + num) <= newArr.length; ++start) {\n var subCards = newArr.slice(start, start + num);\n var bool = parseInt(subCards[num-1]['scores']) - parseInt(subCards[0]['scores']) < 5;\n if(bool){\n return true;\n }\n }\n }\n // 由于点数是唯一且升序，只需要依次遍历判断是否是顺子即可\n let convertedCards = KQCard._convertOneToA1(card);\n if (card === convertedCards) {\n return false;\n }\n return KQCard.containShunZi20(convertedCards);\n };*/\n// 是否是同花顺\nKQCard.isTongHuaShun = function (cards) {\n    return KQCard.isTongHua(cards) && KQCard.isShunZi(cards);\n};\n\n// 是否包含有同花顺\nKQCard.containTongHuaShun = function (cards, minLength = 5) {\n    if (cards.length < minLength) {\n        return false;\n    }\n    if (KQCard.findTongHuaShun(cards).length > 0) {\n        return true;\n    }\n    return false;\n    //var sanShunZi = KQCard.sanShunZi1(cards,minLength)[0];\n    //if(sanShunZi == null){\n    //    return false;\n    //}\n    //var result = false;\n    //for(var i=0;i<sanShunZi.length;i++) {\n    //    var s = sanShunZi[i];\n    //    if (KQCard.isTongHuaShun(s, minLength)) {\n    //        return true;\n    //    }\n    //}\n    //return KQCard.containTongHuaShun1(cards);\n\n};\n/*KQCard.containTongHuaShun1 = function (cards, minLength = 5) {\n if (cards.length < minLength) {\n return false;\n }\n let tempCards = Array.from(cards).sort(KQCard.sortByColor);\n for (var start = 0; (start + minLength) <= tempCards.length; ++start) {\n let subCards = tempCards.slice(start, start + minLength);\n if (KQCard.isTongHuaShun(subCards, minLength)) {\n return true;\n }\n }\n\n let convertedCards = KQCard._convertOneToA1(cards);\n if (cards === convertedCards) {\n return KQCard.containTongHuaShun20(cards);\n }\n return KQCard.containTongHuaShun1(convertedCards);\n //return false;\n };\n KQCard.containTongHuaShun20 = function (card, minLength = 5) {\n if (card.length < minLength) {\n return false;\n }\n var card20 = KQCard.contain20(card) || [];\n var cards = card.kq_excludes(card20);\n\n cards = Array.from(cards);\n var colorS = []; //黑桃\n var colorH = []; //红心\n var colorC = []; //梅花\n var colorD = []; //方块\n var pointS = []; //黑桃\n var pointH = []; //红心\n var pointC = []; //梅花\n var pointD = []; //方块\n for(var i=0;i<cards.length;i++){\n if(cards[i].color == '4'){\n if(pointS.indexOf(cards[i].point) == -1){\n pointS.push(cards[i].point);\n colorS.push(cards[i]);\n }\n\n }else if(cards[i].color == '3'){\n if(pointH.indexOf(cards[i].point) == -1){\n pointH.push(cards[i].point);\n colorH.push(cards[i]);\n }\n }else if(cards[i].color == '2'){\n if(pointC.indexOf(cards[i].point) == -1){\n pointC.push(cards[i].point);\n colorC.push(cards[i]);\n }\n }else if(cards[i].color == '1'){\n if(pointD.indexOf(cards[i].point) == -1){\n pointD.push(cards[i].point);\n colorD.push(cards[i]);\n }\n }\n }\n\n var color = [colorS,colorH,colorC,colorD];\n var colorSum = [];    //总共有几种花色 [5,3,0....]\n for(var i=0;i<color.length;i++){\n if(color[i].length >= parseInt(5 - card20.length)){\n //color[i].forEach(function(ca){\n //    if(ca.scores == 14){\n //        ca.scores = 1;\n //    }\n //})\n color[i].sort(function(a1,a2){\n return a1 - a2;\n })\n colorSum.push(color[i]);\n }\n }\n\n for(var i=0;i<colorSum.length;i++) {\n var s = colorSum[i]\n for(var j = 1;j <= card20.length;++j){\n var num = 5 - j;\n for (var start = 0; (start + num) <= s.length; ++start) {\n var subCards = s.slice(start, start + num);\n var bool = parseInt(subCards[num-1]['scores']) - parseInt(subCards[0]['scores']) < 5;\n if(bool){\n return true;\n }\n }\n }\n }\n\n\n\n let convertedCards = KQCard._convertOneToA1(card);\n if (card === convertedCards) {\n return false;\n }\n return KQCard.containTongHuaShun20(convertedCards);\n };*/\n\n\n// 是否是清龙\nKQCard.isQingLong = function (cards) {\n    let length = 13;\n    if (cards.length != length) {\n        return false;\n    }\n    var card20 = KQCard.contain20(cards);\n    if(card20.length > 0) {\n        return false;\n    }\n    /**\n     *\n     */\n    var colorS = []; //黑桃\n    var colorH = []; //红心\n    var colorC = []; //梅花\n    var colorD = []; //方块\n    for(var i=0;i<cards.length;i++){\n        if(cards[i].suit == 's'){\n            colorS.push(cards[i]);\n        }else if(cards[i].suit == 'h'){\n            colorH.push(cards[i]);\n        }else if(cards[i].suit == 'c'){\n            colorC.push(cards[i]);\n        }else if(cards[i].suit == 'd'){\n            colorD.push(cards[i]);\n        }\n    }\n    var ls = colorS.length;  //黑桃个数\n    var lh = colorH.length;  //红桃个数\n    var lc = colorC.length;  //梅花个数\n    var ld = colorD.length;  //方块个数\n    var color = [ls,lh,lc,ld];\n    var colorSum = [];    //总共有几种花色 [5,3,0....]\n    for(var i=0;i<color.length;i++){\n        if(color[i] != 0){\n            colorSum.push(color[i]);\n        }\n    }\n    if(colorSum.length == 1){\n        if(colorSum[0] == 13){\n\n            if(KQCard.isYiTiaoLong(cards)){\n\n                var teShuCard = cards.filter(function(i){return i});\n\n                teShuCard = KQCard.cardsFromArray(teShuCard);\n\n                teShuCard.forEach(function(a){\n                    if(a.scores == 1) a.scores = 14;\n                });\n\n                teShuCard.sort(function(a,b){\n                    return b.scores - a.scores;\n                });\n\n                teShuCard = KQCard.convertToServerCards(teShuCard);\n\n                var a1 = teShuCard.splice(0,5);\n\n                var a2 = teShuCard.splice(0,5);\n\n                cc.teShuPaiCards = [teShuCard, a2, a1];\n\n                return true;\n            }\n\n        }\n    }\n    //return KQCard.isTongHuaShun(cards);\n    return false;\n};\n\n// 是否是一条龙\nKQCard.isLong = function (cards) {\n    let length = 13;\n    if (cards.length != length) {\n        return false;\n    }\n\n    return KQCard.isShunZi(cards);\n};\n\n/*#####*/\n/*是否一条龙*/\nKQCard.isYiTiaoLong = function (cards) {\n    //cards:{number:1~13 ,'suit':'h'...}\n    var length = 13;\n    if(cards.length != length) {\n        return false;\n    }\n    var card20 = KQCard.contain20(cards);\n    if(card20.length > 0) {\n        return false;\n    }\n    if(typeof(cards[0].number) == 'undefined'){\n        cards = KQCard.convertToServerCards(cards);\n    }\n    var number = cards.map(function (card) {\n        return card.number;\n    }).sort(function (n1, n2) {\n        return n1 - n2;\n    });\n    for(var i=0;i<cards.length-1;i++) {\n        if(number[i] != number[i+1] - 1){\n            return false;\n        }\n    }\n\n    var teShuCard = cards.filter(function(i){return i});\n\n    teShuCard = KQCard.cardsFromArray(teShuCard);\n\n    teShuCard.forEach(function(a){\n        if(a.scores == 1) a.scores = 14;\n    });\n\n    teShuCard.sort(function(a,b){\n        return b.scores - a.scores;\n    });\n\n    teShuCard = KQCard.convertToServerCards(teShuCard);\n\n    var a1 = teShuCard.splice(0,5);\n\n    var a2 = teShuCard.splice(0,5);\n\n    cc.teShuPaiCards = [teShuCard, a2, a1];\n    //cc.log(cc.teShuPaiCards )\n    //cc.log('--------728')\n    return true;\n};\n/*#####*/\n/*是否三同花*/\nKQCard.isSanTongHua = function (cards) {\n    var length = 13;\n    if(cards.length != length) {\n        return false;\n    }\n    var card20 = KQCard.contain20(cards);\n    if(card20.length > 0) {\n        return false;\n    }\n    if (typeof(cards[0].suit) == \"undefined\") {\n        cards = KQCard._convertCardsToCardNames(cards);\n    }\n    var colorS = []; //黑桃\n    var colorH = []; //红心\n    var colorC = []; //梅花\n    var colorD = []; //方块\n    for(var i=0;i<cards.length;i++){\n        if(cards[i].suit == 's'){\n            colorS.push(cards[i]);\n        }else if(cards[i].suit == 'h'){\n            colorH.push(cards[i]);\n        }else if(cards[i].suit == 'c'){\n            colorC.push(cards[i]);\n        }else if(cards[i].suit == 'd'){\n            colorD.push(cards[i]);\n        }\n    }\n    var ls = colorS.length;  //黑桃个数\n    var lh = colorH.length;  //红桃个数\n    var lc = colorC.length;  //梅花个数\n    var ld = colorD.length;  //方块个数\n    var sanCard = [colorS,colorH,colorC,colorD];\n    var teShuCard = [];\n    var color = [ls,lh,lc,ld];\n    var colorSum = [];    //总共有几种花色 [5,3,0....]\n    for(var i=0;i<color.length;i++){\n        if(color[i] != 0){\n            colorSum.push(color[i]);\n            teShuCard.push(sanCard[i]);\n        }\n    }\n\n    //三种花色\n    if(colorSum.length == 3){\n        for(var i=0;i<colorSum.length;i++) {\n            if (colorSum[i] != 5 && colorSum[i] != 3){\n                return false;\n            }\n        }\n        teShuCard.sort(function(a,b){\n            return a.length - b.length;\n        });\n        cc.teShuPaiCards = teShuCard;\n        return true;\n    }\n    return false;\n\n};\n/*是否凑一色*/\nKQCard.isCouYiSe = function (cards) {\n    var length = 13;\n    if(cards.length != length) {\n        return false;\n    }\n    var card20 = KQCard.contain20(cards);\n    if(card20.length > 0) {\n        return false;\n    }\n    if(typeof(cards[0].suit) == 'undefined'){\n        cards = KQCard._convertCardsToCardNames(cards);\n    }\n    var colorS = []; //黑桃\n    var colorH = []; //红心\n    for(var i=0;i<cards.length;i++){\n        if(cards[i].suit == 's' || cards[i].suit == 'c'){\n            colorS.push(cards[i]);//全黑\n        }else if(cards[i].suit == 'h' || cards[i].suit == 'd'){\n            colorH.push(cards[i]);//全红\n        }\n    }\n\n    //如果牌中包含四种花色就不可能是三同花\n    if(colorS.length == 13 || colorH.length == 13){\n        return true;\n    }\n    //else if(colorH.length == 13){\n    //    return true;\n    //}\n    return false;\n};\n/*#####*/\n// 是否是六对半\nKQCard.isLiuDuiBan = function (cards) {\n    let length = 12;\n    if (cards.length < length) {\n        return false;\n    }\n\n    let duiZiLength = 2;\n    //计算一个牌数组内的相同点数的牌的张数\n    let cardNumbers = new GetCardPointsSameCount(cards);\n    let numberOfDuiZi = 0;\n    let numberOfYi = 0;\n    for (let prop in cardNumbers) {\n        let value = cardNumbers[prop];\n        if (value == duiZiLength || value == 3) {\n            numberOfDuiZi = numberOfDuiZi + 1;\n        }\n        else if (value == 4) {\n            numberOfDuiZi = numberOfDuiZi + 2;\n        }\n        //else if (value == 6 || value == 7 || value == 5) {\n        //    numberOfDuiZi = numberOfDuiZi + 0;\n        //}\n        else if (value == 1) {\n            numberOfYi += 1;\n        }\n    }\n\n    if(numberOfDuiZi == 6){\n\n        var teShuCard = cards.filter(function(i){return i});\n\n        teShuCard = KQCard.cardsFromArray(teShuCard);\n\n        teShuCard.forEach(function(a){\n            if(a.scores == 1) a.scores = 14;\n        });\n\n        teShuCard.sort(function(a,b){\n            return b.scores - a.scores;\n        });\n\n        teShuCard = KQCard.convertToServerCards(teShuCard);\n\n        var a1 = teShuCard.splice(0,5);\n\n        var a2 = teShuCard.splice(0,5);\n\n        cc.teShuPaiCards = [teShuCard, a2, a1];\n\n        return true;\n    }\n    return false;\n};\n\nKQCard.isWuDuiSanTiao = function (cards) {\n    let length = 13;\n    if (cards.length < length) {\n        return false;\n    }\n\n    let duiZiLength = 2;\n    let sanTiaoLength = 3;\n    //计算一个牌数组内的相同点数的牌的张数\n    let cardNumbers = new GetCardPointsSameCount(cards);\n    let numberOfDuiZi = 0;\n    let numberOfSanTiao = 0;\n    for (let prop in cardNumbers) {\n        let value = cardNumbers[prop];\n        if (value == duiZiLength) {\n            numberOfDuiZi = numberOfDuiZi + 1;\n        }\n        else if (value == sanTiaoLength) {\n            numberOfSanTiao = numberOfSanTiao + 1;\n        }\n        else if (value >= 4) {\n            numberOfDuiZi = numberOfDuiZi + 2;\n        }\n    }\n    return numberOfDuiZi == 5 && numberOfSanTiao == 1;\n};\n\n//判断5张或者3张是否顺子\nKQCard.isShunZi1 = function(arr){\n    //console.log(arr);\n    for(var i=0;i<arr.length-1;i++){\n        if(arr[i+1] - arr[i] != 1){\n            //不是顺子\n            //console.log(\"不是顺子\");\n            return false;\n        }\n    }\n    return true;\n};\n\nKQCard.isSanShunZi = function (cards) {\n    var length = 13;\n    if(cards.length != length) {\n        return false;\n    }\n\n    if(typeof(cards[0].suit) == 'undefined'){\n        cards = KQCard._convertCardsToCardNames(cards);\n    }\n\n    //取出牌的点数\n    var number = cards.map(function (card) {\n        return card.number;\n    });\n    //排序\n    number.sort(function (n1, n2) {\n        return n1 - n2;\n    });\n    if(KQCard.fenZhu(number,5,5) == false){\n        var number = cards.map(function (card) {\n            return card.number;\n        });\n        //排序\n        number.sort(function (n1, n2) {\n            return n1 - n2;\n        });\n        if(KQCard.fenZhu(number,5,3) == false){\n            var number = cards.map(function (card) {\n                return card.number;\n            });\n            //排序\n            number.sort(function (n1, n2) {\n                return n1 - n2;\n            });\n            if(KQCard.fenZhu(number,3,5) == false){\n                //不是三顺子\n                var AIsExist = false;  //是否存在A\n                for(var i in cards) {\n                    if(cards[i].number == 1) {\n                        AIsExist = true;\n                        //console.log(\"存在A\");\n                        break;\n                    }\n                }\n                if(!AIsExist) {\n                    //console.log(\"退出递归\");\n                    return false;\n                }\n\n                for(var i in cards) {\n                    if(cards[i].number == 1) {\n                        //console.log(\"A转为14\");\n                        cards[i].number = 14;\n                        break;\n                    }\n                }\n                if(cc.teShuPaiCards && cc.teShuPaiCards.length > 0 && cc.teShuPaiCards[0][0]  && typeof(cc.teShuPaiCards[0][0]) == 'number'){\n                    var newCards = cards.filter(function(i){return i;});\n                    var newCards1 = cc.teShuPaiCards.map(function(arr){\n                        var cad = arr.map(function(number){\n                            for(var i = 0; i < newCards.length; i++){\n                                if(newCards[i].number == number){\n                                    return newCards.splice(i,1)[0];\n                                    break;\n                                }\n                            }\n                        });\n                        return cad;\n                    });\n                    cc.teShuPaiCards = newCards1;\n                }\n                return KQCard.isSanShunZi(cards);\n            }\n        }\n    }\n    if(cc.teShuPaiCards && cc.teShuPaiCards.length > 0 && cc.teShuPaiCards[0][0]  && typeof(cc.teShuPaiCards[0][0]) == 'number'){\n        var newCards = cards.filter(function(i){return i;});\n        var newCards1 = cc.teShuPaiCards.map(function(arr){\n            var cad = arr.map(function(number){\n                for(var i = 0; i < newCards.length; i++){\n                    if(newCards[i].number == number){\n                        return newCards.splice(i,1)[0];\n                        break;\n                    }\n                }\n            });\n            return cad;\n        });\n        cc.teShuPaiCards = newCards1;\n    }\n    return true;\n};\n\n//分组553||535||355\nKQCard.fenZhu = function (number,num1,num2)  {\n    var arr1 = [];\n    var arr2 = [];\n    var arr3 = [];\n    for(var i=0;i<number.length-1;i++){\n        if(i == 0){\n            arr1.push(number[0]);\n        }\n        if(number[i+1] - number[i] == 0){\n            continue;\n        }\n        arr1.push(number[i+1]);\n        if(arr1.length == num1){\n            //取第一组是顺子\n            if(KQCard.isShunZi1(arr1)){\n                //这5个是顺子,从数组中移除\n                for(var i=0;i<arr1.length;i++){\n                    for(var j=0;j<number.length;j++){\n                        if(number[j] == arr1[i]){\n                            //两个数一样的只删除一个\n                            if(number[j] == number[j+1]){\n                                continue;\n                            }\n                            number.splice(j,1);    //从number中移除\n                        }\n                    }\n                }\n                /*console.log(\"删除第一组后的number\");\n                 console.log(number);*/\n                //接下来取第二组\n                for(var i=0;i<number.length-1;i++){\n                    if(i == 0){\n                        arr2.push(number[0]);\n                    }\n                    if(number[i+1] - number[i] == 0){\n                        continue;\n                    }\n                    arr2.push(number[i+1]);\n                    if(arr2.length == num2) {\n                        //取第二组是顺子\n                        if (KQCard.isShunZi1(arr2)) {\n                            for(var i=0;i<arr2.length;i++){\n                                for(var j=0;j<number.length;j++){\n                                    if(number[j] == arr2[i]){\n                                        //两个数一样的只删除一个\n                                        if(number[j] == number[j+1]){\n                                            continue;\n                                        }\n                                        number.splice(j,1);    //从number中移除\n                                    }\n                                }\n                            }\n                            /*console.log(\"删除第二组后的number\");\n                             console.log(number);*/\n                            arr3 = number;\n                            //接下来就是剩下的了\n                            if(KQCard.isShunZi1(arr3)){\n                                //第三组也是顺子\n                                var asdf = [arr1,arr2,arr3];\n\n                                asdf.sort(function (n1, n2) {return n1.length - n2.length;});\n\n                                if(!cc.teShuPaiCards) cc.teShuPaiCards = asdf;\n\n                                return true;\n                            }\n                            //第三组不是顺子\n                            return false;\n                        }\n                        //第二组不是顺子\n                        return false;\n                    }\n                }\n            }\n            //第一组不是顺子\n            return false;\n        }\n    }\n    //如果取不到num1个数\n    if(arr1.length < num1){\n        return false;\n    }\n    if(arr2.length < num2){\n        return false;\n    }\n};\n\nKQCard.isSanShunZi1 = function (cards) {\n    var length = 13;\n    if(cards.length != length) {\n        return false;\n    }\n    if(typeof(cards[0].point) == 'undefined'){\n        cards = KQCard.cardsFromArray(cards);\n    }\n    var card20 = KQCard.contain20(cards);\n    if(card20.length > 0) {\n        return false;\n    }\n\n    cards = Array.from(cards);\n    cards.sort(KQCard.sortByPoint);\n    var wei = [];\n    var zhong = [];\n    var tou = [];\n    var sanShunZi = KQCard.sanShunZi1(cards)[0];//获取所有组合的头道\n    if(!sanShunZi){ //你连头道都没有 怎么更我混\n        return false;\n    }\n\n    var newCard = cards.filter(function(i){//重新赋值cards\n        return i;\n    });\n    var newCards1 = [];\n    var newPoint = [];//判断point是否相同\n    var duiZi = [];//取出有对子当中的一张牌\n    for(var s in cards){\n        if(newPoint.indexOf(cards[s].point)<0){\n            newCards1.push(cards[s]);\n            newPoint.push(cards[s].point);\n        }else{//取出有对子当中的一张牌\n            duiZi.push(cards[s]);\n        }\n    }\n\n    for (var j = 0; j < sanShunZi.length; ++j) {//循环所有头道\n        var number3 = sanShunZi[j];\n        if(typeof(number3) == 'undefined'){\n            continue;\n        }\n        for (var i = 0; (i) < cards.length; ++i) {\n            var newCards = newCards1.filter(function(i){//重新赋值cards\n                return i;\n            });\n\n            newCards = newCards.kq_excludes(number3);//删除牌里的头道\n            if (wei.length != 5) {\n                let subCards = newCards.slice(i, i + 5);\n                if (subCards.length == 5 || KQCard.isShunZi(subCards)) {//得到尾道 删除牌里的尾道\n                    wei = subCards;\n                    // cc.log(number3)\n                    // cc.log(newCards1)\n                    // cc.log(subCards)\n                    // cc.log(newCards)\n                    // cc.log(i)\n                    // cc.log('-----716')\n                    newCards = newCards.kq_excludes(subCards);\n\n                }\n            }\n\n            if(wei.length == 5){//把剩余的牌和对子的单张合并\n                let tasks = duiZi.filter(function(i){//重新赋值对子\n                    return i;\n                });\n                tasks = tasks.kq_excludes(number3);//判断头道和对子的单张是否有相同 有的话就删除\n                newCards = newCards.concat(tasks);//把剩余的牌和对子的单张合并\n            }\n\n            if (zhong.length != 5 && newCards.length == 5) {\n                if (KQCard.isShunZi(newCards)) {//是三顺子\n                    zhong = newCards;\n                }\n            }\n            if(wei.length == 5 && zhong.length == 5 ){//是三顺子终止循环\n                break;\n            }\n            else{//来吧 继续吧\n                zhong = [];wei = [];tou = [];\n            }\n        }\n        if(wei.length == 5 && zhong.length == 5 ){//是三顺子终止循环\n            tou = number3;\n            break;\n        }\n        else{//来吧 继续吧\n            zhong = [];wei = [];tou = [];\n        }\n    }\n\n    cards = newCard;\n    if (KQCard._isSanShunZi(tou,zhong,wei)) {//是三顺子\n        tou = KQCard.convertToServerCards(tou);\n        zhong = KQCard.convertToServerCards(zhong);\n        wei = KQCard.convertToServerCards(wei);\n\n        if(!cc.teShuPaiCards) cc.teShuPaiCards = [tou,zhong,wei];\n        return true;\n    }\n    let convertedCards = KQCard._convertOneToA1(cards);\n    if (cards === convertedCards) {\n        cards.forEach(function(a){\n            if(a.point == 14) a.point = 1;\n        });\n        //return false;\n        return KQCard.isSanShunZi1(cards);\n    }\n    return KQCard.isSanShunZi(convertedCards);\n};\n\nKQCard.sanShunZi1 = function (cards,length = 3) {\n    var shunzi = KQCard.findShunZi(cards,length);\n    var cardsT = [];\n    var cardsIndex = [];\n    if(shunzi == null){\n        return false;\n    }\n    for(var i = 0; i < shunzi.length;i++){\n        var a = shunzi[i];\n        var cardsShunzi = [];\n        // var cardsIndex = [];\n        for(var j = 0; j < a.length;j++){\n            var index = a[j];\n            if(typeof(cards[index]) == 'undefined'){\n                continue;\n            }\n            cardsShunzi.push(cards[index]);\n\n        }\n        cardsIndex.push(a);\n        cardsT.push(cardsShunzi);\n    }\n    return [cardsT,cardsIndex];\n};\n\nKQCard._isSanShunZi = function (touCards, zhongCards, weiCards) {\n    return KQCard.isShunZi(touCards) && KQCard.isShunZi(zhongCards)\n        && KQCard.isShunZi(weiCards);\n};\n// 是否是三同花顺\nKQCard.isSanTongHuaShun = function (cards) {\n    var length = 13;\n    if(cards.length != length) {\n        return false;\n    }\n    var card20 = KQCard.contain20(cards);\n    if(card20.length > 0) {\n        return false;\n    }\n    let colorCardsObject = KQCard._colorClassCards(cards);\n\n    var subCards = [];\n    for (let prop in colorCardsObject) {\n        let cards = colorCardsObject[prop];\n        subCards.push(cards);\n    }\n\n    if (subCards.length != 3) {\n        return false;\n    }\n\n    subCards = subCards.sort(function (s1, s2) {\n        return s1.length > s2.length;\n    });\n\n    let touCards = subCards[0];\n    let zhongCards = subCards[1];\n    let weiCards = subCards[2];\n\n    if ((touCards.length != 3) || (zhongCards.length != 5) || (weiCards.length != 5)) {\n        return false;\n    }\n\n    return KQCard._isSanTongHuaShun(touCards, zhongCards, weiCards);\n};\n\n// 将牌根据 color 进行分类\nKQCard._colorClassCards = function (cards) {\n    let colorCardsObject = {};\n    cards.forEach(function (card) {\n        let color = card.color;\n        var subCards = colorCardsObject[color];\n        if (!subCards) {\n            subCards = [];\n            colorCardsObject[color] = subCards;\n        }\n        subCards.push(card);\n    });\n\n    return colorCardsObject;\n};\n\n// 是否是三同花顺\nKQCard._isSanTongHuaShun = function (touCards, zhongCards, weiCards) {\n    return KQCard.isTongHuaShun(touCards) && KQCard.isTongHuaShun(zhongCards)\n        && KQCard.isTongHuaShun(weiCards);\n};\n\n\n// 是否是 “三分天下”\nKQCard.isSanFenTianXia = function (cards) {\n    let length = 13;\n    if (cards.length < length) {\n        return false;\n    }\n\n    let tieZhiLength = 4;\n    let pointHelper = new KQCardPointsHelper(cards);\n    let numberOfTieZhi = 0;\n    for (let prop in pointHelper.pointNumbers) {\n        let value = pointHelper.pointNumbers[prop];\n        if (value == tieZhiLength) {\n            numberOfTieZhi = numberOfTieZhi + 1;\n        }\n    }\n    return numberOfTieZhi === 3;\n};\n\n\n// 是否是 “四套三条”\nKQCard.isSiTaoSanTiao = function (cards) {\n    let length = 13;\n    if (cards.length < length) {\n        return false;\n    }\n    let sanTiaoLength = 3;\n    let pointHelper = new KQCardPointsHelper(cards);\n    let numberOfSanTiao = 0;\n    for (let prop in pointHelper.pointNumbers) {\n        let value = pointHelper.pointNumbers[prop];\n        if (value == sanTiaoLength) {\n            numberOfSanTiao = numberOfSanTiao + 1;\n        }\n    }\n\n    return numberOfSanTiao == 4;\n};\n\n\n// 是否是 “三桃花”\n// 头、中、尾道为相同花色的牌\nKQCard.isSanTaoHua = function (cards) {\n    let length = 13;\n    if (cards.length < length) {\n        return false;\n    }\n    var card20 = KQCard.contain20(cards);\n    if(card20.length > 0) {\n        return false;\n    }\n    let colorHelper = new KQCardColorsHelper(cards);\n    var colorNumbers = [];\n    for (let prop in colorHelper.colorNumber) {\n        colorNumbers.push(colorHelper.colorNumber[prop]);\n    }\n\n    colorNumbers.sort(function (n1, n2) {\n        return n1 - n2;\n    });\n\n    if (colorNumbers.length != 3) {\n        return false;\n    }\n\n    if (colorNumbers[0] == 3\n        && (colorNumbers[1] == 5)\n        && (colorNumbers[2] == 5)) {\n        return true;\n    }\n\n    return false;\n};\n\n\n// 判断是否包含铁支\n// 四张同样点数的牌\nKQCard.containTieZhi = function (cards) {\n    let length = 4;\n    if (cards.length < length) {\n        return false;\n    }\n    var card20 = KQCard.contain20(cards);\n    cards = cards.kq_excludes(card20);\n    length = length-card20.length;\n    let helper = new KQCardPointsHelper(cards);\n\n    for(var w in helper.pointNumbers) {\n        var maxNumber = helper.pointNumbers[w];\n        if(maxNumber >= length){\n            card20.forEach(function(ca){\n                ca.scores = parseInt(w);\n            });\n            return true;\n        }\n    }\n    //if(helper.maxNumber() >= length){\n    //    return helper.maxNumber() >= length;\n    //}\n    // else{\n    //    return KQCard.containGuiPai(cards,4);\n    //}\n    //if (KQCard.findTieZhi(cards).length > 0) {\n    //    return true;\n    //}\n    return false;\n};\n\n\n// 判断是否是铁支\nKQCard.isTieZhi = function (cards) {\n    let length = 4;\n    if (cards.length != length) {\n        return false;\n    }\n\n    let result = cards.reduce(function (point, card) {\n        if (point == card.point) {\n            return point;\n        }\n        return -1;\n    }, cards[0].point);\n\n    return result != -1;\n};\n\n/*#####是否包含五同*/\n//五张同样点数的牌\nKQCard.containWuTong = function(cards) {\n    var length = 5;\n    if(cards.length < length){\n        return false;\n    }\n    var card20 = KQCard.contain20(cards);\n    cards = cards.kq_excludes(card20);\n    length = length-card20.length;\n    //五张牌相同的\n    let helper = new KQCardPointsHelper(cards);\n    //for(var w in helper.pointNumbers) {\n    //    cc.log(w)\n    //}\n    //cc.log(cards)\n    //cc.log(helper)\n    //cc.log(card20)\n    //cc.log(helper.maxNumber())\n    //cc.log('------1307')\n    //if(helper.maxNumber() >= length){\n    //    return helper.maxNumber() >= length;\n    //}\n    for(var w in helper.pointNumbers) {\n        var maxNumber = helper.pointNumbers[w];\n        if(maxNumber >= length){\n            card20.forEach(function(ca){\n                ca.scores = parseInt(w);\n            });\n            return helper.maxNumber() >= length;\n        }\n    }\n    return false;\n};\n\n/*判断是否五同*/\nKQCard.isWuTong = function(cards) {\n    var length = 5;\n    if(cards.length != length) {\n        return false;\n    }\n\n    let result = cards.reduce(function (point, card) {\n        if (point == card.point) {\n            return point;\n        }\n        return -1;\n    }, cards[0].point);\n\n    return result != -1;\n};\n/*#####*/\n\n// 是否是 “葫芦”\n// 三张相同 + 一对\nKQCard.containHuLu = function (cards) {\n    let length = 5;\n    if (cards.length < length) {\n        return false;\n    }\n    if (KQCard.findHuLu(cards).length > 0) {\n        return true;\n    }\n    //let pointHelper = new KQCardPointsHelper(cards);\n    //var pointNumbers = [];\n    //var index = 0;\n    //for (let prop in pointHelper.pointNumbers) {\n    //    pointNumbers[index] = pointHelper.pointNumbers[prop];\n    //    index = index + 1;\n    //}\n    //var h=[];\n    //var h1=[];\n    //for(var i in pointNumbers){\n    //    var s=pointNumbers[i];\n    //    if(s == 3){\n    //        h.push(s)\n    //    }\n    //    else if(s==4){\n    //        h1.push(s)\n    //    }\n    //\n    //}\n    //\n    //if ((pointNumbers.indexOf(3) != -1) && (pointNumbers.indexOf(2) != -1)\n    // || h.length > 1 || h1.length > 1 ||(pointNumbers.indexOf(4) != -1)\n    // && (pointNumbers.indexOf(2) != -1)) {\n    //    return true;\n    //}\n\n    return false;\n};\n\n// 判断是否是 葫芦\nKQCard.isHuLu = function (cards) {\n    if (cards.length != 5) {\n        return false;\n    }\n\n    let points = cards.map(function (card) {\n        return card.point;\n    }).sort(function (p1, p2) {\n        return p1 - p2;\n    });\n\n    var p1 = points[0];\n    var p2 = p1;\n    var numberP1 = 0;\n    var numberP2 = 0;\n\n    points.forEach(function (point) {\n        if (point != p1 && point != p2) {\n            p2 = point;\n            numberP2 = 0;\n        }\n\n        numberP1 = numberP1 + ((point == p1) ? 1 : 0);\n        numberP2 = numberP2 + ((point == p2) ? 1 : 0);\n    });\n\n    let maxNumber = Math.max(numberP1);\n    let minNumber = Math.min(numberP2);\n\n    return (minNumber == 2) && (maxNumber == 3);\n};\n\n// 是否包含有 “三条”\nKQCard.containSanTiao = function (cards) {\n    var length = 3;\n    if (cards.length < length) {\n        return false;\n    }\n    //if (KQCard.findSanTiao(cards).length > 0) {\n    //    return true;\n    //}\n    var card20 = KQCard.contain20(cards);\n    cards = cards.kq_excludes(card20);\n    length = length-card20.length;\n    let pointHelper = new KQCardPointsHelper(cards);\n    for(var w in pointHelper.pointNumbers) {\n        var maxNumber = pointHelper.pointNumbers[w];\n        if(maxNumber >= length){\n            card20.forEach(function(ca){\n                ca.scores = parseInt(w);\n            });\n            return true;\n        }\n    }\n    //for (let prop in pointHelper.pointNumbers) {\n    //    if (pointHelper.pointNumbers[prop] >= length) {\n    //        return true;\n    //    }\n    //}\n    return false;\n\n    //\n    //return KQCard.containGuiPai(cards,3);\n};\n\n// 是否是 “三条”\nKQCard.isSanTiao = function (cards) {\n    if (cards.length != 3) {\n        return false;\n    }\n\n    let result = cards.reduce(function (point, card) {\n        if (card.point == point) {\n            return point;\n        }\n\n        return -1;\n    }, cards[0].point);\n\n    return result != -1;\n};\n\n// 是否包含有 ：两对\nKQCard.containLiaDui = function (cards) {\n    if (cards.length < 4) {\n        return false;\n    }\n    if (KQCard.findLiaDui(cards).length > 0) {\n        return true;\n    }\n    //var numberOfDuiZi = 0;\n    //let pointHelper = new KQCardPointsHelper(cards);\n    //for (let prop in pointHelper.pointNumbers) {\n    //    if (pointHelper.pointNumbers[prop] == 2) {\n    //        numberOfDuiZi = numberOfDuiZi + 1;\n    //        if (numberOfDuiZi == 2) {\n    //            return true;\n    //        }\n    //    }\n    //}\n\n    return false;\n};\n\n// 是否是 两对\nKQCard.isLiaDui = function (cards) {\n    if (cards.length != 4) {\n        return false;\n    }\n\n    let pointHelper = new KQCardPointsHelper(cards);\n    for (let prop in pointHelper.pointNumbers) {\n        if (pointHelper.pointNumbers[prop] != 2) {\n            return false;\n        }\n    }\n    return true;\n};\n\n// 是不是对子\nKQCard.isDuiZi = function (cards) {\n    if (cards.length != 2) {\n        return false;\n    }\n\n    let card1 = cards[0];\n    let card2 = cards[1];\n\n    return card1.point == card2.point;\n};\n\n// 是否包含对子\nKQCard.containDuiZi = function (cards) {\n    var length = 2;\n    if (cards.length < length) {\n        return false;\n    }\n    //if (KQCard.findDuiZi(cards).length > 0) {\n    //    return true;\n    //}\n    var card20 = KQCard.contain20(cards);\n    cards = cards.kq_excludes(card20);\n    length = length-card20.length;\n    let pointHelper = new KQCardPointsHelper(cards);\n    //for (let prop in pointHelper.pointNumbers) {\n    //    if (pointHelper.pointNumbers[prop] >= length) {\n    //        return true;\n    //    }\n    //}\n    for(var w in pointHelper.pointNumbers) {\n        var maxNumber = pointHelper.pointNumbers[w];\n        if(maxNumber >= length){\n            card20.forEach(function(ca){\n                ca.scores = parseInt(w);\n            });\n            return true;\n        }\n    }\n    return false;\n    //return KQCard.containGuiPai(cards,2);\n};\n\nKQCard.containGuiPai = function (cards , length) {\n    if (cards.length < length) {\n        return false;\n    }\n    var card20 = KQCard.contain20(cards);\n    cards = cards.kq_excludes(card20);\n    let helper = new KQCardPointsHelper(cards);\n    var maxNumber = (helper.maxNumber() + card20.length);\n    return maxNumber >= length;\n};\n/*#####*/\n// 是否是特殊牌\nKQCard.isTeShuPai = function (cards) {\n    if (cards.length < 13) {\n        return false;\n    }\n\n    return KQCard.isQingLong(cards)\n        || KQCard.isYiTiaoLong(cards)\n        || KQCard.isLiuDuiBan(cards)\n        || KQCard.isSanShunZi(cards)\n        || KQCard.isSanTongHua(cards)\n        /*|| KQCard.isSanTongHuaShun(cards)\n         || KQCard.isSanFenTianXia(cards)\n         || KQCard.isSiTaoSanTiao(cards)\n\n         || KQCard.isWuDuiSanTiao(cards)\n         || KQCard.isCouYiSe(cards)*/;\n};\n\n// 将牌中的 1 变化为 A（14)\nKQCard._convertOneToA = function (cards) {\n    if (cards.find(function (card) {\n            return card.point == 1;\n        }) == undefined) {\n        return cards;\n    }\n    let result = cards.map(function (card) {\n        if (card.point == 1) {\n            let newCard = new KQCard(14, card.color);\n            return newCard;\n        }\n        return card;\n    });\n\n    return result;\n};\n\nKQCard._convertOneToA1 = function (cards) {\n    if (cards.find(function (card) {\n            return card.point == 1;\n        }) == undefined) {\n        return cards;\n    }\n    var num = 0;\n    let result = cards.map(function (card) {\n        if (card.point == 1 && num == 0) {\n            num++;\n            let newCard = new KQCard(14, card.color);\n            return newCard;\n        }\n        return card;\n    });\n\n    return result;\n};\n\n// KQCard 的排序方法\nKQCard.sortByPoint = function (card1, card2) {\n    let result = Number(card1.point) - Number(card2.point)\n    return result;\n};\n\nKQCard.sortByColor = function (card1, card2, pointAsc = true) {\n    if (card2.color == card1.color) {\n        return (card1.point - card2.point) * (pointAsc ? 1 : -1);\n    }\n    return card2.color - card1.color;\n}\n\nKQCard.sort = function (card1, card2, asc = true, AisMax = true) {\n    let result = 1;\n    if (card1.point == card2.point) {\n        result = card1.color - card2.color;\n    } else {\n        var point1 = card1.point;\n        var point2 = card2.point;\n        if (AisMax && point1 == 1) {\n            point1 = 14;\n        }\n\n        if (AisMax && point2 == 1) {\n            point2 = 14;\n        }\n\n        result = point1 - point2;\n    }\n\n    return result * (asc ? 1 : -1);\n};\n\n//转为客户端的牌\nKQCard._convertCardsToCardNames = function (cards) {\n    // [{\"suit\":\"s\",\"number\":10}]\n    let suitColorMap =['','d','c','h','s'];\n    return cards.map(function (card) {\n        var cardNumber = card.point;\n        let color = suitColorMap[card.color];\n        let number = Math.max(Math.min(cardNumber, 13), 1);\n        return {number:number,suit:color};\n    });\n};"]}