{"version":3,"sources":["CompareCards.js"],"names":["KQCardResHelper","require","AudioManager","KQCard","cc","Class","extends","Component","properties","touLayout","Layout","zhongLayout","weiLayout","touLayoutBack","zhongLayoutBack","weiLayoutBack","baoDao","Node","playTotalScore","daoScoreLayouts","daoTitleNodes","TScoreLayout","TtitleNode","pNum","teShuTime","teShuNum","_lCScore","_daoLayouts","_daoLayoutBacks","_scores","_user","_cardsInfo","_compareIndex","onLoad","reset","setScores","node","children","forEach","active","getComponent","Sprite","spriteFrame","nodes","concat","cardSpriteAtlas","parent","nod","removeAllChildren","cardSprite","_loadCardFrame","bind","unscheduleAllCallbacks","stopAllActions","setCompareData","user","cardInfo","cardsInfo","lCScore","cards","map","cardInfoItem","cardsFromArray","reduce","array","subCards","scores","score1","score2","score3","lScore1","lScore2","lScore3","setCards","showScoreResult","cScore","opacity","x","y","runAction","moveTo","p","scheduleOnce","fadeOut","showNextCompareScore","isContainExtra","scores1","splice","length","scaleTo11","scaleTo","scaleTo21","scaleTo31","scaleToSeq1","sequence","index","scaleTo1","scaleTo2","scaleTo3","scaleToSeq","nextCompareScore","data","type","value","setMaPai","cardName","maPai","nodds","addComponent","loader","loadRes","SpriteFrame","err","error","message","btnSprite1","sizeMode","width","height","addChild","cardSprites","_allCardSprites","kqCard","nodds1","path","cards0","slice","cards1","cards2","cards11","typeName0","cardsType","typeName1","typeName2","i","_setGuiCard","Layouts","is_WH","string","labels","Number","_creatorNodes","strings","stringAyy","split","s","name","paths","w_h","btnSprite","_setCardSpriteFrame","indexs","typeName","_setGuiCards","showTouCards","scaleY","types","instance","playCardType","sex","showZhongCards","showWeiCards","showTeShuCards","touCardSprites","_cardSpritesWithLayout","zhongCardSprites","weiCardSprites","showNextCards","cardTypeCombine","getChildByName","showBaoDao","showAllCards","no","positonY","cardType","btnSprites1","callback","SpriteAtlas","atlas","_cardFullName","frame","getSpriteFrame","cardShortName","startsWith","_clearCards","_clearLayoutCards","layout","sprite","result"],"mappings":"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","file":"CompareCards.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\Pefabs","sourcesContent":["const KQCardResHelper = require('KQCardResHelper');\nconst AudioManager = require('AudioManager');\nconst KQCard = require('KQCard');\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        touLayout: cc.Layout,\n        zhongLayout: cc.Layout,\n        weiLayout: cc.Layout,\n\n        touLayoutBack: cc.Layout,\n        zhongLayoutBack: cc.Layout,\n        weiLayoutBack: cc.Layout,\n        baoDao: cc.Node,  //报道图,\n        playTotalScore: cc.Layout,  //所有玩家的总分数\n\n        daoScoreLayouts: [cc.Layout],\n        daoTitleNodes: [cc.Node],\n        TScoreLayout: cc.Layout,\n        TtitleNode: cc.Node,\n\n        pNum:0,         //玩家人数\n        teShuTime:0,    //特殊牌出牌顺序\n        teShuNum:0,     //特殊牌人数\n\n        _lCScore:null,\n        _daoLayouts: null, // 头、中、尾集合\n        _daoLayoutBacks: null, // 头、中、尾集合\n        _scores: null,\n        _user: null,       // 用于比牌的数据\n        _cardsInfo: null,\n        _compareIndex: 0,  // 将要比较的 索引  0~2\n    },\n\n    // use this for initialization\n    onLoad: function () {\n\n        this._daoLayouts = [this.touLayout, this.zhongLayout, this.weiLayout];\n        this._daoLayoutBacks = [this.touLayoutBack, this.zhongLayoutBack, this.weiLayoutBack];\n        this.reset();\n\n        if (this._scores) {\n            this.setScores(this._scores);\n        }\n\n    },\n\n    reset: function () {\n        this._compareIndex = 0;\n\n        this.node.children.forEach(function (node) {node.active = false;});\n\n        this.baoDao.getComponent(cc.Sprite).spriteFrame = null;\n\n        var nodes = this.touLayoutBack.node.children.concat(this.zhongLayoutBack.node.children).concat(this.weiLayoutBack.node.children);\n\n        this.cardSpriteAtlas = this.node.parent.parent.getComponent('play').cardSpriteAtlas;\n\n        nodes.forEach(function (nod) {\n\n            nod.removeAllChildren();\n\n            var cardSprite = nod.getComponent(cc.Sprite);\n\n            KQCard._loadCardFrame(this.cardSpriteAtlas, \"public-pic-card-poker-back\" ,cardSprite);\n\n        }.bind(this));\n\n        this.daoScoreLayouts.forEach(function (nod) {nod.node.active = false;}.bind(this));\n\n        this.daoTitleNodes.forEach(function (nod) {nod.active = false;}.bind(this));\n\n        if(this.TScoreLayout) this.TScoreLayout.node.active = false;\n\n        if(this.TtitleNode) this.TtitleNode.active = false;\n\n        this.unscheduleAllCallbacks();\n\n        //console.log('执行了一遍清除定时器--------------------------------')\n\n        if(this.TScoreLayout) this.TScoreLayout.node.stopAllActions();\n\n        if(this.playTotalScore) this.playTotalScore.node.stopAllActions();\n    },\n\n    setCompareData: function (user) {\n        this._user = user;\n        this._cardsInfo = user.cardInfo;\n        let cardsInfo = user.cardInfo;\n        this._lCScore = user.lCScore;\n        let cards = cardsInfo.map(function (cardInfoItem) {\n            return KQCard.cardsFromArray(cardInfoItem.cards);\n        }).reduce(function (array, subCards) {\n            return array.concat(subCards);\n        }, []);\n\n\n        let scores = [user.score1 || 0, user.score2 || 0, user.score3 || 0,user.lScore1 || 0, user.lScore2 || 0, user.lScore3 || 0];\n        this.setCards(cards);\n        this.setScores(scores);\n    },\n\n    //显示所有玩家的总分数\n    showScoreResult: function() {\n        if(!this._user) return;\n        var scores = this._user.cScore;\n        this.setScores([scores],[this.playTotalScore],true);\n        this.playTotalScore.node.active = true;\n        this.playTotalScore.node.opacity = 255;\n        var x = this.playTotalScore.node.x;\n        var y = this.playTotalScore.node.y;\n        this.playTotalScore.node.runAction(cc.moveTo(0.8, cc.p(x, y+30)));\n        this.scheduleOnce(function() {\n            this.playTotalScore.node.runAction(cc.fadeOut(0.2));\n        }.bind(this),0.6);\n        this.scheduleOnce(function() {this.playTotalScore.node.y = y;}.bind(this),1);\n    },\n\n    //显示三道分数\n    showNextCompareScore: function(isContainExtra) {\n        if(isContainExtra && this.TScoreLayout){\n            var scores1 = this._lCScore.splice(0,1);\n            if(scores1.length <= 0) return;\n            this.setScores(scores1,[this.TScoreLayout],true);\n            this.TtitleNode.active = true;\n            this.TScoreLayout.node.active = true;\n\n            var scaleTo11 = cc.scaleTo (0.3, 1.8)\n            var scaleTo21 = cc.scaleTo (0.1, 1.1)\n            var scaleTo31 = cc.scaleTo (0.1, 1.3)\n            var scaleToSeq1 =cc.sequence(scaleTo11,scaleTo21,scaleTo31);\n            this.TScoreLayout.node.runAction(scaleToSeq1);\n        }\n\n        if(this.daoScoreLayouts.length <= 0) return;\n        if(!this._user.isContainExtra){\n            var index = this._compareIndex == 0 ? 1: this._compareIndex;\n            this.daoScoreLayouts[index-1].node.active = true;\n            this.daoScoreLayouts[index+2].node.active = true;\n            this.daoTitleNodes[index-1].active = true;\n        }\n\n        var scores = this._lCScore.splice(0,1);\n        if(scores.length <= 0  && !this.TScoreLayout) return;\n        this.setScores(scores,[this.TScoreLayout],true);\n        this.TtitleNode.active = true;\n        this.TScoreLayout.node.active = true;\n\n        var scaleTo1 = cc.scaleTo (0.3, 1.8)\n        var scaleTo2 = cc.scaleTo (0.1, 1.1)\n        var scaleTo3 = cc.scaleTo (0.1, 1.3)\n        var scaleToSeq =cc.sequence(scaleTo1,scaleTo2,scaleTo3);\n        this.TScoreLayout.node.runAction(scaleToSeq);\n\n    },\n\n    // 下一个要比较的分数\n    // 如果没有要比较的了，则返回 0\n    nextCompareScore: function() {\n        if (!this._user) return 0;\n\n        var data;\n        if(this._user.isContainExtra){\n            data = this._cardsInfo[0];\n            if (data) return data.type * 9000000000000000;\n        }else{\n            data = this._cardsInfo[this._compareIndex];\n        }\n        if (!data) return 0;\n        return data.value;\n    },\n\n    setMaPai: function (nodes ,cardName) {\n        if(cc.maPai == cardName){\n\n            var nodds = new cc.Node(); //创建一个节点对象\n\n            nodds.addComponent(cc.Sprite); //添加精灵组件\n\n            cc.loader.loadRes('play/desk/img_red5_1', cc.SpriteFrame, function (err, spriteFrame) {\n\n                if (err) {cc.error(err.message || err);return;}\n\n                var btnSprite1 = nodds.getComponent(cc.Sprite);\n\n                btnSprite1.sizeMode = 0;\n\n                btnSprite1.spriteFrame = spriteFrame;\n\n                btnSprite1.node.width = nodes.width + 10;\n\n                btnSprite1.node.height = nodes.height + 10;\n\n            }.bind(this));\n\n            nodes.addChild(nodds);\n        }\n    },\n\n    setCards: function (cards) {\n\n        let cardSprites = this._allCardSprites();\n\n        this.cardSpriteAtlas = this.node.parent.parent.getComponent('play').cardSpriteAtlas;\n\n        cards.forEach(function (kqCard, index) {\n            if (index >= cardSprites.length) {\n                return;\n            }\n            cardSprites[index].node.removeAllChildren();\n\n            cardSprites[index].node.getComponent(cc.Sprite).spriteFrame = \"\";\n\n            var nodds1 = new cc.Node(); //创建一个节点对象\n\n            nodds1.cardName = kqCard.cardName();\n\n            nodds1.width = cardSprites[index].node.width;\n\n            nodds1.height = cardSprites[index].node.height;\n\n            nodds1.addComponent(cc.Sprite); //添加精灵组件\n\n            var cardSprite = nodds1.getComponent('cc.Sprite');\n\n            cardSprite.sizeMode = 0;\n\n            var path = \"public-pic-card-poker-\" + kqCard.cardName();\n\n            KQCard._loadCardFrame(this.cardSpriteAtlas, path ,cardSprite);\n\n            this.setMaPai(cardSprite.node, kqCard.cardName());\n\n            cardSprites[index].node.addChild(nodds1);\n\n        }.bind(this));\n\n        var cards0 = cards.slice(0,3)\n        var cards1 = cards.slice(3,8)\n        var cards2 = cards.slice(8,13)\n\n        var cards11 = [cards0, cards1, cards2]\n        //头道\n        let typeName0 = KQCard.cardsType(cards0)+1;\n        typeName0 = typeName0>=10 ? typeName0 :\"0\"+typeName0;\n        typeName0 = typeName0=='04' ? '11' :typeName0;\n\n        //中道\n        let typeName1 = KQCard.cardsType(cards1)+1;\n        typeName1 = typeName1>=10 ? typeName1 :\"0\"+typeName1;\n        typeName1 = typeName1=='07' ? '22' :typeName1;\n\n        //尾道\n        let typeName2 = KQCard.cardsType(cards2)+1;\n        typeName2 = typeName2>=10 ? typeName2 :\"0\"+typeName2;\n\n        cardSprites = cardSprites.map(function(i){return i.node;});\n\n        if(typeName0) KQCard._setGuiCard(0, 0, 3, typeName0, cards11, cardSprites, this.cardSpriteAtlas);\n        if(typeName1) KQCard._setGuiCard(1, 3, 8, typeName1, cards11, cardSprites, this.cardSpriteAtlas);\n        if(typeName2) KQCard._setGuiCard(2, 8, 13, typeName2, cards11, cardSprites, this.cardSpriteAtlas);\n\n    },\n\n\n    setScores: function (scores ,Layouts = null ,is_WH = false) {\n        if(!Layouts){\n            Layouts = this.daoScoreLayouts;\n            if(Layouts.length <= 0) return;\n        }\n\n        scores.forEach(function (string, index) {\n\n            let labels = Layouts[index];\n\n            labels.node.removeAllChildren();\n\n            var path = \"play/CardTypeCombine/\" + ((Number(string) >= 0) ? \"addNum\" : \"delNum\");\n\n            this._creatorNodes(labels.node ,10 ,path ,'' ,is_WH);\n\n            var strings = (string > 0) ? (string) + \"\": (string * -1) + \"\";\n\n            var stringAyy = strings.split(\"\");\n\n            for(var i = 0;i < stringAyy.length;i++){\n\n                let s = stringAyy[i];\n\n                this._creatorNodes(labels.node ,Number(s) ,path ,'' ,is_WH);\n\n            }\n\n            labels.type = 1;\n\n        }.bind(this));\n    },\n\n    _creatorNodes:function(nodes,name,path,paths,w_h = false){\n\n        var node = new cc.Node(); //创建一个节点对象\n\n        node.addComponent(cc.Sprite); //添加精灵组件\n\n        var btnSprite = node.getComponent(cc.Sprite);\n\n        btnSprite.sizeMode = 0;\n\n        btnSprite.node.width = 18;btnSprite.node.height = 23;\n        //name = name + \"\";\n        this._loadCardFrame(name, function (spriteFrame) {\n\n            btnSprite.spriteFrame = spriteFrame;\n\n            if(w_h){btnSprite.node.width = 30;btnSprite.node.height = 40;}\n\n        }.bind(this), path, paths);\n\n        nodes.addChild(node);\n\n    },\n\n    _setCardSpriteFrame: function (indexs,nodes) {\n        let cardsInfo = this._cardsInfo;\n        let cards = cardsInfo.map(function (cardInfoItem) {\n                return KQCard.cardsFromArray(cardInfoItem.cards);\n            })[indexs] || [];\n\n        this.cardSpriteAtlas = this.node.parent.parent.getComponent('play').cardSpriteAtlas;\n\n        // cc.log(this._cardsInfo)\n        // cc.log(cards)\n        // cc.log('------555')\n\n        cards.forEach(function (kqCard, index) {\n\n            nodes.children[index].removeAllChildren();\n\n            nodes.children[index].getComponent(cc.Sprite).spriteFrame = \"\"\n\n            var nodds1 = new cc.Node(); //创建一个节点对象\n\n            nodds1.cardName = kqCard.cardName();\n\n            nodds1.width = nodes.children[index].width;\n\n            if(nodes.parent.parent.name == \"playSelf\"){\n\n                nodes.children[index].height = 130;\n\n                nodds1.height = 130;\n\n            }else{\n\n                nodes.children[index].height = 115;\n\n                nodds1.height = 115;\n\n                //console.log(nodes);\n                //console.log(nodds1);\n            }\n\n            nodds1.addComponent(cc.Sprite); //添加精灵组件\n\n            var cardSprite = nodds1.getComponent('cc.Sprite');\n\n            cardSprite.sizeMode = 0;\n\n            var path = \"public-pic-card-poker-\" + kqCard.cardName();\n\n            cardSprite.node.removeAllChildren();\n\n            KQCard._loadCardFrame(this.cardSpriteAtlas, path ,cardSprite);\n\n            this.setMaPai(cardSprite.node, kqCard.cardName());\n\n            nodes.children[index].addChild(nodds1);\n\n        }.bind(this));\n\n        var typeName = KQCard.cardsType(cards)+1;\n\n        typeName = typeName>=10 ? typeName+\"\" :\"0\"+typeName;\n\n        //头道\n        if(indexs == 0){\n            typeName = typeName=='04' ? '11' :typeName;\n        }\n        else if(indexs == 1){\n            typeName = typeName=='07' ? '22' :typeName;\n        }\n\n        var cardSprites = nodes.children.map(function(i){return i;});\n\n        KQCard._setGuiCards(typeName, cards, cardSprites, this.cardSpriteAtlas);\n\n    },\n\n    showTouCards: function () {\n        if(this._user.isContainExtra == true) return;\n        //console.log('开始执行一次定时动作--------------------------------')\n\n        this.touLayoutBack.node.active = false;\n        this._setCardSpriteFrame(0,this.touLayoutBack.node);\n        this.scheduleOnce(function() {\n            this.touLayout.node.active = false;\n            this.touLayoutBack.node.active = true;\n        }.bind(this), 0.7);\n\n        this.touLayout.node.active = true;\n        this.touLayout.node.scaleY = 0.7;\n        this.scheduleOnce(function() {\n            this.touLayout.node.scaleY = 1;\n        }.bind(this), 0.02);\n\n\n        var types = this._cardsInfo[this._compareIndex].type == 3 ? 333:this._cardsInfo[this._compareIndex].type;\n        AudioManager.instance.playCardType(this._user.sex, types);\n        this._compareIndex += 1;\n    },\n\n    showZhongCards: function () {\n        if(this._user.isContainExtra == true) return;\n\n        this.zhongLayoutBack.node.active = false;\n        this._setCardSpriteFrame(1,this.zhongLayoutBack.node);\n        this.scheduleOnce(function() {\n            this.zhongLayout.node.active = false;\n            this.zhongLayoutBack.node.active = true;\n        }.bind(this), 0.7);\n\n        this.zhongLayout.node.active = true;\n        this.zhongLayout.node.scaleY = 0.7;\n        this.scheduleOnce(function() {\n            this.zhongLayout.node.scaleY = 1;\n        }.bind(this), 0.02);\n\n        var types = this._cardsInfo[this._compareIndex].type == 6 ? 555:this._cardsInfo[this._compareIndex].type;\n        AudioManager.instance.playCardType(this._user.sex, types);\n        this._compareIndex += 1;\n    },\n\n    showWeiCards: function () {\n        //console.log('执行了一次尾道动画---------------')\n        if(this._user.isContainExtra == true) return;\n        //this._setCardSpriteFrame(1,this.zhongLayoutBack.node);\n        this.weiLayoutBack.node.active = false;\n        this._setCardSpriteFrame(2,this.weiLayoutBack.node);\n        this.scheduleOnce(function() {\n            this.weiLayout.node.active = false;\n            this.weiLayoutBack.node.active = true;\n        }.bind(this), 0.7);\n\n        this.weiLayout.node.active = true;\n        this.weiLayout.node.scaleY = 0.7;\n        this.scheduleOnce(function() {\n            this.weiLayout.node.scaleY = 1;\n        }.bind(this), 0.02);\n\n        AudioManager.instance.playCardType(this._user.sex, this._cardsInfo[this._compareIndex].type);\n        this._compareIndex += 1;\n    },\n\n    showTeShuCards: function (cards) {\n        //let typeName = KQCard.cardsTypeName(cardsNames);\n        this._daoLayoutBacks = [this.touLayoutBack, this.zhongLayoutBack, this.weiLayoutBack];\n\n        let touCardSprites = this._cardSpritesWithLayout(this._daoLayoutBacks[0]);\n        let zhongCardSprites = this._cardSpritesWithLayout(this._daoLayoutBacks[1]);\n        let weiCardSprites = this._cardSpritesWithLayout(this._daoLayoutBacks[2]);\n        let cardSprites = touCardSprites.concat(zhongCardSprites).concat(weiCardSprites);\n        this.cardSpriteAtlas = this.node.parent.parent.getComponent('play').cardSpriteAtlas;\n        this.scheduleOnce(function() {\n            cards.forEach(function (kqCard, index) {\n                if (index >= cardSprites.length) return;\n\n                let cardSprite = cardSprites[index];\n\n                var path = \"public-pic-card-poker-\" + kqCard.cardName();\n\n                cardSprite.node.removeAllChildren();\n\n                KQCard._loadCardFrame(this.cardSpriteAtlas, path ,cardSprite);\n\n                this.setMaPai(cardSprite.node, kqCard.cardName());\n\n            }.bind(this));\n            this._daoLayoutBacks.forEach(function (nodes) {nodes.node.active = true;}.bind(this));\n            AudioManager.instance.playCardType(this._user.sex, this._cardsInfo[0].type);\n        }.bind(this),0.1);\n    },\n\n    showNextCards: function () {\n        var cardTypeCombine = this.node.parent.parent.getChildByName('CardTypeCombine').getComponent('CardTypeCombine');\n        cardTypeCombine.reset();\n        cardTypeCombine.node.active = false;\n\n        this.touLayoutBack.node.parent.active = true;\n        if (this._user.isContainExtra) {\n            var cards = this._cardsInfo[0].cards.map(function (cardInfoItem) {\n                return KQCard.cardsFromArray(cardInfoItem);\n            }).reduce(function (array, subCards) {\n                return array.concat(subCards);\n            }, []);\n            this.showTeShuCards(cards);\n            this.showBaoDao(0,0);\n            this.baoDao.active = true;\n            return;\n        }\n        this._daoLayouts = [this.touLayout, this.zhongLayout, this.weiLayout];\n        this._daoLayouts.forEach(function (nodes) {\n            nodes.node.active = false;\n        });\n        if (this._compareIndex == 0) {\n            this.showBaoDao(0,140);\n            this.showTouCards();\n        }\n        else if (this._compareIndex == 1) {\n            this.showBaoDao(1,85);\n            this.showZhongCards();\n        }\n        else if (this._compareIndex == 2) {\n            this.showBaoDao(2,34);\n            this.showWeiCards();\n        }\n\n        this.baoDao.active = true;\n        this.scheduleOnce(function() {this.baoDao.active = false;}.bind(this), 0.7);\n\n    },\n\n    showAllCards: function () {\n        if(!this._user) return;\n\n        if (this._user.isContainExtra) {\n\n            var cards = this._cardsInfo[0].cards.map(function (cardInfoItem) {return KQCard.cardsFromArray(cardInfoItem);})\n                .reduce(function (array, subCards) {return array.concat(subCards);}, []);\n\n            this.showTeShuCards(cards);\n\n            //return;\n        }\n\n        if(!this._daoLayoutBacks) return;\n\n        this.touLayoutBack.node.parent.active = true;\n\n        this._daoLayoutBacks.forEach(function (nodes,index) {\n\n            nodes.node.active = true;\n\n            nodes.node.children.forEach(function (no) {no.active = true;});\n\n            this._setCardSpriteFrame(index,nodes.node);\n\n            if(this.TScoreLayout) this.daoTitleNodes[index].active = true;\n\n        }.bind(this));\n\n        if(!this.TScoreLayout) return;\n\n        this.daoScoreLayouts.forEach(function (nodes) {\n\n            nodes.node.active = true;\n\n        }.bind(this));\n\n        this.setScores([this._user.cScore],[this.TScoreLayout],true);\n\n        this.TtitleNode.active = true;\n\n        this.TScoreLayout.node.active = true;\n\n    },\n\n    showBaoDao: function (index,positonY) {\n        let cardsInfo = this._cardsInfo;\n        let cardType = cardsInfo.map(function (cardInfoItem) {\n            return cardInfoItem.type\n        });\n\n        let typeName0 = cardType[index]+1;\n        typeName0 = typeName0>=10 ? typeName0 :\"0\"+typeName0;\n        if(index == 0) typeName0 = typeName0=='04' ? '11' :typeName0;\n        if(index == 1) typeName0 = typeName0=='07' ? '22' :typeName0;\n\n        if(cardType[index] == 10) typeName0 = '15';//特殊牌\n        if(cardType[index] == 11) typeName0 = '14';\n        if(cardType[index] == 12) typeName0 = '16';\n        if(cardType[index] == 18) typeName0 = '25';\n        if(cardType[index] == 19) typeName0 = '26';\n\n        var path = this._user.isContainExtra?\"game-right_specia\":\"game-poker_type\";\n\n        this._loadCardFrame(typeName0, function (spriteFrame) {\n            var btnSprites1 =  this.baoDao.getComponent(cc.Sprite);\n            btnSprites1.spriteFrame = spriteFrame;\n        }.bind(this), \"play/CardTypeCombine/game_txt\",path);\n        this.baoDao.y = positonY;\n    },\n\n    _loadCardFrame: function (cardName, callback, path = \"play/CardTypeCombine/pockList\",\n                              paths = \"public-pic-card-poker-\") {\n        cc.loader.loadRes(path, cc.SpriteAtlas, function (err, atlas) {\n            if (err) {\n                cc.error(err);\n                return;\n            }\n            cardName = cardName + \"\";\n            cardName = this._cardFullName(cardName,paths);\n            var frame = atlas.getSpriteFrame(cardName);\n            callback(frame);\n        }.bind(this));\n    },\n\n    _cardFullName: function (cardShortName,paths) {\n        if(!paths) return cardShortName;\n        var cardName = cardShortName;\n        if (!cardName.startsWith(paths)) {\n            cardName = paths + cardName;\n        }\n        return cardName;\n    },\n\n    _clearCards: function () {\n        this._clearLayoutCards(this.touLayout);\n        this._clearLayoutCards(this.zhongLayout);\n        this._clearLayoutCards(this.weiLayout);\n    },\n\n    _clearLayoutCards: function (layout) {\n        this._cardSpritesWithLayout(layout).forEach(function (sprite) {\n            sprite.spriteFrame = null;\n        });\n    },\n\n    _cardSpritesWithLayout: function (layout) {\n        let node = layout.node;\n        return node.children.map(function (node) {\n            return node.getComponent('cc.Sprite');\n        });\n    },\n\n    _allCardSprites: function () {\n        let touCardSprites = this._cardSpritesWithLayout(this.touLayout);\n        let zhongCardSprites = this._cardSpritesWithLayout(this.zhongLayout);\n        let weiCardSprites = this._cardSpritesWithLayout(this.weiLayout);\n        let result = touCardSprites.concat(zhongCardSprites).concat(weiCardSprites);\n        return result;\n    },\n\n});\n"]}