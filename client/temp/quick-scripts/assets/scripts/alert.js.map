{"version":3,"sources":["alert.js"],"names":["AudioManager","require","cc","Class","extends","Component","properties","popNode","Node","label","Label","_alertCallback","_willDismissCallback","_dismissCallback","_confirmCallback","_tishi","_card_num","onLoad","alert","node","active","anim","getComponent","Animation","play","alertResult","find","playBtnClickSFX","instance","palyBtnCancelClickSFX","palyBtnPublicSFX","palyBtnCreateRoomSFX","palyWindowSFX","palyWeiXinLoginSFX","palyFangPaiSFX","dismissAction","willDismissCallback","result","dismissComplete","dismissAnim","getAnimationState","on","dismissActionResult","onDismissComplete","dismissPlay","director","loadScene","doneAction","onDoneAction","confirmCallback","setMessage","msg","string","getMessage","setAlertCallbck","callback","setWillDismissCallback","setDismissCallback","setConfirmCallback"],"mappings":";;;;;;AAAA,IAAIA,eAAeC,QAAQ,cAAR,CAAnB;AACAC,GAAGC,KAAH,CAAS;AACLC,WAASF,GAAGG,SADP;;AAGLC,cAAY;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAC,aAAQL,GAAGM,IAXH;AAYRC,WAAMP,GAAGQ,KAZD;;AAcRC,oBAAgB,IAdR;AAeRC,0BAAsB,IAfd;AAgBRC,sBAAkB,IAhBV;AAiBRC,sBAAkB,IAjBV,EAiBkB;AAC1BC,YAAO,IAlBC;AAmBRC,eAAU;AAnBF,GAHP;;AAyBL;AACAC,UAAQ,kBAAY,CAEnB,CA5BI;;AA8BLC,SAAM,iBAAW;AACb,SAAKC,IAAL,CAAUC,MAAV,GAAmB,IAAnB;AACA,QAAIC,OAAO,KAAKd,OAAL,CAAae,YAAb,CAA0BpB,GAAGqB,SAA7B,CAAX;AACAF,SAAKG,IAAL,CAAU,KAAV;;AAEA,QAAI,KAAKb,cAAT,EAAyB;AACvB,WAAKA,cAAL,CAAoB,KAAKQ,IAAzB;AACD;AACJ,GAtCI;AAuCL;AACAM,eAAa,uBAAY;AACrB,SAAKN,IAAL,CAAUC,MAAV,GAAmB,IAAnB;AACAlB,OAAGwB,IAAH,CAAQ,oBAAR,EAA8BN,MAA9B,GAAuC,KAAvC;AACA,QAAIC,OAAO,KAAKd,OAAL,CAAae,YAAb,CAA0BpB,GAAGqB,SAA7B,CAAX;AACAF,SAAKG,IAAL,CAAU,KAAV;;AAEA,QAAI,KAAKb,cAAT,EAAyB;AACvB,WAAKA,cAAL,CAAoB,KAAKQ,IAAzB;AACD;AACJ,GAjDI;;AAmDL;AACAQ,mBAAgB,2BAAW;AACvB3B,iBAAa4B,QAAb,CAAsBD,eAAtB;AACH,GAtDI;;AAwDL;AACAE,yBAAsB,iCAAU;AAC5B7B,iBAAa4B,QAAb,CAAsBC,qBAAtB;AACH,GA3DI;;AA6DL;AACAC,oBAAkB,4BAAY;AAC1B9B,iBAAa4B,QAAb,CAAsBE,gBAAtB;AACH,GAhEI;;AAkEL;AACAC,wBAAsB,gCAAY;AAC9B/B,iBAAa4B,QAAb,CAAsBG,oBAAtB;AACH,GArEI;AAsEL;AACAC,iBAAe,yBAAY;AACvBhC,iBAAa4B,QAAb,CAAsBI,aAAtB;AACH,GAzEI;;AA2ELC,sBAAmB,8BAAW;AAC1BjC,iBAAa4B,QAAb,CAAsBK,kBAAtB;AACH,GA7EI;AA8ELC,kBAAgB,0BAAY;AACxBlC,iBAAa4B,QAAb,CAAsBM,cAAtB;AACH,GAhFI;;AAkFLC,iBAAc,yBAAW;AACvB,QAAIC,sBAAsB,KAAKxB,oBAA/B;AACA,QAAIwB,mBAAJ,EAAyB;AACvB,UAAIC,SAASD,qBAAb;AACA,UAAIC,MAAJ,EAAY;AACV,aAAKC,eAAL;AACA;AACD;AACF;;AAEC,QAAIjB,OAAO,KAAKd,OAAL,CAAae,YAAb,CAA0BpB,GAAGqB,SAA7B,CAAX;AACA,QAAIgB,cAAclB,KAAKmB,iBAAL,CAAuB,aAAvB,CAAlB;AACAD,gBAAYE,EAAZ,CAAe,UAAf,EAA0B,KAAKH,eAA/B,EAA+C,IAA/C;AACAjB,SAAKG,IAAL,CAAU,aAAV;AACH,GAhGI;;AAkGL;AACAkB,uBAAoB,+BAAW;AAC7B,QAAIN,sBAAsB,KAAKxB,oBAA/B;AACA,QAAIwB,mBAAJ,EAAyB;AACvB,UAAIC,SAASD,qBAAb;AACA,UAAIC,MAAJ,EAAY;AACV,aAAKC,eAAL;AACA;AACD;AACF;;AAEC,QAAIjB,OAAO,KAAKd,OAAL,CAAae,YAAb,CAA0BpB,GAAGqB,SAA7B,CAAX;AACA,QAAIgB,cAAclB,KAAKmB,iBAAL,CAAuB,aAAvB,CAAlB;AACAD,gBAAYE,EAAZ,CAAe,UAAf,EAA0B,KAAKH,eAA/B,EAA+C,IAA/C;AACAjB,SAAKG,IAAL,CAAU,aAAV;AACAtB,OAAGwB,IAAH,CAAQ,oBAAR,EAA8BN,MAA9B,GAAuC,IAAvC;AACH,GAlHI;;AAoHLkB,mBAAgB,2BAAW;AACvB,SAAKnB,IAAL,CAAUC,MAAV,GAAmB,KAAnB;;AAEA,QAAI,KAAKuB,iBAAT,EAA4B;AAC1B,WAAKA,iBAAL;AACD;;AAED,QAAI,KAAK9B,gBAAT,EAA2B;AACzB,WAAKA,gBAAL,CAAsB,KAAKM,IAA3B;AACD;AACJ,GA9HI;AA+HLyB,eAAY,uBAAW;AACrB1C,OAAG2C,QAAH,CAAYC,SAAZ,CAAsB,MAAtB;AACD,GAjII;;AAmILH,qBAAkB,6BAAW;AAC3B;AACD,GArII;;AAuILI,cAAW,sBAAW;AAClB,SAAKZ,aAAL;AACA,SAAKa,YAAL;;AAEA,QAAIC,kBAAkB,KAAKnC,gBAA3B;AACA,QAAImC,eAAJ,EAAqB;AACnBA,sBAAgB,KAAK9B,IAArB;AACD;AACJ,GA/II;;AAiJL6B,gBAAa,wBAAW,CAEvB,CAnJI;;AAqJLE,cAAW,oBAASC,GAAT,EAAc;AACrB,SAAK1C,KAAL,CAAW2C,MAAX,GAAoBD,GAApB;AACH,GAvJI;;AAyJLE,cAAY,sBAAY;AACtB,WAAO,KAAK5C,KAAL,CAAW2C,MAAlB;AACD,GA3JI;;AA6JLE,mBAAiB,yBAAUC,QAAV,EAAoB;AACnC,SAAK5C,cAAL,GAAsB4C,QAAtB;AACD,GA/JI;;AAiKLC,0BAAwB,gCAAUD,QAAV,EAAoB;AAC1C,SAAK3C,oBAAL,GAA4B2C,QAA5B;AACD,GAnKI;;AAqKLE,sBAAoB,4BAAUF,QAAV,EAAoB;AACtC,SAAK1C,gBAAL,GAAwB0C,QAAxB;AACD,GAvKI;;AAyKLG,sBAAoB,4BAAUH,QAAV,EAAoB;AACtC,SAAKzC,gBAAL,GAAwByC,QAAxB;AACD;;AAED;;;;AAIA;AACA;;AAEA;AApLK,CAAT","file":"alert.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["var AudioManager = require('AudioManager');\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //    default: null,      // The default value will be used only when the component attaching\n        //                           to a node for the first time\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        popNode:cc.Node,\n        label:cc.Label,\n\n        _alertCallback: null,\n        _willDismissCallback: null,\n        _dismissCallback: null,\n        _confirmCallback: null,   // 点击确定后的回调\n        _tishi:null,\n        _card_num:null,\n    },\n\n    // use this for initialization\n    onLoad: function () {\n      \n    },\n\n    alert:function() {\n        this.node.active = true;\n        var anim = this.popNode.getComponent(cc.Animation);\n        anim.play('pop');\n\n        if (this._alertCallback) {\n          this._alertCallback(this.node);\n        }\n    },\n    /*#####弹出结果*/\n    alertResult: function () {\n        this.node.active = true;\n        cc.find(\"Canvas/show_result\").active = false;\n        var anim = this.popNode.getComponent(cc.Animation);\n        anim.play('pop');\n\n        if (this._alertCallback) {\n          this._alertCallback(this.node);\n        }\n    },\n\n    /*#####点击确定*/\n    playBtnClickSFX:function() {\n        AudioManager.instance.playBtnClickSFX();\n    },\n\n    /*#####点击取消*/\n    palyBtnCancelClickSFX:function(){\n        AudioManager.instance.palyBtnCancelClickSFX();\n    },\n\n    /*#####点击关闭或者按键之类的按钮，播放音效*/\n    palyBtnPublicSFX: function () {\n        AudioManager.instance.palyBtnPublicSFX();\n    },\n\n    /*#####点击创建房间，播放音效*/\n    palyBtnCreateRoomSFX: function () {\n        AudioManager.instance.palyBtnCreateRoomSFX();\n    },\n    /*#####点击创建房间，播放音效*/\n    palyWindowSFX: function () {\n        AudioManager.instance.palyWindowSFX();\n    },\n\n    palyWeiXinLoginSFX:function() {\n        AudioManager.instance.palyWeiXinLoginSFX();\n    },\n    palyFangPaiSFX: function () {\n        AudioManager.instance.palyFangPaiSFX();\n    },\n\n    dismissAction:function() {\n      let willDismissCallback = this._willDismissCallback;\n      if (willDismissCallback) {\n        let result = willDismissCallback();\n        if (result) {\n          this.dismissComplete();\n          return;\n        }\n      }\n\n        var anim = this.popNode.getComponent(cc.Animation);\n        var dismissAnim = anim.getAnimationState('pop_dismiss');\n        dismissAnim.on('finished',this.dismissComplete,this);\n        anim.play('pop_dismiss');\n    },\n\n    /*#####隐藏结果页面*/\n    dismissActionResult:function() {\n      let willDismissCallback = this._willDismissCallback;\n      if (willDismissCallback) {\n        let result = willDismissCallback();\n        if (result) {\n          this.dismissComplete();\n          return;\n        }\n      }\n\n        var anim = this.popNode.getComponent(cc.Animation);\n        var dismissAnim = anim.getAnimationState('pop_dismiss');\n        dismissAnim.on('finished',this.dismissComplete,this);\n        anim.play('pop_dismiss');\n        cc.find(\"Canvas/show_result\").active = true;\n    },\n\n    dismissComplete:function() {\n        this.node.active = false;\n\n        if (this.onDismissComplete) {\n          this.onDismissComplete();\n        }\n\n        if (this._dismissCallback) {\n          this._dismissCallback(this.node);\n        }\n    },\n    dismissPlay:function() {\n      cc.director.loadScene(\"hall\");  \n    },\n\n    onDismissComplete:function() {\n      //cc.log(\"onDismissComplete\");\n    },\n\n    doneAction:function() {\n        this.dismissAction();\n        this.onDoneAction();\n\n        let confirmCallback = this._confirmCallback;\n        if (confirmCallback) {\n          confirmCallback(this.node);\n        }\n    },\n\n    onDoneAction:function() {\n\n    },\n\n    setMessage:function(msg) {\n        this.label.string = msg;\n    },\n\n    getMessage: function () {\n      return this.label.string;\n    },\n\n    setAlertCallbck: function (callback) {\n      this._alertCallback = callback;\n    },\n\n    setWillDismissCallback: function (callback) {\n      this._willDismissCallback = callback;\n    },\n\n    setDismissCallback: function (callback) {\n      this._dismissCallback = callback;\n    },\n\n    setConfirmCallback: function (callback) {\n      this._confirmCallback = callback;\n    },\n\n    /*setMessage: function (message) {\n      this.label.getComponent('cc.Label').string = message;\n    },*/\n\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n});\n"]}