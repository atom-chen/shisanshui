{"version":3,"sources":["inviteCode.js"],"names":["Socket","require","cc","Class","extends","Component","properties","labelNumbers","Label","callbackInviteCode","onLoad","clickClear","forEach","label","string","clickNumber","event","number","_lastEmptyLabel","isComplete","inviteNumber","_inviteNumber","length","userId","instance","userInfo","id","sendCode","sendInviteCode","clickDeleteOne","_lastNumberLabel","index","reduce"],"mappings":";;;;;;AAAA;;;;;;AAMA,IAAMA,SAASC,QAAQ,QAAR,CAAf;AACAC,GAAGC,KAAH,CAAS;AACLC,WAASF,GAAGG,SADP;;AAGLC,cAAY;AACRC,kBAAc,CAACL,GAAGM,KAAJ,CADN;AAERC,wBAAoB;AAFZ,GAHP;;AAQLC,UAAQ,kBAAY;AAClB,SAAKC,UAAL,GADkB,CACC;AACpB,GAVI;;AAYLA,cAAY,sBAAY;AACtB,SAAKJ,YAAL,CAAkBK,OAAlB,CAA0B,UAAUC,KAAV,EAAiB;AACzCA,YAAMC,MAAN,GAAe,EAAf;AACD,KAFD;AAGD,GAhBI;;AAkBLC,eAAa,qBAAUC,KAAV,EAAiBC,MAAjB,EAAyB;AACpC,QAAIJ,QAAQ,KAAKK,eAAL,EAAZ;AACA,QAAIL,KAAJ,EAAW;AACTA,YAAMC,MAAN,GAAeG,MAAf;AACA;AACD,KAHD,MAGO;AACL;AACD;AACD,QAAIE,aAAc,KAAKD,eAAL,MAA0B,IAA5C;AACA;AACA,QAAIE,eAAe,KAAKC,aAAL,EAAnB;;AAEA,QAAKD,aAAaE,MAAb,IAAuB,CAA5B,EAA+B;AAC7B;AACA,UAAIC,SAASvB,OAAOwB,QAAP,CAAgBC,QAAhB,CAAyBC,EAAtC;AACA;AACA,WAAKjB,kBAAL,GAA0BW,YAA1B;AACD;AACF,GApCI;AAqCLO,YAAU,oBAAU;AAAG;AACrB,QAAIJ,SAASvB,OAAOwB,QAAP,CAAgBC,QAAhB,CAAyBC,EAAtC;AACA,QAAIN,eAAe,KAAKX,kBAAxB;AACA;AACA,QAAIW,gBAAgBA,aAAaE,MAAb,IAAqB,CAAzC,EAA2C;AACzCtB,aAAO4B,cAAP,CAAsBR,YAAtB,EAAoCG,MAApC;AACA,WAAKd,kBAAL,GAA0B,EAA1B,CAFyC,CAET;AACjC;AACF,GA7CI;AA8CLoB,kBAAgB,0BAAY;AAC1B,QAAIhB,QAAQ,KAAKiB,gBAAL,EAAZ;AACA,QAAIjB,KAAJ,EAAW;AACTA,YAAMC,MAAN,GAAe,EAAf;AACD;AACF,GAnDI;;AAqDLI,mBAAiB,2BAAY;AAC3B,SAAK,IAAIa,KAAT,IAAkB,KAAKxB,YAAvB,EAAqC;AACnC,UAAIM,QAAQ,KAAKN,YAAL,CAAkBwB,KAAlB,CAAZ;AACA,UAAIlB,MAAMC,MAAN,IAAgB,IAAhB,IACDD,MAAMC,MAAN,CAAaQ,MAAb,IAAuB,CAD1B,EAC6B;AAC3B,eAAOT,KAAP;AACD;AACF;AACD,WAAO,IAAP;AACD,GA9DI;;AAgELiB,oBAAkB,4BAAY;AAC5B,SAAK,IAAIC,QAAQ,KAAKxB,YAAL,CAAkBe,MAAlB,GAA2B,CAA5C,EAA+CS,SAAS,CAAxD,EAA2D,EAAEA,KAA7D,EAAoE;AAClE,UAAIlB,QAAQ,KAAKN,YAAL,CAAkBwB,KAAlB,CAAZ;AACA,UAAIlB,MAAMC,MAAN,IAAgBD,MAAMC,MAAN,CAAaQ,MAAb,GAAsB,CAA1C,EAA6C;AAC3C,eAAOT,KAAP;AACD;AACF;;AAED,WAAO,IAAP;AACD,GAzEI;;AA2ELQ,iBAAe,yBAAY;AACzB,WAAO,KAAKd,YAAL,CAAkByB,MAAlB,CAAyB,UAAUZ,YAAV,EAAwBP,KAAxB,EAA+B;AAC7D;AACA,aAAOO,gBAAgBP,MAAMC,MAAN,IAAgB,EAAhC,CAAP;AACD,KAHM,EAGJ,EAHI,CAAP;AAID;AAhFI,CAAT","file":"inviteCode.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["/**\r\n * 邀请码\r\n * @authors 黄成(you@example.org)\r\n * @date    2017-06-16 09:44:10\r\n * @version $Id$\r\n */\r\nconst Socket = require('socket');\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        labelNumbers: [cc.Label],\r\n        callbackInviteCode: '',\r\n    },\r\n\r\n    onLoad: function () {\r\n      this.clickClear(); //清除数字\r\n    },\r\n\r\n    clickClear: function () {\r\n      this.labelNumbers.forEach(function (label) {\r\n        label.string = \"\";\r\n      });\r\n    },\r\n\r\n    clickNumber: function (event, number) {\r\n      var label = this._lastEmptyLabel();\r\n      if (label) {\r\n        label.string = number;\r\n       \t//cc.log(label.string ,\"----------------\");\r\n      } else {\r\n        return;\r\n      }\r\n      let isComplete = (this._lastEmptyLabel() == null);\r\n      //cc.log(\"isComplete-------------\", this.callbackInviteCode);\r\n      let inviteNumber = this._inviteNumber();\r\n\r\n      if ( inviteNumber.length == 6 ){\r\n        //cc.log(inviteNumber,\"--------------------38\"); //邀请码\r\n        let userId = Socket.instance.userInfo.id;\r\n        //Socket.sendInviteCode(inviteNumber, userId);\r\n        this.callbackInviteCode = inviteNumber;\r\n      }\r\n    },\r\n    sendCode :function(){  //发送邀请码\r\n      let userId = Socket.instance.userInfo.id;\r\n      let inviteNumber = this.callbackInviteCode;\r\n      //cc.log(inviteNumber,\"--------------------38\")\r\n      if( inviteNumber && inviteNumber.length==6){  \r\n        Socket.sendInviteCode(inviteNumber, userId);\r\n        this.callbackInviteCode = '';   //清空邀请码\r\n      }\r\n    },\r\n    clickDeleteOne: function () {\r\n      let label = this._lastNumberLabel();\r\n      if (label) {\r\n        label.string = \"\";\r\n      }\r\n    },\r\n\r\n    _lastEmptyLabel: function () {\r\n      for (var index in this.labelNumbers) {\r\n        var label = this.labelNumbers[index];\r\n        if (label.string == null\r\n        || label.string.length <= 0) {\r\n          return label;\r\n        }\r\n      }\r\n      return null;\r\n    },\r\n\r\n    _lastNumberLabel: function () {\r\n      for (var index = this.labelNumbers.length - 1; index >= 0; --index) {\r\n        let label = this.labelNumbers[index];\r\n        if (label.string && label.string.length > 0) {\r\n          return label;\r\n        }\r\n      }\r\n\r\n      return null;\r\n    },\r\n\r\n    _inviteNumber: function () {\r\n      return this.labelNumbers.reduce(function (inviteNumber, label) {\r\n        //cc.log(inviteNumber,\"-----------------\");\r\n        return inviteNumber + (label.string || \"\");\r\n      }, \"\");\r\n    },\r\n})"]}