{"version":3,"sources":["Invit.js"],"names":["Socket","require","cc","Class","extends","Component","properties","labelNumbers","Label","callbackJoinRoom","onLoad","clickClear","clickNumber","event","number","label","_lastEmptyLabel","string","isComplete","inviteNumber","_roomNumber","length","sendCode","userId","instance","userInfo","id","console","log","sendInviteCode","forEach","clickDeleteOne","_lastNumberLabel","index","reduce","roomNumber"],"mappings":";;;;;;AAAA,IAAMA,SAASC,QAAQ,QAAR,CAAf;AACAC,GAAGC,KAAH,CAAS;AACLC,WAASF,GAAGG,SADP;;AAGLC,cAAY;AACRC,kBAAc,CAACL,GAAGM,KAAJ,CADN;AAERC,sBAAkB;AAFV,GAHP;;AAQL;AACAC,UAAQ,kBAAY;AAClB,SAAKC,UAAL;AACD,GAXI;;AAaLC,eAAa,qBAAUC,KAAV,EAAiBC,MAAjB,EAAyB;AACpC,QAAIC,QAAQ,KAAKC,eAAL,EAAZ;AACA,QAAID,KAAJ,EAAW;AACTA,YAAME,MAAN,GAAeH,MAAf;AACD,KAFD,MAEO;AACL;AACD;AACD,QAAII,aAAc,KAAKF,eAAL,MAA0B,IAA5C;AACA,QAAIG,eAAe,KAAKC,WAAL,EAAnB;AACA,QAAID,aAAaE,MAAb,IAAuB,CAA3B,EAA8B;AAC5B,WAAKZ,gBAAL,GAAwBU,YAAxB;AACD;AACF,GAzBI;;AA2BLG,YAAU,oBAAU;AAAG;AACrB,QAAIC,SAASvB,OAAOwB,QAAP,CAAgBC,QAAhB,CAAyBC,EAAtC;AACA,QAAIP,eAAe,KAAKV,gBAAxB;AACAkB,YAAQC,GAAR,CAAYT,YAAZ,EAA0B,0BAA1B;AACA,QAAIA,aAAaE,MAAb,IAAqB,CAAzB,EAA2B;AACzBrB,aAAO6B,cAAP,CAAsBV,YAAtB,EAAoCI,MAApC;AACA,WAAKd,gBAAL,GAAwB,EAAxB,CAFyB,CAEK;AAC/B;AACF,GAnCI;;AAqCLE,cAAY,sBAAY;AACtB,SAAKF,gBAAL,GAAwB,EAAxB;AACA,SAAKF,YAAL,CAAkBuB,OAAlB,CAA0B,UAAUf,KAAV,EAAiB;AACzCA,YAAME,MAAN,GAAe,EAAf;AACD,KAFD;AAGD,GA1CI;;AA4CLc,kBAAgB,0BAAY;AAC1B,QAAIhB,QAAQ,KAAKiB,gBAAL,EAAZ;AACA,QAAIjB,KAAJ,EAAW;AACTA,YAAME,MAAN,GAAe,EAAf;AACD;AACF,GAjDI;;AAmDLD,mBAAiB,2BAAY;AAC3B,SAAK,IAAIiB,KAAT,IAAkB,KAAK1B,YAAvB,EAAqC;AACnC,UAAIQ,QAAQ,KAAKR,YAAL,CAAkB0B,KAAlB,CAAZ;AACA,UAAIlB,MAAME,MAAN,IAAgB,IAAhB,IACDF,MAAME,MAAN,CAAaI,MAAb,IAAuB,CAD1B,EAC6B;AAC3B,eAAON,KAAP;AACD;AACF;AACD,WAAO,IAAP;AACD,GA5DI;;AA8DLiB,oBAAkB,4BAAY;AAC5B,SAAK,IAAIC,QAAQ,KAAK1B,YAAL,CAAkBc,MAAlB,GAA2B,CAA5C,EAA+CY,SAAS,CAAxD,EAA2D,EAAEA,KAA7D,EAAoE;AAClE,UAAIlB,QAAQ,KAAKR,YAAL,CAAkB0B,KAAlB,CAAZ;AACA,UAAIlB,MAAME,MAAN,IAAgBF,MAAME,MAAN,CAAaI,MAAb,GAAsB,CAA1C,EAA6C;AAC3C,eAAON,KAAP;AACD;AACF;;AAED,WAAO,IAAP;AACD,GAvEI;;AAyELK,eAAa,uBAAY;AACvB,WAAO,KAAKb,YAAL,CAAkB2B,MAAlB,CAAyB,UAAUC,UAAV,EAAsBpB,KAAtB,EAA6B;AAC3D,aAAOoB,cAAcpB,MAAME,MAAN,IAAgB,EAA9B,CAAP;AACD,KAFM,EAEJ,EAFI,CAAP;AAGD;AA7EI,CAAT","file":"Invit.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["const Socket = require('socket');\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        labelNumbers: [cc.Label],\n        callbackJoinRoom: null,\n    },\n\n    // use this for initialization\n    onLoad: function () {\n      this.clickClear();\n    },\n\n    clickNumber: function (event, number) {\n      var label = this._lastEmptyLabel();\n      if (label) {\n        label.string = number;\n      } else {\n        return;\n      }\n      let isComplete = (this._lastEmptyLabel() == null);\n      let inviteNumber = this._roomNumber();\n      if (inviteNumber.length == 6) {\n        this.callbackJoinRoom = inviteNumber;\n      }\n    },\n\n    sendCode :function(){  //发送邀请码\n      let userId = Socket.instance.userInfo.id;\n      let inviteNumber = this.callbackJoinRoom;\n      console.log(inviteNumber ,\"------------------------\");\n      if( inviteNumber.length==6){  \n        Socket.sendInviteCode(inviteNumber, userId);\n        this.callbackJoinRoom = '';   //清空邀请码\n      }\n    },\n\n    clickClear: function () {\n      this.callbackJoinRoom = '';\n      this.labelNumbers.forEach(function (label) {\n        label.string = \"\";\n      });\n    },\n\n    clickDeleteOne: function () {\n      let label = this._lastNumberLabel();\n      if (label) {\n        label.string = \"\";\n      }\n    },\n\n    _lastEmptyLabel: function () {\n      for (var index in this.labelNumbers) {\n        var label = this.labelNumbers[index];\n        if (label.string == null\n        || label.string.length <= 0) {\n          return label;\n        }\n      }\n      return null;\n    },\n\n    _lastNumberLabel: function () {\n      for (var index = this.labelNumbers.length - 1; index >= 0; --index) {\n        let label = this.labelNumbers[index];\n        if (label.string && label.string.length > 0) {\n          return label;\n        }\n      }\n\n      return null;\n    },\n\n    _roomNumber: function () {\n      return this.labelNumbers.reduce(function (roomNumber, label) {\n        return roomNumber + (label.string || \"\");\n      }, \"\");\n    },\n});\n"]}